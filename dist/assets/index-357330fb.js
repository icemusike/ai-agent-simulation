(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Th={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=Symbol.for("react.element"),Ly=Symbol.for("react.portal"),Dy=Symbol.for("react.fragment"),zy=Symbol.for("react.strict_mode"),By=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),jy=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Wy=Symbol.for("react.memo"),Xy=Symbol.for("react.lazy"),vf=Symbol.iterator;function Qy(e){return e===null||typeof e!="object"?null:(e=vf&&e[vf]||e["@@iterator"],typeof e=="function"?e:null)}var bh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oh=Object.assign,Fh={};function Or(e,t,n){this.props=e,this.context=t,this.refs=Fh,this.updater=n||bh}Or.prototype.isReactComponent={};Or.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Or.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lh(){}Lh.prototype=Or.prototype;function Iu(e,t,n){this.props=e,this.context=t,this.refs=Fh,this.updater=n||bh}var $u=Iu.prototype=new Lh;$u.constructor=Iu;Oh($u,Or.prototype);$u.isPureReactComponent=!0;var wf=Array.isArray,Dh=Object.prototype.hasOwnProperty,Tu={current:null},zh={key:!0,ref:!0,__self:!0,__source:!0};function Bh(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Dh.call(t,r)&&!zh.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Xi,type:e,key:s,ref:a,props:i,_owner:Tu.current}}function Ky(e,t){return{$$typeof:Xi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xi}function Jy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _f=/\/+/g;function Co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jy(""+e.key):t.toString(36)}function zs(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Xi:case Ly:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Co(a,0):r,wf(i)?(n="",e!=null&&(n=e.replace(_f,"$&/")+"/"),zs(i,t,n,"",function(u){return u})):i!=null&&(bu(i)&&(i=Ky(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(_f,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",wf(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+Co(s,o);a+=zs(s,t,n,l,i)}else if(l=Qy(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+Co(s,o++),a+=zs(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function as(e,t,n){if(e==null)return e;var r=[],i=0;return zs(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Yy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Le={current:null},Bs={transition:null},Gy={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:Bs,ReactCurrentOwner:Tu};function Uh(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:as,forEach:function(e,t,n){as(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return as(e,function(){t++}),t},toArray:function(e){return as(e,function(t){return t})||[]},only:function(e){if(!bu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Or;J.Fragment=Dy;J.Profiler=By;J.PureComponent=Iu;J.StrictMode=zy;J.Suspense=Vy;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gy;J.act=Uh;J.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Oh({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Tu.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Dh.call(t,l)&&!zh.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Xi,type:e.type,key:i,ref:s,props:r,_owner:a}};J.createContext=function(e){return e={$$typeof:jy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uy,_context:e},e.Consumer=e};J.createElement=Bh;J.createFactory=function(e){var t=Bh.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Hy,render:e}};J.isValidElement=bu;J.lazy=function(e){return{$$typeof:Xy,_payload:{_status:-1,_result:e},_init:Yy}};J.memo=function(e,t){return{$$typeof:Wy,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Bs.transition;Bs.transition={};try{e()}finally{Bs.transition=t}};J.unstable_act=Uh;J.useCallback=function(e,t){return Le.current.useCallback(e,t)};J.useContext=function(e){return Le.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Le.current.useDeferredValue(e)};J.useEffect=function(e,t){return Le.current.useEffect(e,t)};J.useId=function(){return Le.current.useId()};J.useImperativeHandle=function(e,t,n){return Le.current.useImperativeHandle(e,t,n)};J.useInsertionEffect=function(e,t){return Le.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Le.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Le.current.useMemo(e,t)};J.useReducer=function(e,t,n){return Le.current.useReducer(e,t,n)};J.useRef=function(e){return Le.current.useRef(e)};J.useState=function(e){return Le.current.useState(e)};J.useSyncExternalStore=function(e,t,n){return Le.current.useSyncExternalStore(e,t,n)};J.useTransition=function(){return Le.current.useTransition()};J.version="18.3.1";Th.exports=J;var W=Th.exports;const _=Fy(W);var dl={},jh={exports:{}},tt={},Hh={exports:{}},Vh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,O){var F=I.length;I.push(O);e:for(;0<F;){var P=F-1>>>1,R=I[P];if(0<i(R,O))I[P]=O,I[F]=R,F=P;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var O=I[0],F=I.pop();if(F!==O){I[0]=F;e:for(var P=0,R=I.length,L=R>>>1;P<L;){var U=2*(P+1)-1,H=I[U],X=U+1,Z=I[X];if(0>i(H,F))X<R&&0>i(Z,H)?(I[P]=Z,I[X]=F,P=X):(I[P]=H,I[U]=F,P=U);else if(X<R&&0>i(Z,F))I[P]=Z,I[X]=F,P=X;else break e}}return O}function i(I,O){var F=I.sortIndex-O.sortIndex;return F!==0?F:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,c=3,m=!1,w=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=I)r(u),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(u)}}function g(I){if(v=!1,y(I),!w)if(n(l)!==null)w=!0,M(E);else{var O=n(u);O!==null&&b(g,O.startTime-I)}}function E(I,O){w=!1,v&&(v=!1,p(S),S=-1),m=!0;var F=c;try{for(y(O),d=n(l);d!==null&&(!(d.expirationTime>O)||I&&!N());){var P=d.callback;if(typeof P=="function"){d.callback=null,c=d.priorityLevel;var R=P(d.expirationTime<=O);O=e.unstable_now(),typeof R=="function"?d.callback=R:d===n(l)&&r(l),y(O)}else r(l);d=n(l)}if(d!==null)var L=!0;else{var U=n(u);U!==null&&b(g,U.startTime-O),L=!1}return L}finally{d=null,c=F,m=!1}}var C=!1,A=null,S=-1,$=5,k=-1;function N(){return!(e.unstable_now()-k<$)}function z(){if(A!==null){var I=e.unstable_now();k=I;var O=!0;try{O=A(!0,I)}finally{O?B():(C=!1,A=null)}}else C=!1}var B;if(typeof h=="function")B=function(){h(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ie=G.port2;G.port1.onmessage=z,B=function(){ie.postMessage(null)}}else B=function(){x(z,0)};function M(I){A=I,C||(C=!0,B())}function b(I,O){S=x(function(){I(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,M(E))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(I){switch(c){case 1:case 2:case 3:var O=3;break;default:O=c}var F=c;c=O;try{return I()}finally{c=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=c;c=I;try{return O()}finally{c=F}},e.unstable_scheduleCallback=function(I,O,F){var P=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?P+F:P):F=P,I){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=F+R,I={id:f++,callback:O,priorityLevel:I,startTime:F,expirationTime:R,sortIndex:-1},F>P?(I.sortIndex=F,t(u,I),n(l)===null&&I===n(u)&&(v?(p(S),S=-1):v=!0,b(g,F-P))):(I.sortIndex=R,t(l,I),w||m||(w=!0,M(E))),I},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(I){var O=c;return function(){var F=c;c=O;try{return I.apply(this,arguments)}finally{c=F}}}})(Vh);Hh.exports=Vh;var qy=Hh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=W,Ze=qy;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wh=new Set,Si={};function Wn(e,t){kr(e,t),kr(e+"Capture",t)}function kr(e,t){for(Si[e]=t,e=0;e<t.length;e++)Wh.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=Object.prototype.hasOwnProperty,e0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xf={},Ef={};function t0(e){return hl.call(Ef,e)?!0:hl.call(xf,e)?!1:e0.test(e)?Ef[e]=!0:(xf[e]=!0,!1)}function n0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function r0(e,t,n,r){if(t===null||typeof t>"u"||n0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ce[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ce[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ce[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ce[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ce[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ce[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ce[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ce[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ce[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ou=/[\-:]([a-z])/g;function Fu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ou,Fu);Ce[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ou,Fu);Ce[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ou,Fu);Ce[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ce[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ce[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lu(e,t,n,r){var i=Ce.hasOwnProperty(t)?Ce[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(r0(t,n,i,r)&&(n=null),r||i===null?t0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,os=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Du=Symbol.for("react.strict_mode"),ml=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),zu=Symbol.for("react.forward_ref"),pl=Symbol.for("react.suspense"),gl=Symbol.for("react.suspense_list"),Bu=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),Kh=Symbol.for("react.offscreen"),Sf=Symbol.iterator;function Hr(e){return e===null||typeof e!="object"?null:(e=Sf&&e[Sf]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,No;function qr(e){if(No===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);No=t&&t[1]||""}return`
`+No+e}var Ao=!1;function Ro(e,t){if(!e||Ao)return"";Ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qr(e):""}function i0(e){switch(e.tag){case 5:return qr(e.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 2:case 15:return e=Ro(e.type,!1),e;case 11:return e=Ro(e.type.render,!1),e;case 1:return e=Ro(e.type,!0),e;default:return""}}function yl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case ml:return"Profiler";case Du:return"StrictMode";case pl:return"Suspense";case gl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qh:return(e.displayName||"Context")+".Consumer";case Xh:return(e._context.displayName||"Context")+".Provider";case zu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bu:return t=e.displayName||null,t!==null?t:yl(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return yl(e(t))}catch{}}return null}function s0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yl(t);case 8:return t===Du?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function a0(e){var t=Jh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ls(e){e._valueTracker||(e._valueTracker=a0(e))}function Yh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vl(e,t){var n=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function kf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gh(e,t){t=t.checked,t!=null&&Lu(e,"checked",t,!1)}function wl(e,t){Gh(e,t);var n=wn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_l(e,t.type,n):t.hasOwnProperty("defaultValue")&&_l(e,t.type,wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _l(e,t,n){(t!=="number"||oa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zr=Array.isArray;function mr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(Zr(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wn(n)}}function qh(e,t){var n=wn(t.value),r=wn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Af(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function El(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,em=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ki(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o0=["Webkit","ms","Moz","O"];Object.keys(di).forEach(function(e){o0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),di[t]=di[e]})});function tm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||di.hasOwnProperty(e)&&di[e]?(""+t).trim():t+"px"}function nm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var l0=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sl(e,t){if(t){if(l0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function kl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cl=null;function Uu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nl=null,pr=null,gr=null;function Rf(e){if(e=Ji(e)){if(typeof Nl!="function")throw Error(T(280));var t=e.stateNode;t&&(t=Ja(t),Nl(e.stateNode,e.type,t))}}function rm(e){pr?gr?gr.push(e):gr=[e]:pr=e}function im(){if(pr){var e=pr,t=gr;if(gr=pr=null,Rf(e),t)for(e=0;e<t.length;e++)Rf(t[e])}}function sm(e,t){return e(t)}function am(){}var Po=!1;function om(e,t,n){if(Po)return e(t,n);Po=!0;try{return sm(e,t,n)}finally{Po=!1,(pr!==null||gr!==null)&&(am(),im())}}function Ci(e,t){var n=e.stateNode;if(n===null)return null;var r=Ja(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var Al=!1;if(Wt)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Al=!1}function u0(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var hi=!1,la=null,ua=!1,Rl=null,c0={onError:function(e){hi=!0,la=e}};function f0(e,t,n,r,i,s,a,o,l){hi=!1,la=null,u0.apply(c0,arguments)}function d0(e,t,n,r,i,s,a,o,l){if(f0.apply(this,arguments),hi){if(hi){var u=la;hi=!1,la=null}else throw Error(T(198));ua||(ua=!0,Rl=u)}}function Xn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pf(e){if(Xn(e)!==e)throw Error(T(188))}function h0(e){var t=e.alternate;if(!t){if(t=Xn(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pf(i),e;if(s===r)return Pf(i),t;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function um(e){return e=h0(e),e!==null?cm(e):null}function cm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cm(e);if(t!==null)return t;e=e.sibling}return null}var fm=Ze.unstable_scheduleCallback,Mf=Ze.unstable_cancelCallback,m0=Ze.unstable_shouldYield,p0=Ze.unstable_requestPaint,de=Ze.unstable_now,g0=Ze.unstable_getCurrentPriorityLevel,ju=Ze.unstable_ImmediatePriority,dm=Ze.unstable_UserBlockingPriority,ca=Ze.unstable_NormalPriority,y0=Ze.unstable_LowPriority,hm=Ze.unstable_IdlePriority,Wa=null,Tt=null;function v0(e){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Wa,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:x0,w0=Math.log,_0=Math.LN2;function x0(e){return e>>>=0,e===0?32:31-(w0(e)/_0|0)|0}var cs=64,fs=4194304;function ei(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=ei(o):(s&=a,s!==0&&(r=ei(s)))}else a=n&~i,a!==0?r=ei(a):s!==0&&(r=ei(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xt(t),i=1<<n,r|=e[n],t&=~i;return r}function E0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-xt(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=E0(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function Pl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mm(){var e=cs;return cs<<=1,!(cs&4194240)&&(cs=64),e}function Mo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=n}function k0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Hu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var q=0;function pm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gm,Vu,ym,vm,wm,Ml=!1,ds=[],cn=null,fn=null,dn=null,Ni=new Map,Ai=new Map,sn=[],C0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function If(e,t){switch(e){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(t.pointerId)}}function Wr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ji(t),t!==null&&Vu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function N0(e,t,n,r,i){switch(t){case"focusin":return cn=Wr(cn,e,t,n,r,i),!0;case"dragenter":return fn=Wr(fn,e,t,n,r,i),!0;case"mouseover":return dn=Wr(dn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ni.set(s,Wr(Ni.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ai.set(s,Wr(Ai.get(s)||null,e,t,n,r,i)),!0}return!1}function _m(e){var t=Pn(e.target);if(t!==null){var n=Xn(t);if(n!==null){if(t=n.tag,t===13){if(t=lm(n),t!==null){e.blockedOn=t,wm(e.priority,function(){ym(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Us(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Il(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Cl=r,n.target.dispatchEvent(r),Cl=null}else return t=Ji(n),t!==null&&Vu(t),e.blockedOn=n,!1;t.shift()}return!0}function $f(e,t,n){Us(e)&&n.delete(t)}function A0(){Ml=!1,cn!==null&&Us(cn)&&(cn=null),fn!==null&&Us(fn)&&(fn=null),dn!==null&&Us(dn)&&(dn=null),Ni.forEach($f),Ai.forEach($f)}function Xr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ml||(Ml=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,A0)))}function Ri(e){function t(i){return Xr(i,e)}if(0<ds.length){Xr(ds[0],e);for(var n=1;n<ds.length;n++){var r=ds[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cn!==null&&Xr(cn,e),fn!==null&&Xr(fn,e),dn!==null&&Xr(dn,e),Ni.forEach(t),Ai.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)_m(n),n.blockedOn===null&&sn.shift()}var yr=Yt.ReactCurrentBatchConfig,da=!0;function R0(e,t,n,r){var i=q,s=yr.transition;yr.transition=null;try{q=1,Wu(e,t,n,r)}finally{q=i,yr.transition=s}}function P0(e,t,n,r){var i=q,s=yr.transition;yr.transition=null;try{q=4,Wu(e,t,n,r)}finally{q=i,yr.transition=s}}function Wu(e,t,n,r){if(da){var i=Il(e,t,n,r);if(i===null)Bo(e,t,r,ha,n),If(e,r);else if(N0(i,e,t,n,r))r.stopPropagation();else if(If(e,r),t&4&&-1<C0.indexOf(e)){for(;i!==null;){var s=Ji(i);if(s!==null&&gm(s),s=Il(e,t,n,r),s===null&&Bo(e,t,r,ha,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Bo(e,t,r,null,n)}}var ha=null;function Il(e,t,n,r){if(ha=null,e=Uu(r),e=Pn(e),e!==null)if(t=Xn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function xm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g0()){case ju:return 1;case dm:return 4;case ca:case y0:return 16;case hm:return 536870912;default:return 16}default:return 16}}var on=null,Xu=null,js=null;function Em(){if(js)return js;var e,t=Xu,n=t.length,r,i="value"in on?on.value:on.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return js=i.slice(e,1<r?1-r:void 0)}function Hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hs(){return!0}function Tf(){return!1}function nt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hs:Tf,this.isPropagationStopped=Tf,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=nt(Fr),Ki=ue({},Fr,{view:0,detail:0}),M0=nt(Ki),Io,$o,Qr,Xa=ue({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ku,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(Io=e.screenX-Qr.screenX,$o=e.screenY-Qr.screenY):$o=Io=0,Qr=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:$o}}),bf=nt(Xa),I0=ue({},Xa,{dataTransfer:0}),$0=nt(I0),T0=ue({},Ki,{relatedTarget:0}),To=nt(T0),b0=ue({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),O0=nt(b0),F0=ue({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L0=nt(F0),D0=ue({},Fr,{data:0}),Of=nt(D0),z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=U0[e])?!!t[e]:!1}function Ku(){return j0}var H0=ue({},Ki,{key:function(e){if(e.key){var t=z0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ku,charCode:function(e){return e.type==="keypress"?Hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),V0=nt(H0),W0=ue({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=nt(W0),X0=ue({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ku}),Q0=nt(X0),K0=ue({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),J0=nt(K0),Y0=ue({},Xa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=nt(Y0),q0=[9,13,27,32],Ju=Wt&&"CompositionEvent"in window,mi=null;Wt&&"documentMode"in document&&(mi=document.documentMode);var Z0=Wt&&"TextEvent"in window&&!mi,Sm=Wt&&(!Ju||mi&&8<mi&&11>=mi),Lf=String.fromCharCode(32),Df=!1;function km(e,t){switch(e){case"keyup":return q0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function ev(e,t){switch(e){case"compositionend":return Cm(t);case"keypress":return t.which!==32?null:(Df=!0,Lf);case"textInput":return e=t.data,e===Lf&&Df?null:e;default:return null}}function tv(e,t){if(nr)return e==="compositionend"||!Ju&&km(e,t)?(e=Em(),js=Xu=on=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sm&&t.locale!=="ko"?null:t.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nv[e.type]:t==="textarea"}function Nm(e,t,n,r){rm(r),t=ma(t,"onChange"),0<t.length&&(n=new Qu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pi=null,Pi=null;function rv(e){Lm(e,0)}function Qa(e){var t=sr(e);if(Yh(t))return e}function iv(e,t){if(e==="change")return t}var Am=!1;if(Wt){var bo;if(Wt){var Oo="oninput"in document;if(!Oo){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),Oo=typeof Bf.oninput=="function"}bo=Oo}else bo=!1;Am=bo&&(!document.documentMode||9<document.documentMode)}function Uf(){pi&&(pi.detachEvent("onpropertychange",Rm),Pi=pi=null)}function Rm(e){if(e.propertyName==="value"&&Qa(Pi)){var t=[];Nm(t,Pi,e,Uu(e)),om(rv,t)}}function sv(e,t,n){e==="focusin"?(Uf(),pi=t,Pi=n,pi.attachEvent("onpropertychange",Rm)):e==="focusout"&&Uf()}function av(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(Pi)}function ov(e,t){if(e==="click")return Qa(t)}function lv(e,t){if(e==="input"||e==="change")return Qa(t)}function uv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:uv;function Mi(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hl.call(t,i)||!St(e[i],t[i]))return!1}return!0}function jf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hf(e,t){var n=jf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jf(n)}}function Pm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mm(){for(var e=window,t=oa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oa(e.document)}return t}function Yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cv(e){var t=Mm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pm(n.ownerDocument.documentElement,n)){if(r!==null&&Yu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Hf(n,s);var a=Hf(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fv=Wt&&"documentMode"in document&&11>=document.documentMode,rr=null,$l=null,gi=null,Tl=!1;function Vf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tl||rr==null||rr!==oa(r)||(r=rr,"selectionStart"in r&&Yu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gi&&Mi(gi,r)||(gi=r,r=ma($l,"onSelect"),0<r.length&&(t=new Qu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ir={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},Fo={},Im={};Wt&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function Ka(e){if(Fo[e])return Fo[e];if(!ir[e])return e;var t=ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Im)return Fo[e]=t[n];return e}var $m=Ka("animationend"),Tm=Ka("animationiteration"),bm=Ka("animationstart"),Om=Ka("transitionend"),Fm=new Map,Wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){Fm.set(e,t),Wn(t,[e])}for(var Lo=0;Lo<Wf.length;Lo++){var Do=Wf[Lo],dv=Do.toLowerCase(),hv=Do[0].toUpperCase()+Do.slice(1);xn(dv,"on"+hv)}xn($m,"onAnimationEnd");xn(Tm,"onAnimationIteration");xn(bm,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(Om,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ti));function Xf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,d0(r,t,void 0,e),e.currentTarget=null}function Lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Xf(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Xf(i,o,u),s=l}}}if(ua)throw e=Rl,ua=!1,Rl=null,e}function ne(e,t){var n=t[Dl];n===void 0&&(n=t[Dl]=new Set);var r=e+"__bubble";n.has(r)||(Dm(t,e,2,!1),n.add(r))}function zo(e,t,n){var r=0;t&&(r|=4),Dm(n,e,r,t)}var ps="_reactListening"+Math.random().toString(36).slice(2);function Ii(e){if(!e[ps]){e[ps]=!0,Wh.forEach(function(n){n!=="selectionchange"&&(mv.has(n)||zo(n,!1,e),zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ps]||(t[ps]=!0,zo("selectionchange",!1,t))}}function Dm(e,t,n,r){switch(xm(t)){case 1:var i=R0;break;case 4:i=P0;break;default:i=Wu}n=i.bind(null,t,n,e),i=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Pn(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}om(function(){var u=s,f=Uu(n),d=[];e:{var c=Fm.get(e);if(c!==void 0){var m=Qu,w=e;switch(e){case"keypress":if(Hs(n)===0)break e;case"keydown":case"keyup":m=V0;break;case"focusin":w="focus",m=To;break;case"focusout":w="blur",m=To;break;case"beforeblur":case"afterblur":m=To;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Q0;break;case $m:case Tm:case bm:m=O0;break;case Om:m=J0;break;case"scroll":m=M0;break;case"wheel":m=G0;break;case"copy":case"cut":case"paste":m=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ff}var v=(t&4)!==0,x=!v&&e==="scroll",p=v?c!==null?c+"Capture":null:c;v=[];for(var h=u,y;h!==null;){y=h;var g=y.stateNode;if(y.tag===5&&g!==null&&(y=g,p!==null&&(g=Ci(h,p),g!=null&&v.push($i(h,g,y)))),x)break;h=h.return}0<v.length&&(c=new m(c,w,null,n,f),d.push({event:c,listeners:v}))}}if(!(t&7)){e:{if(c=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",c&&n!==Cl&&(w=n.relatedTarget||n.fromElement)&&(Pn(w)||w[Xt]))break e;if((m||c)&&(c=f.window===f?f:(c=f.ownerDocument)?c.defaultView||c.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?Pn(w):null,w!==null&&(x=Xn(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(v=bf,g="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(v=Ff,g="onPointerLeave",p="onPointerEnter",h="pointer"),x=m==null?c:sr(m),y=w==null?c:sr(w),c=new v(g,h+"leave",m,n,f),c.target=x,c.relatedTarget=y,g=null,Pn(f)===u&&(v=new v(p,h+"enter",w,n,f),v.target=y,v.relatedTarget=x,g=v),x=g,m&&w)t:{for(v=m,p=w,h=0,y=v;y;y=Qn(y))h++;for(y=0,g=p;g;g=Qn(g))y++;for(;0<h-y;)v=Qn(v),h--;for(;0<y-h;)p=Qn(p),y--;for(;h--;){if(v===p||p!==null&&v===p.alternate)break t;v=Qn(v),p=Qn(p)}v=null}else v=null;m!==null&&Qf(d,c,m,v,!1),w!==null&&x!==null&&Qf(d,x,w,v,!0)}}e:{if(c=u?sr(u):window,m=c.nodeName&&c.nodeName.toLowerCase(),m==="select"||m==="input"&&c.type==="file")var E=iv;else if(zf(c))if(Am)E=lv;else{E=av;var C=sv}else(m=c.nodeName)&&m.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(E=ov);if(E&&(E=E(e,u))){Nm(d,E,n,f);break e}C&&C(e,c,u),e==="focusout"&&(C=c._wrapperState)&&C.controlled&&c.type==="number"&&_l(c,"number",c.value)}switch(C=u?sr(u):window,e){case"focusin":(zf(C)||C.contentEditable==="true")&&(rr=C,$l=u,gi=null);break;case"focusout":gi=$l=rr=null;break;case"mousedown":Tl=!0;break;case"contextmenu":case"mouseup":case"dragend":Tl=!1,Vf(d,n,f);break;case"selectionchange":if(fv)break;case"keydown":case"keyup":Vf(d,n,f)}var A;if(Ju)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else nr?km(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Sm&&n.locale!=="ko"&&(nr||S!=="onCompositionStart"?S==="onCompositionEnd"&&nr&&(A=Em()):(on=f,Xu="value"in on?on.value:on.textContent,nr=!0)),C=ma(u,S),0<C.length&&(S=new Of(S,e,null,n,f),d.push({event:S,listeners:C}),A?S.data=A:(A=Cm(n),A!==null&&(S.data=A)))),(A=Z0?ev(e,n):tv(e,n))&&(u=ma(u,"onBeforeInput"),0<u.length&&(f=new Of("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=A))}Lm(d,t)})}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ma(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ci(e,n),s!=null&&r.unshift($i(e,s,i)),s=Ci(e,t),s!=null&&r.push($i(e,s,i))),e=e.return}return r}function Qn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qf(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Ci(n,s),l!=null&&a.unshift($i(n,l,o))):i||(l=Ci(n,s),l!=null&&a.push($i(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var pv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function Kf(e){return(typeof e=="string"?e:""+e).replace(pv,`
`).replace(gv,"")}function gs(e,t,n){if(t=Kf(t),Kf(e)!==t&&n)throw Error(T(425))}function pa(){}var bl=null,Ol=null;function Fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,yv=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,vv=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(e){return Jf.resolve(null).then(e).catch(wv)}:Ll;function wv(e){setTimeout(function(){throw e})}function Uo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ri(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ri(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),It="__reactFiber$"+Lr,Ti="__reactProps$"+Lr,Xt="__reactContainer$"+Lr,Dl="__reactEvents$"+Lr,_v="__reactListeners$"+Lr,xv="__reactHandles$"+Lr;function Pn(e){var t=e[It];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xt]||n[It]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yf(e);e!==null;){if(n=e[It])return n;e=Yf(e)}return t}e=n,n=e.parentNode}return null}function Ji(e){return e=e[It]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function Ja(e){return e[Ti]||null}var zl=[],ar=-1;function En(e){return{current:e}}function re(e){0>ar||(e.current=zl[ar],zl[ar]=null,ar--)}function te(e,t){ar++,zl[ar]=e.current,e.current=t}var _n={},Te=En(_n),Ve=En(!1),Dn=_n;function Cr(e,t){var n=e.type.contextTypes;if(!n)return _n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function We(e){return e=e.childContextTypes,e!=null}function ga(){re(Ve),re(Te)}function Gf(e,t,n){if(Te.current!==_n)throw Error(T(168));te(Te,t),te(Ve,n)}function zm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(T(108,s0(e)||"Unknown",i));return ue({},n,r)}function ya(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Dn=Te.current,te(Te,e),te(Ve,Ve.current),!0}function qf(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=zm(e,t,Dn),r.__reactInternalMemoizedMergedChildContext=e,re(Ve),re(Te),te(Te,e)):re(Ve),te(Ve,n)}var Ut=null,Ya=!1,jo=!1;function Bm(e){Ut===null?Ut=[e]:Ut.push(e)}function Ev(e){Ya=!0,Bm(e)}function Sn(){if(!jo&&Ut!==null){jo=!0;var e=0,t=q;try{var n=Ut;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,Ya=!1}catch(i){throw Ut!==null&&(Ut=Ut.slice(e+1)),fm(ju,Sn),i}finally{q=t,jo=!1}}return null}var or=[],lr=0,va=null,wa=0,rt=[],it=0,zn=null,jt=1,Ht="";function Nn(e,t){or[lr++]=wa,or[lr++]=va,va=e,wa=t}function Um(e,t,n){rt[it++]=jt,rt[it++]=Ht,rt[it++]=zn,zn=e;var r=jt;e=Ht;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var s=32-xt(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,jt=1<<32-xt(t)+i|n<<i|r,Ht=s+e}else jt=1<<s|n<<i|r,Ht=e}function Gu(e){e.return!==null&&(Nn(e,1),Um(e,1,0))}function qu(e){for(;e===va;)va=or[--lr],or[lr]=null,wa=or[--lr],or[lr]=null;for(;e===zn;)zn=rt[--it],rt[it]=null,Ht=rt[--it],rt[it]=null,jt=rt[--it],rt[it]=null}var qe=null,Ge=null,se=!1,yt=null;function jm(e,t){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Ge=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zn!==null?{id:jt,overflow:Ht}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qe=e,Ge=null,!0):!1;default:return!1}}function Bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ul(e){if(se){var t=Ge;if(t){var n=t;if(!Zf(e,t)){if(Bl(e))throw Error(T(418));t=hn(n.nextSibling);var r=qe;t&&Zf(e,t)?jm(r,n):(e.flags=e.flags&-4097|2,se=!1,qe=e)}}else{if(Bl(e))throw Error(T(418));e.flags=e.flags&-4097|2,se=!1,qe=e}}}function ed(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function ys(e){if(e!==qe)return!1;if(!se)return ed(e),se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fl(e.type,e.memoizedProps)),t&&(t=Ge)){if(Bl(e))throw Hm(),Error(T(418));for(;t;)jm(e,t),t=hn(t.nextSibling)}if(ed(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ge=hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=qe?hn(e.stateNode.nextSibling):null;return!0}function Hm(){for(var e=Ge;e;)e=hn(e.nextSibling)}function Nr(){Ge=qe=null,se=!1}function Zu(e){yt===null?yt=[e]:yt.push(e)}var Sv=Yt.ReactCurrentBatchConfig;function Kr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function td(e){var t=e._init;return t(e._payload)}function Vm(e){function t(p,h){if(e){var y=p.deletions;y===null?(p.deletions=[h],p.flags|=16):y.push(h)}}function n(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=yn(p,h),p.index=0,p.sibling=null,p}function s(p,h,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<h?(p.flags|=2,h):y):(p.flags|=2,h)):(p.flags|=1048576,h)}function a(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,h,y,g){return h===null||h.tag!==6?(h=Jo(y,p.mode,g),h.return=p,h):(h=i(h,y),h.return=p,h)}function l(p,h,y,g){var E=y.type;return E===tr?f(p,h,y.props.children,g,y.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nn&&td(E)===h.type)?(g=i(h,y.props),g.ref=Kr(p,h,y),g.return=p,g):(g=Ys(y.type,y.key,y.props,null,p.mode,g),g.ref=Kr(p,h,y),g.return=p,g)}function u(p,h,y,g){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Yo(y,p.mode,g),h.return=p,h):(h=i(h,y.children||[]),h.return=p,h)}function f(p,h,y,g,E){return h===null||h.tag!==7?(h=On(y,p.mode,g,E),h.return=p,h):(h=i(h,y),h.return=p,h)}function d(p,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Jo(""+h,p.mode,y),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case os:return y=Ys(h.type,h.key,h.props,null,p.mode,y),y.ref=Kr(p,null,h),y.return=p,y;case er:return h=Yo(h,p.mode,y),h.return=p,h;case nn:var g=h._init;return d(p,g(h._payload),y)}if(Zr(h)||Hr(h))return h=On(h,p.mode,y,null),h.return=p,h;vs(p,h)}return null}function c(p,h,y,g){var E=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:o(p,h,""+y,g);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case os:return y.key===E?l(p,h,y,g):null;case er:return y.key===E?u(p,h,y,g):null;case nn:return E=y._init,c(p,h,E(y._payload),g)}if(Zr(y)||Hr(y))return E!==null?null:f(p,h,y,g,null);vs(p,y)}return null}function m(p,h,y,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return p=p.get(y)||null,o(h,p,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case os:return p=p.get(g.key===null?y:g.key)||null,l(h,p,g,E);case er:return p=p.get(g.key===null?y:g.key)||null,u(h,p,g,E);case nn:var C=g._init;return m(p,h,y,C(g._payload),E)}if(Zr(g)||Hr(g))return p=p.get(y)||null,f(h,p,g,E,null);vs(h,g)}return null}function w(p,h,y,g){for(var E=null,C=null,A=h,S=h=0,$=null;A!==null&&S<y.length;S++){A.index>S?($=A,A=null):$=A.sibling;var k=c(p,A,y[S],g);if(k===null){A===null&&(A=$);break}e&&A&&k.alternate===null&&t(p,A),h=s(k,h,S),C===null?E=k:C.sibling=k,C=k,A=$}if(S===y.length)return n(p,A),se&&Nn(p,S),E;if(A===null){for(;S<y.length;S++)A=d(p,y[S],g),A!==null&&(h=s(A,h,S),C===null?E=A:C.sibling=A,C=A);return se&&Nn(p,S),E}for(A=r(p,A);S<y.length;S++)$=m(A,p,S,y[S],g),$!==null&&(e&&$.alternate!==null&&A.delete($.key===null?S:$.key),h=s($,h,S),C===null?E=$:C.sibling=$,C=$);return e&&A.forEach(function(N){return t(p,N)}),se&&Nn(p,S),E}function v(p,h,y,g){var E=Hr(y);if(typeof E!="function")throw Error(T(150));if(y=E.call(y),y==null)throw Error(T(151));for(var C=E=null,A=h,S=h=0,$=null,k=y.next();A!==null&&!k.done;S++,k=y.next()){A.index>S?($=A,A=null):$=A.sibling;var N=c(p,A,k.value,g);if(N===null){A===null&&(A=$);break}e&&A&&N.alternate===null&&t(p,A),h=s(N,h,S),C===null?E=N:C.sibling=N,C=N,A=$}if(k.done)return n(p,A),se&&Nn(p,S),E;if(A===null){for(;!k.done;S++,k=y.next())k=d(p,k.value,g),k!==null&&(h=s(k,h,S),C===null?E=k:C.sibling=k,C=k);return se&&Nn(p,S),E}for(A=r(p,A);!k.done;S++,k=y.next())k=m(A,p,S,k.value,g),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?S:k.key),h=s(k,h,S),C===null?E=k:C.sibling=k,C=k);return e&&A.forEach(function(z){return t(p,z)}),se&&Nn(p,S),E}function x(p,h,y,g){if(typeof y=="object"&&y!==null&&y.type===tr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case os:e:{for(var E=y.key,C=h;C!==null;){if(C.key===E){if(E=y.type,E===tr){if(C.tag===7){n(p,C.sibling),h=i(C,y.props.children),h.return=p,p=h;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nn&&td(E)===C.type){n(p,C.sibling),h=i(C,y.props),h.ref=Kr(p,C,y),h.return=p,p=h;break e}n(p,C);break}else t(p,C);C=C.sibling}y.type===tr?(h=On(y.props.children,p.mode,g,y.key),h.return=p,p=h):(g=Ys(y.type,y.key,y.props,null,p.mode,g),g.ref=Kr(p,h,y),g.return=p,p=g)}return a(p);case er:e:{for(C=y.key;h!==null;){if(h.key===C)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(p,h.sibling),h=i(h,y.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else t(p,h);h=h.sibling}h=Yo(y,p.mode,g),h.return=p,p=h}return a(p);case nn:return C=y._init,x(p,h,C(y._payload),g)}if(Zr(y))return w(p,h,y,g);if(Hr(y))return v(p,h,y,g);vs(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,y),h.return=p,p=h):(n(p,h),h=Jo(y,p.mode,g),h.return=p,p=h),a(p)):n(p,h)}return x}var Ar=Vm(!0),Wm=Vm(!1),_a=En(null),xa=null,ur=null,ec=null;function tc(){ec=ur=xa=null}function nc(e){var t=_a.current;re(_a),e._currentValue=t}function jl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){xa=e,ec=ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(je=!0),e.firstContext=null)}function lt(e){var t=e._currentValue;if(ec!==e)if(e={context:e,memoizedValue:t,next:null},ur===null){if(xa===null)throw Error(T(308));ur=e,xa.dependencies={lanes:0,firstContext:e}}else ur=ur.next=e;return t}var Mn=null;function rc(e){Mn===null?Mn=[e]:Mn.push(e)}function Xm(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,rc(t)):(n.next=i.next,i.next=n),t.interleaved=n,Qt(e,r)}function Qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Qt(e,n)}return i=r.interleaved,i===null?(t.next=t,rc(r)):(t.next=i.next,i.next=t),r.interleaved=t,Qt(e,n)}function Vs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hu(e,n)}}function nd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ea(e,t,n,r){var i=e.updateQueue;rn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,f=u=l=null,o=s;do{var c=o.lane,m=o.eventTime;if((r&c)===c){f!==null&&(f=f.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,v=o;switch(c=t,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){d=w.call(m,d,c);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,c=typeof w=="function"?w.call(m,d,c):w,c==null)break e;d=ue({},d,c);break e;case 2:rn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,c=i.effects,c===null?i.effects=[o]:c.push(o))}else m={eventTime:m,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=m,l=d):f=f.next=m,a|=c;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;c=o,o=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(1);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Un|=a,e.lanes=a,e.memoizedState=d}}function rd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var Yi={},bt=En(Yi),bi=En(Yi),Oi=En(Yi);function In(e){if(e===Yi)throw Error(T(174));return e}function sc(e,t){switch(te(Oi,t),te(bi,e),te(bt,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:El(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=El(t,e)}re(bt),te(bt,t)}function Rr(){re(bt),re(bi),re(Oi)}function Km(e){In(Oi.current);var t=In(bt.current),n=El(t,e.type);t!==n&&(te(bi,e),te(bt,n))}function ac(e){bi.current===e&&(re(bt),re(bi))}var oe=En(0);function Sa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ho=[];function oc(){for(var e=0;e<Ho.length;e++)Ho[e]._workInProgressVersionPrimary=null;Ho.length=0}var Ws=Yt.ReactCurrentDispatcher,Vo=Yt.ReactCurrentBatchConfig,Bn=0,le=null,ge=null,we=null,ka=!1,yi=!1,Fi=0,kv=0;function Pe(){throw Error(T(321))}function lc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!St(e[n],t[n]))return!1;return!0}function uc(e,t,n,r,i,s){if(Bn=s,le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ws.current=e===null||e.memoizedState===null?Rv:Pv,e=n(r,i),yi){s=0;do{if(yi=!1,Fi=0,25<=s)throw Error(T(301));s+=1,we=ge=null,t.updateQueue=null,Ws.current=Mv,e=n(r,i)}while(yi)}if(Ws.current=Ca,t=ge!==null&&ge.next!==null,Bn=0,we=ge=le=null,ka=!1,t)throw Error(T(300));return e}function cc(){var e=Fi!==0;return Fi=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?le.memoizedState=we=e:we=we.next=e,we}function ut(){if(ge===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var t=we===null?le.memoizedState:we.next;if(t!==null)we=t,ge=e;else{if(e===null)throw Error(T(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},we===null?le.memoizedState=we=e:we=we.next=e}return we}function Li(e,t){return typeof t=="function"?t(e):t}function Wo(e){var t=ut(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var f=u.lane;if((Bn&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,le.lanes|=f,Un|=f}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,St(r,t.memoizedState)||(je=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,le.lanes|=s,Un|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xo(e){var t=ut(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);St(s,t.memoizedState)||(je=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Jm(){}function Ym(e,t){var n=le,r=ut(),i=t(),s=!St(r.memoizedState,i);if(s&&(r.memoizedState=i,je=!0),r=r.queue,fc(Zm.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,Di(9,qm.bind(null,n,r,i,t),void 0,null),_e===null)throw Error(T(349));Bn&30||Gm(n,t,i)}return i}function Gm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qm(e,t,n,r){t.value=n,t.getSnapshot=r,ep(t)&&tp(e)}function Zm(e,t,n){return n(function(){ep(t)&&tp(e)})}function ep(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!St(e,n)}catch{return!0}}function tp(e){var t=Qt(e,1);t!==null&&Et(t,e,1,-1)}function id(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:e},t.queue=e,e=e.dispatch=Av.bind(null,le,e),[t.memoizedState,e]}function Di(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function np(){return ut().memoizedState}function Xs(e,t,n,r){var i=At();le.flags|=e,i.memoizedState=Di(1|t,n,void 0,r===void 0?null:r)}function Ga(e,t,n,r){var i=ut();r=r===void 0?null:r;var s=void 0;if(ge!==null){var a=ge.memoizedState;if(s=a.destroy,r!==null&&lc(r,a.deps)){i.memoizedState=Di(t,n,s,r);return}}le.flags|=e,i.memoizedState=Di(1|t,n,s,r)}function sd(e,t){return Xs(8390656,8,e,t)}function fc(e,t){return Ga(2048,8,e,t)}function rp(e,t){return Ga(4,2,e,t)}function ip(e,t){return Ga(4,4,e,t)}function sp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ap(e,t,n){return n=n!=null?n.concat([e]):null,Ga(4,4,sp.bind(null,t,e),n)}function dc(){}function op(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lp(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function up(e,t,n){return Bn&21?(St(n,t)||(n=mm(),le.lanes|=n,Un|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,je=!0),e.memoizedState=n)}function Cv(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=Vo.transition;Vo.transition={};try{e(!1),t()}finally{q=n,Vo.transition=r}}function cp(){return ut().memoizedState}function Nv(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fp(e))dp(t,n);else if(n=Xm(e,t,n,r),n!==null){var i=Fe();Et(n,e,r,i),hp(n,t,r)}}function Av(e,t,n){var r=gn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fp(e))dp(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,St(o,a)){var l=t.interleaved;l===null?(i.next=i,rc(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Xm(e,t,i,r),n!==null&&(i=Fe(),Et(n,e,r,i),hp(n,t,r))}}function fp(e){var t=e.alternate;return e===le||t!==null&&t===le}function dp(e,t){yi=ka=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hu(e,n)}}var Ca={readContext:lt,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Rv={readContext:lt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:sd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xs(4194308,4,sp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xs(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Nv.bind(null,le,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:id,useDebugValue:dc,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=id(!1),t=e[0];return e=Cv.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=le,i=At();if(se){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),_e===null)throw Error(T(349));Bn&30||Gm(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,sd(Zm.bind(null,r,s,e),[e]),r.flags|=2048,Di(9,qm.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=At(),t=_e.identifierPrefix;if(se){var n=Ht,r=jt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Fi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pv={readContext:lt,useCallback:op,useContext:lt,useEffect:fc,useImperativeHandle:ap,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:lp,useReducer:Wo,useRef:np,useState:function(){return Wo(Li)},useDebugValue:dc,useDeferredValue:function(e){var t=ut();return up(t,ge.memoizedState,e)},useTransition:function(){var e=Wo(Li)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:cp,unstable_isNewReconciler:!1},Mv={readContext:lt,useCallback:op,useContext:lt,useEffect:fc,useImperativeHandle:ap,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:lp,useReducer:Xo,useRef:np,useState:function(){return Xo(Li)},useDebugValue:dc,useDeferredValue:function(e){var t=ut();return ge===null?t.memoizedState=e:up(t,ge.memoizedState,e)},useTransition:function(){var e=Xo(Li)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Jm,useSyncExternalStore:Ym,useId:cp,unstable_isNewReconciler:!1};function mt(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return(e=e._reactInternals)?Xn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=gn(e),s=Vt(r,i);s.payload=t,n!=null&&(s.callback=n),t=mn(e,s,i),t!==null&&(Et(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=gn(e),s=Vt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=mn(e,s,i),t!==null&&(Et(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fe(),r=gn(e),i=Vt(n,r);i.tag=2,t!=null&&(i.callback=t),t=mn(e,i,r),t!==null&&(Et(t,e,r,n),Vs(t,e,r))}};function ad(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Mi(n,r)||!Mi(i,s):!0}function mp(e,t,n){var r=!1,i=_n,s=t.contextType;return typeof s=="object"&&s!==null?s=lt(s):(i=We(t)?Dn:Te.current,r=t.contextTypes,s=(r=r!=null)?Cr(e,i):_n),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function od(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Vl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ic(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=lt(s):(s=We(t)?Dn:Te.current,i.context=Cr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Hl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ea(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Pr(e,t){try{var n="",r=t;do n+=i0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Iv=typeof WeakMap=="function"?WeakMap:Map;function pp(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Aa||(Aa=!0,tu=r),Wl(e,t)},n}function gp(e,t,n){n=Vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Wl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wl(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ld(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Iv;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Wv.bind(null,e,t,n),t.then(e,e))}function ud(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cd(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,mn(n,t,1))),n.lanes|=1),e)}var $v=Yt.ReactCurrentOwner,je=!1;function be(e,t,n,r){t.child=e===null?Wm(t,null,n,r):Ar(t,e.child,n,r)}function fd(e,t,n,r,i){n=n.render;var s=t.ref;return vr(t,i),r=uc(e,t,n,r,s,i),n=cc(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kt(e,t,i)):(se&&n&&Gu(t),t.flags|=1,be(e,t,r,i),t.child)}function dd(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!_c(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,yp(e,t,s,r,i)):(e=Ys(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mi,n(a,r)&&e.ref===t.ref)return Kt(e,t,i)}return t.flags|=1,e=yn(s,r),e.ref=t.ref,e.return=t,t.child=e}function yp(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Mi(s,r)&&e.ref===t.ref)if(je=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(je=!0);else return t.lanes=e.lanes,Kt(e,t,i)}return Xl(e,t,n,r,i)}function vp(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(fr,Ye),Ye|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,te(fr,Ye),Ye|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,te(fr,Ye),Ye|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,te(fr,Ye),Ye|=r;return be(e,t,i,n),t.child}function wp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xl(e,t,n,r,i){var s=We(n)?Dn:Te.current;return s=Cr(t,s),vr(t,i),n=uc(e,t,n,r,s,i),r=cc(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kt(e,t,i)):(se&&r&&Gu(t),t.flags|=1,be(e,t,n,i),t.child)}function hd(e,t,n,r,i){if(We(n)){var s=!0;ya(t)}else s=!1;if(vr(t,i),t.stateNode===null)Qs(e,t),mp(t,n,r),Vl(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=We(n)?Dn:Te.current,u=Cr(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&od(t,a,r,u),rn=!1;var c=t.memoizedState;a.state=c,Ea(t,r,a,i),l=t.memoizedState,o!==r||c!==l||Ve.current||rn?(typeof f=="function"&&(Hl(t,n,f,r),l=t.memoizedState),(o=rn||ad(t,n,o,r,c,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qm(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:mt(t.type,o),a.props=u,d=t.pendingProps,c=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=lt(l):(l=We(n)?Dn:Te.current,l=Cr(t,l));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||c!==l)&&od(t,a,r,l),rn=!1,c=t.memoizedState,a.state=c,Ea(t,r,a,i);var w=t.memoizedState;o!==d||c!==w||Ve.current||rn?(typeof m=="function"&&(Hl(t,n,m,r),w=t.memoizedState),(u=rn||ad(t,n,u,r,c,w,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),r=!1)}return Ql(e,t,n,r,s,i)}function Ql(e,t,n,r,i,s){wp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&qf(t,n,!1),Kt(e,t,s);r=t.stateNode,$v.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ar(t,e.child,null,s),t.child=Ar(t,null,o,s)):be(e,t,o,s),t.memoizedState=r.state,i&&qf(t,n,!0),t.child}function _p(e){var t=e.stateNode;t.pendingContext?Gf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gf(e,t.context,!1),sc(e,t.containerInfo)}function md(e,t,n,r,i){return Nr(),Zu(i),t.flags|=256,be(e,t,n,r),t.child}var Kl={dehydrated:null,treeContext:null,retryLane:0};function Jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function xp(e,t,n){var r=t.pendingProps,i=oe.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),te(oe,i&1),e===null)return Ul(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=to(a,r,0,null),e=On(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Jl(n),t.memoizedState=Kl,e):hc(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Tv(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=yn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=yn(o,s):(s=On(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Jl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Kl,r}return s=e.child,e=s.sibling,r=yn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hc(e,t){return t=to({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ws(e,t,n,r){return r!==null&&Zu(r),Ar(t,e.child,null,n),e=hc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tv(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(T(422))),ws(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=to({mode:"visible",children:r.children},i,0,null),s=On(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ar(t,e.child,null,a),t.child.memoizedState=Jl(a),t.memoizedState=Kl,s);if(!(t.mode&1))return ws(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(T(419)),r=Qo(s,r,void 0),ws(e,t,a,r)}if(o=(a&e.childLanes)!==0,je||o){if(r=_e,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qt(e,i),Et(r,e,i,-1))}return wc(),r=Qo(Error(T(421))),ws(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Xv.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ge=hn(i.nextSibling),qe=t,se=!0,yt=null,e!==null&&(rt[it++]=jt,rt[it++]=Ht,rt[it++]=zn,jt=e.id,Ht=e.overflow,zn=t),t=hc(t,r.children),t.flags|=4096,t)}function pd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jl(e.return,t,n)}function Ko(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ep(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(be(e,t,r.children,n),r=oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,n,t);else if(e.tag===19)pd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(te(oe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Sa(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ko(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Sa(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ko(t,!0,n,null,s);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bv(e,t,n){switch(t.tag){case 3:_p(t),Nr();break;case 5:Km(t);break;case 1:We(t.type)&&ya(t);break;case 4:sc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;te(_a,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(te(oe,oe.current&1),t.flags|=128,null):n&t.child.childLanes?xp(e,t,n):(te(oe,oe.current&1),e=Kt(e,t,n),e!==null?e.sibling:null);te(oe,oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ep(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(oe,oe.current),r)break;return null;case 22:case 23:return t.lanes=0,vp(e,t,n)}return Kt(e,t,n)}var Sp,Yl,kp,Cp;Sp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yl=function(){};kp=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,In(bt.current);var s=null;switch(n){case"input":i=vl(e,i),r=vl(e,r),s=[];break;case"select":i=ue({},i,{value:void 0}),r=ue({},r,{value:void 0}),s=[];break;case"textarea":i=xl(e,i),r=xl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pa)}Sl(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Si.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Si.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ne("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Cp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jr(e,t){if(!se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ov(e,t,n){var r=t.pendingProps;switch(qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return We(t.type)&&ga(),Me(t),null;case 3:return r=t.stateNode,Rr(),re(Ve),re(Te),oc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(iu(yt),yt=null))),Yl(e,t),Me(t),null;case 5:ac(t);var i=In(Oi.current);if(n=t.type,e!==null&&t.stateNode!=null)kp(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return Me(t),null}if(e=In(bt.current),ys(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[It]=t,r[Ti]=s,e=(t.mode&1)!==0,n){case"dialog":ne("cancel",r),ne("close",r);break;case"iframe":case"object":case"embed":ne("load",r);break;case"video":case"audio":for(i=0;i<ti.length;i++)ne(ti[i],r);break;case"source":ne("error",r);break;case"img":case"image":case"link":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"input":kf(r,s),ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ne("invalid",r);break;case"textarea":Nf(r,s),ne("invalid",r)}Sl(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&gs(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&gs(r.textContent,o,e),i=["children",""+o]):Si.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ne("scroll",r)}switch(n){case"input":ls(r),Cf(r,s,!0);break;case"textarea":ls(r),Af(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=pa)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[It]=t,e[Ti]=r,Sp(e,t,!1,!1),t.stateNode=e;e:{switch(a=kl(n,r),n){case"dialog":ne("cancel",e),ne("close",e),i=r;break;case"iframe":case"object":case"embed":ne("load",e),i=r;break;case"video":case"audio":for(i=0;i<ti.length;i++)ne(ti[i],e);i=r;break;case"source":ne("error",e),i=r;break;case"img":case"image":case"link":ne("error",e),ne("load",e),i=r;break;case"details":ne("toggle",e),i=r;break;case"input":kf(e,r),i=vl(e,r),ne("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ue({},r,{value:void 0}),ne("invalid",e);break;case"textarea":Nf(e,r),i=xl(e,r),ne("invalid",e);break;default:i=r}Sl(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?nm(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&em(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ki(e,l):typeof l=="number"&&ki(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Si.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ne("scroll",e):l!=null&&Lu(e,s,l,a))}switch(n){case"input":ls(e),Cf(e,r,!1);break;case"textarea":ls(e),Af(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?mr(e,!!r.multiple,s,!1):r.defaultValue!=null&&mr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Cp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=In(Oi.current),In(bt.current),ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[It]=t,(s=r.nodeValue!==n)&&(e=qe,e!==null))switch(e.tag){case 3:gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=t,t.stateNode=r}return Me(t),null;case 13:if(re(oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(se&&Ge!==null&&t.mode&1&&!(t.flags&128))Hm(),Nr(),t.flags|=98560,s=!1;else if(s=ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(T(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[It]=t}else Nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),s=!1}else yt!==null&&(iu(yt),yt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?ye===0&&(ye=3):wc())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return Rr(),Yl(e,t),e===null&&Ii(t.stateNode.containerInfo),Me(t),null;case 10:return nc(t.type._context),Me(t),null;case 17:return We(t.type)&&ga(),Me(t),null;case 19:if(re(oe),s=t.memoizedState,s===null)return Me(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Jr(s,!1);else{if(ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Sa(e),a!==null){for(t.flags|=128,Jr(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return te(oe,oe.current&1|2),t.child}e=e.sibling}s.tail!==null&&de()>Mr&&(t.flags|=128,r=!0,Jr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Sa(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!se)return Me(t),null}else 2*de()-s.renderingStartTime>Mr&&n!==1073741824&&(t.flags|=128,r=!0,Jr(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=de(),t.sibling=null,n=oe.current,te(oe,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return vc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ye&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Fv(e,t){switch(qu(t),t.tag){case 1:return We(t.type)&&ga(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rr(),re(Ve),re(Te),oc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(re(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(oe),null;case 4:return Rr(),null;case 10:return nc(t.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var _s=!1,$e=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,D=null;function cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(e,t,r)}else n.current=null}function Gl(e,t,n){try{n()}catch(r){ce(e,t,r)}}var gd=!1;function Dv(e,t){if(bl=da,e=Mm(),Yu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,f=0,d=e,c=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)c=d,d=m;for(;;){if(d===e)break t;if(c===n&&++u===i&&(o=a),c===s&&++f===r&&(l=a),(m=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ol={focusedElem:e,selectionRange:n},da=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,x=w.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:mt(t.type,v),x);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(g){ce(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return w=gd,gd=!1,w}function vi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gl(t,n,s)}i=i.next}while(i!==r)}}function Za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ql(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Np(e){var t=e.alternate;t!==null&&(e.alternate=null,Np(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[Ti],delete t[Dl],delete t[_v],delete t[xv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ap(e){return e.tag===5||e.tag===3||e.tag===4}function yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ap(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pa));else if(r!==4&&(e=e.child,e!==null))for(Zl(e,t,n),e=e.sibling;e!==null;)Zl(e,t,n),e=e.sibling}function eu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(eu(e,t,n),e=e.sibling;e!==null;)eu(e,t,n),e=e.sibling}var Ee=null,gt=!1;function qt(e,t,n){for(n=n.child;n!==null;)Rp(e,t,n),n=n.sibling}function Rp(e,t,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Wa,n)}catch{}switch(n.tag){case 5:$e||cr(n,t);case 6:var r=Ee,i=gt;Ee=null,qt(e,t,n),Ee=r,gt=i,Ee!==null&&(gt?(e=Ee,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(gt?(e=Ee,n=n.stateNode,e.nodeType===8?Uo(e.parentNode,n):e.nodeType===1&&Uo(e,n),Ri(e)):Uo(Ee,n.stateNode));break;case 4:r=Ee,i=gt,Ee=n.stateNode.containerInfo,gt=!0,qt(e,t,n),Ee=r,gt=i;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Gl(n,t,a),i=i.next}while(i!==r)}qt(e,t,n);break;case 1:if(!$e&&(cr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ce(n,t,o)}qt(e,t,n);break;case 21:qt(e,t,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,qt(e,t,n),$e=r):qt(e,t,n);break;default:qt(e,t,n)}}function vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lv),t.forEach(function(r){var i=Qv.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,gt=!1;break e;case 3:Ee=o.stateNode.containerInfo,gt=!0;break e;case 4:Ee=o.stateNode.containerInfo,gt=!0;break e}o=o.return}if(Ee===null)throw Error(T(160));Rp(s,a,i),Ee=null,gt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ce(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pp(t,e),t=t.sibling}function Pp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),Ct(e),r&4){try{vi(3,e,e.return),Za(3,e)}catch(v){ce(e,e.return,v)}try{vi(5,e,e.return)}catch(v){ce(e,e.return,v)}}break;case 1:dt(t,e),Ct(e),r&512&&n!==null&&cr(n,n.return);break;case 5:if(dt(t,e),Ct(e),r&512&&n!==null&&cr(n,n.return),e.flags&32){var i=e.stateNode;try{ki(i,"")}catch(v){ce(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Gh(i,s),kl(o,a);var u=kl(o,s);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?nm(i,d):f==="dangerouslySetInnerHTML"?em(i,d):f==="children"?ki(i,d):Lu(i,f,d,u)}switch(o){case"input":wl(i,s);break;case"textarea":qh(i,s);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?mr(i,!!s.multiple,m,!1):c!==!!s.multiple&&(s.defaultValue!=null?mr(i,!!s.multiple,s.defaultValue,!0):mr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ti]=s}catch(v){ce(e,e.return,v)}}break;case 6:if(dt(t,e),Ct(e),r&4){if(e.stateNode===null)throw Error(T(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){ce(e,e.return,v)}}break;case 3:if(dt(t,e),Ct(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(v){ce(e,e.return,v)}break;case 4:dt(t,e),Ct(e);break;case 13:dt(t,e),Ct(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gc=de())),r&4&&vd(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?($e=(u=$e)||f,dt(t,e),$e=u):dt(t,e),Ct(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(D=e,f=e.child;f!==null;){for(d=D=f;D!==null;){switch(c=D,m=c.child,c.tag){case 0:case 11:case 14:case 15:vi(4,c,c.return);break;case 1:cr(c,c.return);var w=c.stateNode;if(typeof w.componentWillUnmount=="function"){r=c,n=c.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){ce(r,n,v)}}break;case 5:cr(c,c.return);break;case 22:if(c.memoizedState!==null){_d(d);continue}}m!==null?(m.return=c,D=m):_d(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=tm("display",a))}catch(v){ce(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){ce(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dt(t,e),Ct(e),r&4&&vd(e);break;case 21:break;default:dt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ap(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ki(i,""),r.flags&=-33);var s=yd(e);eu(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=yd(e);Zl(e,o,a);break;default:throw Error(T(161))}}catch(l){ce(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zv(e,t,n){D=e,Mp(e)}function Mp(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var i=D,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||_s;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||$e;o=_s;var u=$e;if(_s=a,($e=l)&&!u)for(D=i;D!==null;)a=D,l=a.child,a.tag===22&&a.memoizedState!==null?xd(i):l!==null?(l.return=a,D=l):xd(i);for(;s!==null;)D=s,Mp(s),s=s.sibling;D=i,_s=o,$e=u}wd(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,D=s):wd(e)}}function wd(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||Za(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$e)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&rd(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rd(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ri(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}$e||t.flags&512&&ql(t)}catch(c){ce(t,t.return,c)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function _d(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function xd(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Za(4,t)}catch(l){ce(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ce(t,i,l)}}var s=t.return;try{ql(t)}catch(l){ce(t,s,l)}break;case 5:var a=t.return;try{ql(t)}catch(l){ce(t,a,l)}}}catch(l){ce(t,t.return,l)}if(t===e){D=null;break}var o=t.sibling;if(o!==null){o.return=t.return,D=o;break}D=t.return}}var Bv=Math.ceil,Na=Yt.ReactCurrentDispatcher,mc=Yt.ReactCurrentOwner,ot=Yt.ReactCurrentBatchConfig,Y=0,_e=null,he=null,ke=0,Ye=0,fr=En(0),ye=0,zi=null,Un=0,eo=0,pc=0,wi=null,Ue=null,gc=0,Mr=1/0,Bt=null,Aa=!1,tu=null,pn=null,xs=!1,ln=null,Ra=0,_i=0,nu=null,Ks=-1,Js=0;function Fe(){return Y&6?de():Ks!==-1?Ks:Ks=de()}function gn(e){return e.mode&1?Y&2&&ke!==0?ke&-ke:Sv.transition!==null?(Js===0&&(Js=mm()),Js):(e=q,e!==0||(e=window.event,e=e===void 0?16:xm(e.type)),e):1}function Et(e,t,n,r){if(50<_i)throw _i=0,nu=null,Error(T(185));Qi(e,n,r),(!(Y&2)||e!==_e)&&(e===_e&&(!(Y&2)&&(eo|=n),ye===4&&an(e,ke)),Xe(e,r),n===1&&Y===0&&!(t.mode&1)&&(Mr=de()+500,Ya&&Sn()))}function Xe(e,t){var n=e.callbackNode;S0(e,t);var r=fa(e,e===_e?ke:0);if(r===0)n!==null&&Mf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mf(n),t===1)e.tag===0?Ev(Ed.bind(null,e)):Bm(Ed.bind(null,e)),vv(function(){!(Y&6)&&Sn()}),n=null;else{switch(pm(r)){case 1:n=ju;break;case 4:n=dm;break;case 16:n=ca;break;case 536870912:n=hm;break;default:n=ca}n=Dp(n,Ip.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ip(e,t){if(Ks=-1,Js=0,Y&6)throw Error(T(327));var n=e.callbackNode;if(wr()&&e.callbackNode!==n)return null;var r=fa(e,e===_e?ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pa(e,r);else{t=r;var i=Y;Y|=2;var s=Tp();(_e!==e||ke!==t)&&(Bt=null,Mr=de()+500,bn(e,t));do try{Hv();break}catch(o){$p(e,o)}while(1);tc(),Na.current=s,Y=i,he!==null?t=0:(_e=null,ke=0,t=ye)}if(t!==0){if(t===2&&(i=Pl(e),i!==0&&(r=i,t=ru(e,i))),t===1)throw n=zi,bn(e,0),an(e,r),Xe(e,de()),n;if(t===6)an(e,r);else{if(i=e.current.alternate,!(r&30)&&!Uv(i)&&(t=Pa(e,r),t===2&&(s=Pl(e),s!==0&&(r=s,t=ru(e,s))),t===1))throw n=zi,bn(e,0),an(e,r),Xe(e,de()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:An(e,Ue,Bt);break;case 3:if(an(e,r),(r&130023424)===r&&(t=gc+500-de(),10<t)){if(fa(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ll(An.bind(null,e,Ue,Bt),t);break}An(e,Ue,Bt);break;case 4:if(an(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-xt(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bv(r/1960))-r,10<r){e.timeoutHandle=Ll(An.bind(null,e,Ue,Bt),r);break}An(e,Ue,Bt);break;case 5:An(e,Ue,Bt);break;default:throw Error(T(329))}}}return Xe(e,de()),e.callbackNode===n?Ip.bind(null,e):null}function ru(e,t){var n=wi;return e.current.memoizedState.isDehydrated&&(bn(e,t).flags|=256),e=Pa(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&iu(t)),e}function iu(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function Uv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!St(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function an(e,t){for(t&=~pc,t&=~eo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Ed(e){if(Y&6)throw Error(T(327));wr();var t=fa(e,0);if(!(t&1))return Xe(e,de()),null;var n=Pa(e,t);if(e.tag!==0&&n===2){var r=Pl(e);r!==0&&(t=r,n=ru(e,r))}if(n===1)throw n=zi,bn(e,0),an(e,t),Xe(e,de()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,Ue,Bt),Xe(e,de()),null}function yc(e,t){var n=Y;Y|=1;try{return e(t)}finally{Y=n,Y===0&&(Mr=de()+500,Ya&&Sn())}}function jn(e){ln!==null&&ln.tag===0&&!(Y&6)&&wr();var t=Y;Y|=1;var n=ot.transition,r=q;try{if(ot.transition=null,q=1,e)return e()}finally{q=r,ot.transition=n,Y=t,!(Y&6)&&Sn()}}function vc(){Ye=fr.current,re(fr)}function bn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yv(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(qu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ga();break;case 3:Rr(),re(Ve),re(Te),oc();break;case 5:ac(r);break;case 4:Rr();break;case 13:re(oe);break;case 19:re(oe);break;case 10:nc(r.type._context);break;case 22:case 23:vc()}n=n.return}if(_e=e,he=e=yn(e.current,null),ke=Ye=t,ye=0,zi=null,pc=eo=Un=0,Ue=wi=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Mn=null}return e}function $p(e,t){do{var n=he;try{if(tc(),Ws.current=Ca,ka){for(var r=le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ka=!1}if(Bn=0,we=ge=le=null,yi=!1,Fi=0,mc.current=null,n===null||n.return===null){ye=1,zi=t,he=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=ke,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var c=f.alternate;c?(f.updateQueue=c.updateQueue,f.memoizedState=c.memoizedState,f.lanes=c.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=ud(a);if(m!==null){m.flags&=-257,cd(m,a,o,s,t),m.mode&1&&ld(s,u,t),t=m,l=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(l),t.updateQueue=v}else w.add(l);break e}else{if(!(t&1)){ld(s,u,t),wc();break e}l=Error(T(426))}}else if(se&&o.mode&1){var x=ud(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cd(x,a,o,s,t),Zu(Pr(l,o));break e}}s=l=Pr(l,o),ye!==4&&(ye=2),wi===null?wi=[s]:wi.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=pp(s,l,t);nd(s,p);break e;case 1:o=l;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pn===null||!pn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var g=gp(s,o,t);nd(s,g);break e}}s=s.return}while(s!==null)}Op(n)}catch(E){t=E,he===n&&n!==null&&(he=n=n.return);continue}break}while(1)}function Tp(){var e=Na.current;return Na.current=Ca,e===null?Ca:e}function wc(){(ye===0||ye===3||ye===2)&&(ye=4),_e===null||!(Un&268435455)&&!(eo&268435455)||an(_e,ke)}function Pa(e,t){var n=Y;Y|=2;var r=Tp();(_e!==e||ke!==t)&&(Bt=null,bn(e,t));do try{jv();break}catch(i){$p(e,i)}while(1);if(tc(),Y=n,Na.current=r,he!==null)throw Error(T(261));return _e=null,ke=0,ye}function jv(){for(;he!==null;)bp(he)}function Hv(){for(;he!==null&&!m0();)bp(he)}function bp(e){var t=Lp(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,t===null?Op(e):he=t,mc.current=null}function Op(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fv(n,t),n!==null){n.flags&=32767,he=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ye=6,he=null;return}}else if(n=Ov(n,t,Ye),n!==null){he=n;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ye===0&&(ye=5)}function An(e,t,n){var r=q,i=ot.transition;try{ot.transition=null,q=1,Vv(e,t,n,r)}finally{ot.transition=i,q=r}return null}function Vv(e,t,n,r){do wr();while(ln!==null);if(Y&6)throw Error(T(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(k0(e,s),e===_e&&(he=_e=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xs||(xs=!0,Dp(ca,function(){return wr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ot.transition,ot.transition=null;var a=q;q=1;var o=Y;Y|=4,mc.current=null,Dv(e,n),Pp(n,e),cv(Ol),da=!!bl,Ol=bl=null,e.current=n,zv(n),p0(),Y=o,q=a,ot.transition=s}else e.current=n;if(xs&&(xs=!1,ln=e,Ra=i),s=e.pendingLanes,s===0&&(pn=null),v0(n.stateNode),Xe(e,de()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Aa)throw Aa=!1,e=tu,tu=null,e;return Ra&1&&e.tag!==0&&wr(),s=e.pendingLanes,s&1?e===nu?_i++:(_i=0,nu=e):_i=0,Sn(),null}function wr(){if(ln!==null){var e=pm(Ra),t=ot.transition,n=q;try{if(ot.transition=null,q=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,Ra=0,Y&6)throw Error(T(331));var i=Y;for(Y|=4,D=e.current;D!==null;){var s=D,a=s.child;if(D.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(D=u;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:vi(8,f,s)}var d=f.child;if(d!==null)d.return=f,D=d;else for(;D!==null;){f=D;var c=f.sibling,m=f.return;if(Np(f),f===u){D=null;break}if(c!==null){c.return=m,D=c;break}D=m}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}D=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,D=a;else e:for(;D!==null;){if(s=D,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,D=p;break e}D=s.return}}var h=e.current;for(D=h;D!==null;){a=D;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,D=y;else e:for(a=h;D!==null;){if(o=D,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Za(9,o)}}catch(E){ce(o,o.return,E)}if(o===a){D=null;break e}var g=o.sibling;if(g!==null){g.return=o.return,D=g;break e}D=o.return}}if(Y=i,Sn(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Wa,e)}catch{}r=!0}return r}finally{q=n,ot.transition=t}}return!1}function Sd(e,t,n){t=Pr(n,t),t=pp(e,t,1),e=mn(e,t,1),t=Fe(),e!==null&&(Qi(e,1,t),Xe(e,t))}function ce(e,t,n){if(e.tag===3)Sd(e,e,n);else for(;t!==null;){if(t.tag===3){Sd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=Pr(n,e),e=gp(t,e,1),t=mn(t,e,1),e=Fe(),t!==null&&(Qi(t,1,e),Xe(t,e));break}}t=t.return}}function Wv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(ke&n)===n&&(ye===4||ye===3&&(ke&130023424)===ke&&500>de()-gc?bn(e,0):pc|=n),Xe(e,t)}function Fp(e,t){t===0&&(e.mode&1?(t=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):t=1);var n=Fe();e=Qt(e,t),e!==null&&(Qi(e,t,n),Xe(e,n))}function Xv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fp(e,n)}function Qv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),Fp(e,n)}var Lp;Lp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ve.current)je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return je=!1,bv(e,t,n);je=!!(e.flags&131072)}else je=!1,se&&t.flags&1048576&&Um(t,wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qs(e,t),e=t.pendingProps;var i=Cr(t,Te.current);vr(t,n),i=uc(null,t,r,e,i,n);var s=cc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(r)?(s=!0,ya(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ic(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Vl(t,r,e,n),t=Ql(null,t,r,!0,s,n)):(t.tag=0,se&&s&&Gu(t),be(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Jv(r),e=mt(r,e),i){case 0:t=Xl(null,t,r,e,n);break e;case 1:t=hd(null,t,r,e,n);break e;case 11:t=fd(null,t,r,e,n);break e;case 14:t=dd(null,t,r,mt(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mt(r,i),Xl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mt(r,i),hd(e,t,r,i,n);case 3:e:{if(_p(t),e===null)throw Error(T(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Qm(e,t),Ea(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Pr(Error(T(423)),t),t=md(e,t,r,n,i);break e}else if(r!==i){i=Pr(Error(T(424)),t),t=md(e,t,r,n,i);break e}else for(Ge=hn(t.stateNode.containerInfo.firstChild),qe=t,se=!0,yt=null,n=Wm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nr(),r===i){t=Kt(e,t,n);break e}be(e,t,r,n)}t=t.child}return t;case 5:return Km(t),e===null&&Ul(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Fl(r,i)?a=null:s!==null&&Fl(r,s)&&(t.flags|=32),wp(e,t),be(e,t,a,n),t.child;case 6:return e===null&&Ul(t),null;case 13:return xp(e,t,n);case 4:return sc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ar(t,null,r,n):be(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mt(r,i),fd(e,t,r,i,n);case 7:return be(e,t,t.pendingProps,n),t.child;case 8:return be(e,t,t.pendingProps.children,n),t.child;case 12:return be(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,te(_a,r._currentValue),r._currentValue=a,s!==null)if(St(s.value,a)){if(s.children===i.children&&!Ve.current){t=Kt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Vt(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jl(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(T(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),jl(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}be(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,vr(t,n),i=lt(i),r=r(i),t.flags|=1,be(e,t,r,n),t.child;case 14:return r=t.type,i=mt(r,t.pendingProps),i=mt(r.type,i),dd(e,t,r,i,n);case 15:return yp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mt(r,i),Qs(e,t),t.tag=1,We(r)?(e=!0,ya(t)):e=!1,vr(t,n),mp(t,r,i),Vl(t,r,i,n),Ql(null,t,r,!0,e,n);case 19:return Ep(e,t,n);case 22:return vp(e,t,n)}throw Error(T(156,t.tag))};function Dp(e,t){return fm(e,t)}function Kv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,n,r){return new Kv(e,t,n,r)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jv(e){if(typeof e=="function")return _c(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zu)return 11;if(e===Bu)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=st(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")_c(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case tr:return On(n.children,i,s,t);case Du:a=8,i|=8;break;case ml:return e=st(12,n,t,i|2),e.elementType=ml,e.lanes=s,e;case pl:return e=st(13,n,t,i),e.elementType=pl,e.lanes=s,e;case gl:return e=st(19,n,t,i),e.elementType=gl,e.lanes=s,e;case Kh:return to(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xh:a=10;break e;case Qh:a=9;break e;case zu:a=11;break e;case Bu:a=14;break e;case nn:a=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=st(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function On(e,t,n,r){return e=st(7,e,r,t),e.lanes=n,e}function to(e,t,n,r){return e=st(22,e,r,t),e.elementType=Kh,e.lanes=n,e.stateNode={isHidden:!1},e}function Jo(e,t,n){return e=st(6,e,null,t),e.lanes=n,e}function Yo(e,t,n){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yv(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xc(e,t,n,r,i,s,a,o,l){return e=new Yv(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=st(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(s),e}function Gv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zp(e){if(!e)return _n;e=e._reactInternals;e:{if(Xn(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(We(n))return zm(e,n,t)}return t}function Bp(e,t,n,r,i,s,a,o,l){return e=xc(n,r,!0,e,i,s,a,o,l),e.context=zp(null),n=e.current,r=Fe(),i=gn(n),s=Vt(r,i),s.callback=t??null,mn(n,s,i),e.current.lanes=i,Qi(e,i,r),Xe(e,r),e}function no(e,t,n,r){var i=t.current,s=Fe(),a=gn(i);return n=zp(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mn(i,t,a),e!==null&&(Et(e,i,a,s),Vs(e,i,a)),a}function Ma(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ec(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function qv(){return null}var Up=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sc(e){this._internalRoot=e}ro.prototype.render=Sc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));no(e,t,null,null)};ro.prototype.unmount=Sc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jn(function(){no(null,e,null,null)}),t[Xt]=null}};function ro(e){this._internalRoot=e}ro.prototype.unstable_scheduleHydration=function(e){if(e){var t=vm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&_m(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function Zv(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ma(a);s.call(u)}}var a=Bp(t,r,e,0,null,!1,!1,"",Cd);return e._reactRootContainer=a,e[Xt]=a.current,Ii(e.nodeType===8?e.parentNode:e),jn(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Ma(l);o.call(u)}}var l=xc(e,0,!1,null,null,!1,!1,"",Cd);return e._reactRootContainer=l,e[Xt]=l.current,Ii(e.nodeType===8?e.parentNode:e),jn(function(){no(t,l,n,r)}),l}function so(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Ma(a);o.call(l)}}no(t,a,e,i)}else a=Zv(n,t,e,i,r);return Ma(a)}gm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ei(t.pendingLanes);n!==0&&(Hu(t,n|1),Xe(t,de()),!(Y&6)&&(Mr=de()+500,Sn()))}break;case 13:jn(function(){var r=Qt(e,1);if(r!==null){var i=Fe();Et(r,e,1,i)}}),Ec(e,1)}};Vu=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var n=Fe();Et(t,e,134217728,n)}Ec(e,134217728)}};ym=function(e){if(e.tag===13){var t=gn(e),n=Qt(e,t);if(n!==null){var r=Fe();Et(n,e,t,r)}Ec(e,t)}};vm=function(){return q};wm=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};Nl=function(e,t,n){switch(t){case"input":if(wl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ja(r);if(!i)throw Error(T(90));Yh(r),wl(r,i)}}}break;case"textarea":qh(e,n);break;case"select":t=n.value,t!=null&&mr(e,!!n.multiple,t,!1)}};sm=yc;am=jn;var ew={usingClientEntryPoint:!1,Events:[Ji,sr,Ja,rm,im,yc]},Yr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tw={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=um(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Es.isDisabled&&Es.supportsFiber)try{Wa=Es.inject(tw),Tt=Es}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(T(200));return Gv(e,t,null,n)};tt.createRoot=function(e,t){if(!kc(e))throw Error(T(299));var n=!1,r="",i=Up;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xc(e,1,!1,null,null,n,!1,r,i),e[Xt]=t.current,Ii(e.nodeType===8?e.parentNode:e),new Sc(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=um(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return jn(e)};tt.hydrate=function(e,t,n){if(!io(t))throw Error(T(200));return so(null,e,t,!0,n)};tt.hydrateRoot=function(e,t,n){if(!kc(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Up;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Bp(t,null,e,1,n??null,i,!1,s,a),e[Xt]=t.current,Ii(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ro(t)};tt.render=function(e,t,n){if(!io(t))throw Error(T(200));return so(null,e,t,!1,n)};tt.unmountComponentAtNode=function(e){if(!io(e))throw Error(T(40));return e._reactRootContainer?(jn(function(){so(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1};tt.unstable_batchedUpdates=yc;tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!io(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return so(e,t,n,!1,r)};tt.version="18.3.1-next-f1338f8080-20240426";function jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jp)}catch(e){console.error(e)}}jp(),jh.exports=tt;var nw=jh.exports,Nd=nw;dl.createRoot=Nd.createRoot,dl.hydrateRoot=Nd.hydrateRoot;let Ss;const rw=new Uint8Array(16);function iw(){if(!Ss&&(Ss=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ss))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ss(rw)}const xe=[];for(let e=0;e<256;++e)xe.push((e+256).toString(16).slice(1));function sw(e,t=0){return xe[e[t+0]]+xe[e[t+1]]+xe[e[t+2]]+xe[e[t+3]]+"-"+xe[e[t+4]]+xe[e[t+5]]+"-"+xe[e[t+6]]+xe[e[t+7]]+"-"+xe[e[t+8]]+xe[e[t+9]]+"-"+xe[e[t+10]]+xe[e[t+11]]+xe[e[t+12]]+xe[e[t+13]]+xe[e[t+14]]+xe[e[t+15]]}const aw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ad={randomUUID:aw};function ks(e,t,n){if(Ad.randomUUID&&!t&&!e)return Ad.randomUUID();e=e||{};const r=e.random||(e.rng||iw)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return sw(r)}const su="RFC3986",au={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},ow="RFC1738",lw=Array.isArray,Nt=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Go=1024,uw=(e,t,n,r,i)=>{if(e.length===0)return e;let s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<s.length;o+=Go){const l=s.length>=Go?s.slice(o,o+Go):s,u=[];for(let f=0;f<l.length;++f){let d=l.charCodeAt(f);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===ow&&(d===40||d===41)){u[u.length]=l.charAt(f);continue}if(d<128){u[u.length]=Nt[d];continue}if(d<2048){u[u.length]=Nt[192|d>>6]+Nt[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Nt[224|d>>12]+Nt[128|d>>6&63]+Nt[128|d&63];continue}f+=1,d=65536+((d&1023)<<10|l.charCodeAt(f)&1023),u[u.length]=Nt[240|d>>18]+Nt[128|d>>12&63]+Nt[128|d>>6&63]+Nt[128|d&63]}a+=u.join("")}return a};function cw(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Rd(e,t){if(lw(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const fw=Object.prototype.hasOwnProperty,Hp={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},Rt=Array.isArray,dw=Array.prototype.push,Vp=function(e,t){dw.apply(e,Rt(t)?t:[t])},hw=Date.prototype.toISOString,pe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:uw,encodeValuesOnly:!1,format:su,formatter:au[su],indices:!1,serializeDate(e){return hw.call(e)},skipNulls:!1,strictNullHandling:!1};function mw(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const qo={};function Wp(e,t,n,r,i,s,a,o,l,u,f,d,c,m,w,v,x,p){let h=e,y=p,g=0,E=!1;for(;(y=y.get(qo))!==void 0&&!E;){const k=y.get(e);if(g+=1,typeof k<"u"){if(k===g)throw new RangeError("Cyclic object value");E=!0}typeof y.get(qo)>"u"&&(g=0)}if(typeof u=="function"?h=u(t,h):h instanceof Date?h=c==null?void 0:c(h):n==="comma"&&Rt(h)&&(h=Rd(h,function(k){return k instanceof Date?c==null?void 0:c(k):k})),h===null){if(s)return l&&!v?l(t,pe.encoder,x,"key",m):t;h=""}if(mw(h)||cw(h)){if(l){const k=v?t:l(t,pe.encoder,x,"key",m);return[(w==null?void 0:w(k))+"="+(w==null?void 0:w(l(h,pe.encoder,x,"value",m)))]}return[(w==null?void 0:w(t))+"="+(w==null?void 0:w(String(h)))]}const C=[];if(typeof h>"u")return C;let A;if(n==="comma"&&Rt(h))v&&l&&(h=Rd(h,l)),A=[{value:h.length>0?h.join(",")||null:void 0}];else if(Rt(u))A=u;else{const k=Object.keys(h);A=f?k.sort(f):k}const S=o?String(t).replace(/\./g,"%2E"):String(t),$=r&&Rt(h)&&h.length===1?S+"[]":S;if(i&&Rt(h)&&h.length===0)return $+"[]";for(let k=0;k<A.length;++k){const N=A[k],z=typeof N=="object"&&typeof N.value<"u"?N.value:h[N];if(a&&z===null)continue;const B=d&&o?N.replace(/\./g,"%2E"):N,G=Rt(h)?typeof n=="function"?n($,B):$:$+(d?"."+B:"["+B+"]");p.set(e,g);const ie=new WeakMap;ie.set(qo,p),Vp(C,Wp(z,G,n,r,i,s,a,o,n==="comma"&&v&&Rt(h)?null:l,u,f,d,c,m,w,v,x,ie))}return C}function pw(e=pe){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||pe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=su;if(typeof e.format<"u"){if(!fw.call(au,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=au[n];let i=pe.filter;(typeof e.filter=="function"||Rt(e.filter))&&(i=e.filter);let s;if(e.arrayFormat&&e.arrayFormat in Hp?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=pe.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:pe.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:pe.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pe.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pe.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?pe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:pe.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:pe.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:pe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:pe.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:pe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:pe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pe.strictNullHandling}}function gw(e,t={}){let n=e;const r=pw(t);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Rt(r.filter)&&(s=r.filter,i=s);const a=[];if(typeof n!="object"||n===null)return"";const o=Hp[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let c=0;c<i.length;++c){const m=i[c];r.skipNulls&&n[m]===null||Vp(a,Wp(n[m],m,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const f=a.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),f.length>0?d+f:""}const qn="4.96.0";let Pd=!1,xi,Xp,Qp,ou,Kp,Jp,Yp,Gp,qp;function yw(e,t={auto:!1}){if(Pd)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(xi)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${xi}'\``);Pd=t.auto,xi=e.kind,Xp=e.fetch,e.Request,e.Response,e.Headers,Qp=e.FormData,e.Blob,ou=e.File,Kp=e.ReadableStream,Jp=e.getMultipartRequestOptions,Yp=e.getDefaultAgent,Gp=e.fileFromPath,qp=e.isFsReadStream}class vw{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function ww({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new vw(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}const Zp=()=>{xi||yw(ww(),{auto:!0})};Zp();class V extends Error{}class Ne extends V{constructor(t,n,r,i){super(`${Ne.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new ao({message:r,cause:uu(n)});const s=n==null?void 0:n.error;return t===400?new eg(t,s,r,i):t===401?new tg(t,s,r,i):t===403?new ng(t,s,r,i):t===404?new rg(t,s,r,i):t===409?new ig(t,s,r,i):t===422?new sg(t,s,r,i):t===429?new ag(t,s,r,i):t>=500?new og(t,s,r,i):new Ne(t,s,r,i)}}class at extends Ne{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class ao extends Ne{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Cc extends ao{constructor({message:t}={}){super({message:t??"Request timed out."})}}class eg extends Ne{}class tg extends Ne{}class ng extends Ne{}class rg extends Ne{}class ig extends Ne{}class sg extends Ne{}class ag extends Ne{}class og extends Ne{}class lg extends V{constructor(){super("Could not parse response content as the length limit was reached")}}class ug extends V{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Cs=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Cn=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Ke;class oo{constructor(){Ke.set(this,void 0),this.buffer=new Uint8Array,Cs(this,Ke,null,"f")}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let s;for(;(s=_w(this.buffer,Cn(this,Ke,"f")))!=null;){if(s.carriage&&Cn(this,Ke,"f")==null){Cs(this,Ke,s.index,"f");continue}if(Cn(this,Ke,"f")!=null&&(s.index!==Cn(this,Ke,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,Cn(this,Ke,"f")-1))),this.buffer=this.buffer.slice(Cn(this,Ke,"f")),Cs(this,Ke,null,"f");continue}const a=Cn(this,Ke,"f")!==null?s.preceding-1:s.preceding,o=this.decodeText(this.buffer.slice(0,a));i.push(o),this.buffer=this.buffer.slice(s.index),Cs(this,Ke,null,"f")}return i}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new V(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new V(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new V("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ke=new WeakMap;oo.NEWLINE_CHARS=new Set([`
`,"\r"]);oo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _w(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function xw(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}function cg(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class $t{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of Ew(t,n))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new Ne(void 0,o.error,void 0,yg(t.headers));yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new Ne(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new $t(i,n)}static fromReadableStream(t,n){let r=!1;async function*i(){const a=new oo,o=cg(t);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new $t(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();t.push(a),n.push(a)}return s.shift()}});return[new $t(()=>i(t),this.controller),new $t(()=>i(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new Kp({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const o=r.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}async function*Ew(e,t){if(!e.body)throw t.abort(),new V("Attempted to iterate over a response with no body");const n=new kw,r=new oo,i=cg(e.body);for await(const s of Sw(i))for(const a of r.decode(s)){const o=n.decode(a);o&&(yield o)}for(const s of r.flush()){const a=n.decode(s);a&&(yield a)}}async function*Sw(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),t=i;let s;for(;(s=xw(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}class kw{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=Cw(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Cw(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}const fg=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",dg=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&lo(e),lo=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Nw=e=>dg(e)||fg(e)||qp(e);async function hg(e,t,n){var i;if(e=await e,dg(e))return e;if(fg(e)){const s=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=lo(s)?[await s.arrayBuffer()]:[s];return new ou(a,t,n)}const r=await Aw(e);if(t||(t=Pw(e)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new ou(r,t,n)}async function Aw(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(lo(e))t.push(await e.arrayBuffer());else if(Mw(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${Rw(e)}`);return t}function Rw(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function Pw(e){var t;return Zo(e.name)||Zo(e.filename)||((t=Zo(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Zo=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},Mw=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",Md=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Ir=async e=>{const t=await Iw(e.body);return Jp(t,e)},Iw=async e=>{const t=new Qp;return await Promise.all(Object.entries(e||{}).map(([n,r])=>lu(t,n,r))),t},lu=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(Nw(n)){const r=await hg(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>lu(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>lu(e,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var $w=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Tw=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Ns;Zp();async function mg(e){var a;const{response:t}=e;if(e.options.stream)return vn("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):$t.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=(a=n==null?void 0:n.split(";")[0])==null?void 0:a.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const o=await t.json();return vn("response",t.status,t.url,t.headers,o),pg(o,t)}const s=await t.text();return vn("response",t.status,t.url,t.headers,s),s}function pg(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class uo extends Promise{constructor(t,n=mg){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new uo(this.responsePromise,async n=>pg(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class bw{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=t,this.maxRetries=el("maxRetries",n),this.timeout=el("timeout",r),this.httpAgent=i,this.fetch=s??Xp}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...zw(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Hw()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&lo(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:t,path:n,...i,body:s}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var v;const r={...t},{method:i,path:s,query:a,headers:o={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Md(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,u=this.calculateContentLength(l),f=this.buildURL(s,a);"timeout"in r&&el("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??Yp(f),c=r.timeout+1e3;typeof((v=d==null?void 0:d.options)==null?void 0:v.timeout)=="number"&&c>(d.options.timeout??0)&&(d.options.timeout=c),this.idempotencyHeader&&i!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const m=this.buildHeaders({options:r,headers:o,contentLength:u,retryCount:n});return{req:{method:i,...l&&{body:l},headers:m,...d&&{agent:d},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const a=this.defaultHeaders(t);return bd(s,a),bd(s,n),Md(t.body)&&xi!=="node"&&delete s["content-type"],Rs(a,"x-stainless-retry-count")===void 0&&Rs(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),Rs(a,"x-stainless-timeout")===void 0&&Rs(n,"x-stainless-timeout")===void 0&&t.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(t.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,i){return Ne.generate(t,n,r,i)}request(t,n=null){return new uo(this.makeRequest(t,n))}async makeRequest(t,n){var d,c;const r=await t,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:a,timeout:o}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:a,options:r}),vn("request",a,r,s.headers),(d=r.signal)!=null&&d.aborted)throw new at;const l=new AbortController,u=await this.fetchWithTimeout(a,s,o,l).catch(uu);if(u instanceof Error){if((c=r.signal)!=null&&c.aborted)throw new at;if(n)return this.retryRequest(r,n);throw u.name==="AbortError"?new Cc:new ao({cause:u})}const f=yg(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){const h=`retrying, ${n} attempts remaining`;return vn(`response (error; ${h})`,u.status,a,f),this.retryRequest(r,n,f)}const m=await u.text().catch(h=>uu(h).message),w=Bw(m),v=w?void 0:m;throw vn(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,f,v),this.makeStatusError(u.status,w,v,f)}return{response:u,options:r,controller:l}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new Ow(this,r,t)}buildURL(t,n){const r=jw(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return vg(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new V(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r),l={signal:i.signal,...a};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,t,l).finally(()=>{clearTimeout(o)})}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(i=o)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=t.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await Gi(i),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${qn}`}}class gg{constructor(t,n,r,i){Ns.set(this,void 0),$w(this,Ns,t,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new V("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[i,s]of r)t.url.searchParams.set(i,s);n.query=void 0,n.path=t.url.toString()}return await Tw(this,Ns,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Ns=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class Ow extends uo{constructor(t,n,r){super(n,async i=>new r(t,i.response,await mg(i),i.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const yg=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),Fw={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},fe=e=>typeof e=="object"&&e!==null&&!vg(e)&&Object.keys(e).every(t=>wg(Fw,t)),Lw=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qn,"X-Stainless-OS":$d(Deno.build.os),"X-Stainless-Arch":Id(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qn,"X-Stainless-OS":$d(process.platform),"X-Stainless-Arch":Id(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=Dw();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Dw(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:t,version:`${i}.${s}.${a}`}}}return null}const Id=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",$d=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Td;const zw=()=>Td??(Td=Lw()),Bw=e=>{try{return JSON.parse(e)}catch{return}},Uw=/^[a-z][a-z0-9+.-]*:/i,jw=e=>Uw.test(e),Gi=e=>new Promise(t=>setTimeout(t,e)),el=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new V(`${e} must be an integer`);if(t<0)throw new V(`${e} must be a positive integer`);return t},uu=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},As=e=>{var t,n,r,i,s;if(typeof process<"u")return((n=(t=process.env)==null?void 0:t[e])==null?void 0:n.trim())??void 0;if(typeof Deno<"u")return(s=(i=(r=Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,e))==null?void 0:s.trim()};function vg(e){if(!e)return!0;for(const t in e)return!1;return!0}function wg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bd(e,t){for(const n in t){if(!wg(t,n))continue;const r=n.toLowerCase();if(!r)continue;const i=t[n];i===null?delete e[r]:i!==void 0&&(e[r]=i)}}const Od=new Set(["authorization","api-key"]);function vn(e,...t){var n;if(typeof process<"u"&&((n=process==null?void 0:process.env)==null?void 0:n.DEBUG)==="true"){const r=t.map(i=>{if(!i)return i;if(i.headers){const a={...i,headers:{...i.headers}};for(const o in i.headers)Od.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let s=null;for(const a in i)Od.has(a.toLowerCase())&&(s??(s={...i}),s[a]="REDACTED");return s??i});console.log(`OpenAI:DEBUG:${e}`,...r)}}const Hw=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),Vw=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Ww=e=>typeof(e==null?void 0:e.get)=="function",Rs=(e,t)=>{var r;const n=t.toLowerCase();if(Ww(e)){const i=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(s,a,o)=>a+o.toUpperCase());for(const s of[t,n,t.toUpperCase(),i]){const a=e.get(s);if(a)return a}}for(const[i,s]of Object.entries(e))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s},Xw=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function tl(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class co extends gg{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ae extends gg{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class K{constructor(t){this._client=t}}let _g=class extends K{list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/chat/completions/${t}/messages`,Qw,{query:n,...r})}},fo=class extends K{constructor(){super(...arguments),this.messages=new _g(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(`/chat/completions/${t}`,{body:n,...r})}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/chat/completions",ho,{query:t,...n})}del(t,n){return this._client.delete(`/chat/completions/${t}`,n)}};class ho extends Ae{}class Qw extends Ae{}fo.ChatCompletionsPage=ho;fo.Messages=_g;let mo=class extends K{constructor(){super(...arguments),this.completions=new fo(this._client)}};mo.Completions=fo;mo.ChatCompletionsPage=ho;class xg extends K{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Eg extends K{create(t,n){return this._client.post("/audio/transcriptions",Ir({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}}))}}class Sg extends K{create(t,n){return this._client.post("/audio/translations",Ir({body:t,...n,__metadata:{model:t.model}}))}}class qi extends K{constructor(){super(...arguments),this.transcriptions=new Eg(this._client),this.translations=new Sg(this._client),this.speech=new xg(this._client)}}qi.Transcriptions=Eg;qi.Translations=Sg;qi.Speech=xg;class Nc extends K{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/batches",Ac,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class Ac extends Ae{}Nc.BatchesPage=Ac;var ht=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ae=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},cu,Gs,qs,ni,ri,Zs,ii,zt,si,Ia,$a,Zn,kg;class Rc{constructor(){cu.add(this),this.controller=new AbortController,Gs.set(this,void 0),qs.set(this,()=>{}),ni.set(this,()=>{}),ri.set(this,void 0),Zs.set(this,()=>{}),ii.set(this,()=>{}),zt.set(this,{}),si.set(this,!1),Ia.set(this,!1),$a.set(this,!1),Zn.set(this,!1),ht(this,Gs,new Promise((t,n)=>{ht(this,qs,t,"f"),ht(this,ni,n,"f")}),"f"),ht(this,ri,new Promise((t,n)=>{ht(this,Zs,t,"f"),ht(this,ii,n,"f")}),"f"),ae(this,Gs,"f").catch(()=>{}),ae(this,ri,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},ae(this,cu,"m",kg).bind(this))},0)}_connected(){this.ended||(ae(this,qs,"f").call(this),this._emit("connect"))}get ended(){return ae(this,si,"f")}get errored(){return ae(this,Ia,"f")}get aborted(){return ae(this,$a,"f")}abort(){this.controller.abort()}on(t,n){return(ae(this,zt,"f")[t]||(ae(this,zt,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=ae(this,zt,"f")[t];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(t,n){return(ae(this,zt,"f")[t]||(ae(this,zt,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{ht(this,Zn,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){ht(this,Zn,!0,"f"),await ae(this,ri,"f")}_emit(t,...n){if(ae(this,si,"f"))return;t==="end"&&(ht(this,si,!0,"f"),ae(this,Zs,"f").call(this));const r=ae(this,zt,"f")[t];if(r&&(ae(this,zt,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),t==="abort"){const i=n[0];!ae(this,Zn,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ae(this,ni,"f").call(this,i),ae(this,ii,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=n[0];!ae(this,Zn,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ae(this,ni,"f").call(this,i),ae(this,ii,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Gs=new WeakMap,qs=new WeakMap,ni=new WeakMap,ri=new WeakMap,Zs=new WeakMap,ii=new WeakMap,zt=new WeakMap,si=new WeakMap,Ia=new WeakMap,$a=new WeakMap,Zn=new WeakMap,cu=new WeakSet,kg=function(t){if(ht(this,Ia,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new at),t instanceof at)return ht(this,$a,!0,"f"),this._emit("abort",t);if(t instanceof V)return this._emit("error",t);if(t instanceof Error){const n=new V(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new V(String(t)))};var j=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Qe=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Se,fu,Pt,ea,pt,$n,dr,Rn,Ta,Je,ta,na,Ei,ai,oi,Fd,Ld,Dd,zd,Bd,Ud,jd;class _t extends Rc{constructor(){super(...arguments),Se.add(this),fu.set(this,[]),Pt.set(this,{}),ea.set(this,{}),pt.set(this,void 0),$n.set(this,void 0),dr.set(this,void 0),Rn.set(this,void 0),Ta.set(this,void 0),Je.set(this,void 0),ta.set(this,void 0),na.set(this,void 0),Ei.set(this,void 0)}[(fu=new WeakMap,Pt=new WeakMap,ea=new WeakMap,pt=new WeakMap,$n=new WeakMap,dr=new WeakMap,Rn=new WeakMap,Ta=new WeakMap,Je=new WeakMap,ta=new WeakMap,na=new WeakMap,Ei=new WeakMap,Se=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new _t;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=$t.fromReadableStream(t,this.controller);for await(const a of i)j(this,Se,"m",ai).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new at;return this._addRun(j(this,Se,"m",oi).call(this))}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i,s){const a=new _t;return a._run(()=>a._runToolAssistantStream(t,n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,n,r,i,s){var u;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},l=await t.submitToolOutputs(n,r,o,{...s,signal:this.controller.signal});this._connected();for await(const f of l)j(this,Se,"m",ai).call(this,f);if((u=l.controller.signal)!=null&&u.aborted)throw new at;return this._addRun(j(this,Se,"m",oi).call(this))}static createThreadAssistantStream(t,n,r){const i=new _t;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,n,r,i){const s=new _t;return s._run(()=>s._runAssistantStream(t,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return j(this,ta,"f")}currentRun(){return j(this,na,"f")}currentMessageSnapshot(){return j(this,pt,"f")}currentRunStepSnapshot(){return j(this,Ei,"f")}async finalRunSteps(){return await this.done(),Object.values(j(this,Pt,"f"))}async finalMessages(){return await this.done(),Object.values(j(this,ea,"f"))}async finalRun(){if(await this.done(),!j(this,$n,"f"))throw Error("Final run was not received.");return j(this,$n,"f")}async _createThreadAssistantStream(t,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},a=await t.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of a)j(this,Se,"m",ai).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new at;return this._addRun(j(this,Se,"m",oi).call(this))}async _createAssistantStream(t,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await t.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const u of o)j(this,Se,"m",ai).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new at;return this._addRun(j(this,Se,"m",oi).call(this))}static accumulateDelta(t,n){for(const[r,i]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let s=t[r];if(s==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(tl(s)&&tl(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...i);continue}for(const a of i){if(!tl(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=s[o];l==null?s.push(a):s[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);t[r]=s}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,i){return await this._createAssistantStream(n,t,r,i)}async _runToolAssistantStream(t,n,r,i,s){return await this._createToolAssistantStream(r,t,n,i,s)}}ai=function(t){if(!this.ended)switch(Qe(this,ta,t,"f"),j(this,Se,"m",Dd).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":j(this,Se,"m",jd).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":j(this,Se,"m",Ld).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":j(this,Se,"m",Fd).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},oi=function(){if(this.ended)throw new V("stream has ended, this shouldn't happen");if(!j(this,$n,"f"))throw Error("Final run has not been received");return j(this,$n,"f")},Fd=function(t){const[n,r]=j(this,Se,"m",Bd).call(this,t,j(this,pt,"f"));Qe(this,pt,n,"f"),j(this,ea,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=j(this,dr,"f")){if(j(this,Rn,"f"))switch(j(this,Rn,"f").type){case"text":this._emit("textDone",j(this,Rn,"f").text,j(this,pt,"f"));break;case"image_file":this._emit("imageFileDone",j(this,Rn,"f").image_file,j(this,pt,"f"));break}Qe(this,dr,i.index,"f")}Qe(this,Rn,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(j(this,dr,"f")!==void 0){const i=t.data.content[j(this,dr,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,j(this,pt,"f"));break;case"text":this._emit("textDone",i.text,j(this,pt,"f"));break}}j(this,pt,"f")&&this._emit("messageDone",t.data),Qe(this,pt,void 0,"f")}},Ld=function(t){const n=j(this,Se,"m",zd).call(this,t);switch(Qe(this,Ei,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==j(this,Ta,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(j(this,Je,"f")&&this._emit("toolCallDone",j(this,Je,"f")),Qe(this,Ta,s.index,"f"),Qe(this,Je,n.step_details.tool_calls[s.index],"f"),j(this,Je,"f")&&this._emit("toolCallCreated",j(this,Je,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Qe(this,Ei,void 0,"f"),t.data.step_details.type=="tool_calls"&&j(this,Je,"f")&&(this._emit("toolCallDone",j(this,Je,"f")),Qe(this,Je,void 0,"f")),this._emit("runStepDone",t.data,n);break}},Dd=function(t){j(this,fu,"f").push(t),this._emit("event",t)},zd=function(t){switch(t.event){case"thread.run.step.created":return j(this,Pt,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=j(this,Pt,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const i=_t.accumulateDelta(n,r.delta);j(this,Pt,"f")[t.data.id]=i}return j(this,Pt,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":j(this,Pt,"f")[t.data.id]=t.data;break}if(j(this,Pt,"f")[t.data.id])return j(this,Pt,"f")[t.data.id];throw new Error("No snapshot available")},Bd=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let a=n.content[s.index];n.content[s.index]=j(this,Se,"m",Ud).call(this,s,a)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ud=function(t,n){return _t.accumulateDelta(n,t)},jd=function(t){switch(Qe(this,na,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Qe(this,$n,t.data,"f"),j(this,Je,"f")&&(this._emit("toolCallDone",j(this,Je,"f")),Qe(this,Je,void 0,"f"));break}};class Pc extends K{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/assistants",Mc,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Mc extends Ae{}Pc.AssistantsPage=Mc;function Hd(e){return typeof e.parse=="function"}const _r=e=>(e==null?void 0:e.role)==="assistant",Cg=e=>(e==null?void 0:e.role)==="function",Ng=e=>(e==null?void 0:e.role)==="tool";function Ic(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function Zi(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function Kw(e,t){return!t||!Ag(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:$c(e,t)}function $c(e,t){const n=e.choices.map(r=>{var i;if(r.finish_reason==="length")throw new lg;if(r.finish_reason==="content_filter")throw new ug;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>Yw(t,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Jw(t,r.message.content):null}}});return{...e,choices:n}}function Jw(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function Yw(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:Zi(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function Gw(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===t.function.name});return Zi(n)||(n==null?void 0:n.function.strict)||!1}function Ag(e){var t;return Ic(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>Zi(n)||n.type==="function"&&n.function.strict===!0))??!1}function qw(e){for(const t of e??[]){if(t.type!=="function")throw new V(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new V(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Be=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Ie,du,ba,hu,mu,pu,Rg,gu;const Vd=10;class Pg extends Rc{constructor(){super(...arguments),Ie.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(Cg(t)||Ng(t))&&t.content)this._emit("functionCallResult",t.content);else if(_r(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(_r(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new V("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Be(this,Ie,"m",du).call(this)}async finalMessage(){return await this.done(),Be(this,Ie,"m",ba).call(this)}async finalFunctionCall(){return await this.done(),Be(this,Ie,"m",hu).call(this)}async finalFunctionCallResult(){return await this.done(),Be(this,Ie,"m",mu).call(this)}async totalUsage(){return await this.done(),Be(this,Ie,"m",pu).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Be(this,Ie,"m",ba).call(this);n&&this._emit("finalMessage",n);const r=Be(this,Ie,"m",du).call(this);r&&this._emit("finalContent",r);const i=Be(this,Ie,"m",hu).call(this);i&&this._emit("finalFunctionCall",i);const s=Be(this,Ie,"m",mu).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Be(this,Ie,"m",pu).call(this))}async _createChatCompletion(t,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Be(this,Ie,"m",Rg).call(this,n);const s=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion($c(s,n))}async _runChatCompletion(t,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var c;const i="function",{function_call:s="auto",stream:a,...o}=n,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=Vd}=r||{},f={};for(const m of n.functions)f[m.name||m.function.name]=m;const d=n.functions.map(m=>({name:m.name||m.function.name,parameters:m.parameters,description:m.description}));for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<u;++m){const v=(c=(await this._createChatCompletion(t,{...o,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:c.message;if(!v)throw new V("missing message in ChatCompletion response");if(!v.function_call)return;const{name:x,arguments:p}=v.function_call,h=f[x];if(h){if(l&&l!==x){const C=`Invalid function_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:x,content:C});continue}}else{const C=`Invalid function_call: ${JSON.stringify(x)}. Available options are: ${d.map(A=>JSON.stringify(A.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:x,content:C});continue}let y;try{y=Hd(h)?await h.parse(p):p}catch(C){this._addMessage({role:i,name:x,content:C instanceof Error?C.message:String(C)});continue}const g=await h.function(y,this),E=Be(this,Ie,"m",gu).call(this,g);if(this._addMessage({role:i,name:x,content:E}),l)return}}async _runTools(t,n,r){var m,w,v;const i="tool",{tool_choice:s="auto",stream:a,...o}=n,l=typeof s!="string"&&((m=s==null?void 0:s.function)==null?void 0:m.name),{maxChatCompletions:u=Vd}=r||{},f=n.tools.map(x=>{if(Zi(x)){if(!x.$callback)throw new V("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),d={};for(const x of f)x.type==="function"&&(d[x.function.name||x.function.function.name]=x.function);const c="tools"in n?f.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<u;++x){const h=(w=(await this._createChatCompletion(t,{...o,tool_choice:s,tools:c,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!h)throw new V("missing message in ChatCompletion response");if(!((v=h.tool_calls)!=null&&v.length))return;for(const y of h.tool_calls){if(y.type!=="function")continue;const g=y.id,{name:E,arguments:C}=y.function,A=d[E];if(A){if(l&&l!==E){const N=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:g,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(d).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:g,content:N});continue}let S;try{S=Hd(A)?await A.parse(C):C}catch(N){const z=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:g,content:z});continue}const $=await A.function(S,this),k=Be(this,Ie,"m",gu).call(this,$);if(this._addMessage({role:i,tool_call_id:g,content:k}),l)return}}}}Ie=new WeakSet,du=function(){return Be(this,Ie,"m",ba).call(this).content??null},ba=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(_r(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new V("stream ended without producing a ChatCompletionMessage with role=assistant")},hu=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(_r(i)&&(i!=null&&i.function_call))return i.function_call;if(_r(i)&&((t=i==null?void 0:i.tool_calls)!=null&&t.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},mu=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Cg(n)&&n.content!=null||Ng(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},pu=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Rg=function(t){if(t.n!=null&&t.n>1)throw new V("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},gu=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Bi extends Pg{static runFunctions(t,n,r){const i=new Bi,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new Bi,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}_addMessage(t,n=!0){super._addMessage(t,n),_r(t)&&t.content&&this._emit("content",t.content)}}const Mg=1,Ig=2,$g=4,Tg=8,bg=16,Og=32,Fg=64,Lg=128,Dg=256,zg=Lg|Dg,Bg=bg|Og|zg|Fg,Ug=Mg|Ig|Bg,jg=$g|Tg,Zw=Ug|jg,ve={STR:Mg,NUM:Ig,ARR:$g,OBJ:Tg,NULL:bg,BOOL:Og,NAN:Fg,INFINITY:Lg,MINUS_INFINITY:Dg,INF:zg,SPECIAL:Bg,ATOM:Ug,COLLECTION:jg,ALL:Zw};class e_ extends Error{}class t_ extends Error{}function n_(e,t=ve.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return r_(e.trim(),t)}const r_=(e,t)=>{const n=e.length;let r=0;const i=c=>{throw new e_(`${c} at position ${r}`)},s=c=>{throw new t_(`${c} at position ${r}`)},a=()=>(d(),r>=n&&i("Unexpected end of input"),e[r]==='"'?o():e[r]==="{"?l():e[r]==="["?u():e.substring(r,r+4)==="null"||ve.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||ve.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||ve.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||ve.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||ve.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||ve.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):f()),o=()=>{const c=r;let m=!1;for(r++;r<n&&(e[r]!=='"'||m&&e[r-1]==="\\");)m=e[r]==="\\"?!m:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(c,++r-Number(m)))}catch(w){s(String(w))}else if(ve.STR&t)try{return JSON.parse(e.substring(c,r-Number(m))+'"')}catch{return JSON.parse(e.substring(c,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const c={};try{for(;e[r]!=="}";){if(d(),r>=n&&ve.OBJ&t)return c;const m=o();d(),r++;try{const w=a();Object.defineProperty(c,m,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(ve.OBJ&t)return c;throw w}d(),e[r]===","&&r++}}catch{if(ve.OBJ&t)return c;i("Expected '}' at end of object")}return r++,c},u=()=>{r++;const c=[];try{for(;e[r]!=="]";)c.push(a()),d(),e[r]===","&&r++}catch{if(ve.ARR&t)return c;i("Expected ']' at end of array")}return r++,c},f=()=>{if(r===0){e==="-"&&ve.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(m){if(ve.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}s(String(m))}}const c=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(ve.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(e.substring(c,r))}catch{e.substring(c,r)==="-"&&ve.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(c,e.lastIndexOf("e")))}catch(w){s(String(w))}}},d=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return a()},Wd=e=>n_(e,ve.ALL^ve.NUM);var Kn=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ee=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},me,Lt,Jn,Zt,nl,Ps,rl,il,sl,Ms,al,Xd;class Ui extends Pg{constructor(t){super(),me.add(this),Lt.set(this,void 0),Jn.set(this,void 0),Zt.set(this,void 0),Kn(this,Lt,t,"f"),Kn(this,Jn,[],"f")}get currentChatCompletionSnapshot(){return ee(this,Zt,"f")}static fromReadableStream(t){const n=new Ui(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const i=new Ui(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,n,r){var a;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ee(this,me,"m",nl).call(this);const s=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)ee(this,me,"m",rl).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new at;return this._addChatCompletion(ee(this,me,"m",Ms).call(this))}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ee(this,me,"m",nl).call(this),this._connected();const i=$t.fromReadableStream(t,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(ee(this,me,"m",Ms).call(this)),ee(this,me,"m",rl).call(this,o),s=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new at;return this._addChatCompletion(ee(this,me,"m",Ms).call(this))}[(Lt=new WeakMap,Jn=new WeakMap,Zt=new WeakMap,me=new WeakSet,nl=function(){this.ended||Kn(this,Zt,void 0,"f")},Ps=function(n){let r=ee(this,Jn,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ee(this,Jn,"f")[n.index]=r,r)},rl=function(n){var i,s,a,o,l,u,f,d,c,m,w,v,x,p,h;if(this.ended)return;const r=ee(this,me,"m",Xd).call(this,n);this._emit("chunk",n,r);for(const y of n.choices){const g=r.choices[y.index];y.delta.content!=null&&((i=g.message)==null?void 0:i.role)==="assistant"&&((s=g.message)!=null&&s.content)&&(this._emit("content",y.delta.content,g.message.content),this._emit("content.delta",{delta:y.delta.content,snapshot:g.message.content,parsed:g.message.parsed})),y.delta.refusal!=null&&((a=g.message)==null?void 0:a.role)==="assistant"&&((o=g.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:y.delta.refusal,snapshot:g.message.refusal}),((l=y.logprobs)==null?void 0:l.content)!=null&&((u=g.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=y.logprobs)==null?void 0:f.content,snapshot:((d=g.logprobs)==null?void 0:d.content)??[]}),((c=y.logprobs)==null?void 0:c.refusal)!=null&&((m=g.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=y.logprobs)==null?void 0:w.refusal,snapshot:((v=g.logprobs)==null?void 0:v.refusal)??[]});const E=ee(this,me,"m",Ps).call(this,g);g.finish_reason&&(ee(this,me,"m",sl).call(this,g),E.current_tool_call_index!=null&&ee(this,me,"m",il).call(this,g,E.current_tool_call_index));for(const C of y.delta.tool_calls??[])E.current_tool_call_index!==C.index&&(ee(this,me,"m",sl).call(this,g),E.current_tool_call_index!=null&&ee(this,me,"m",il).call(this,g,E.current_tool_call_index)),E.current_tool_call_index=C.index;for(const C of y.delta.tool_calls??[]){const A=(x=g.message.tool_calls)==null?void 0:x[C.index];A!=null&&A.type&&((A==null?void 0:A.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(p=A.function)==null?void 0:p.name,index:C.index,arguments:A.function.arguments,parsed_arguments:A.function.parsed_arguments,arguments_delta:((h=C.function)==null?void 0:h.arguments)??""}):(A==null||A.type,void 0))}}},il=function(n,r){var a,o,l;if(ee(this,me,"m",Ps).call(this,n).done_tool_calls.has(r))return;const s=(a=n.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(o=ee(this,Lt,"f"))==null?void 0:o.tools)==null?void 0:l.find(f=>f.type==="function"&&f.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Zi(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},sl=function(n){var i,s;const r=ee(this,me,"m",Ps).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=ee(this,me,"m",al).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ms=function(){if(this.ended)throw new V("stream has ended, this shouldn't happen");const n=ee(this,Zt,"f");if(!n)throw new V("request ended without sending any chunks");return Kn(this,Zt,void 0,"f"),Kn(this,Jn,[],"f"),i_(n,ee(this,Lt,"f"))},al=function(){var r;const n=(r=ee(this,Lt,"f"))==null?void 0:r.response_format;return Ic(n)?n:null},Xd=function(n){var r,i,s,a;let o=ee(this,Zt,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=Kn(this,Zt,{...u,choices:[]},"f");for(const{delta:f,finish_reason:d,index:c,logprobs:m=null,...w}of n.choices){let v=o.choices[c];if(v||(v=o.choices[c]={finish_reason:d,index:c,message:{},logprobs:m,...w}),m)if(!v.logprobs)v.logprobs=Object.assign({},m);else{const{content:C,refusal:A,...S}=m;Object.assign(v.logprobs,S),C&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...C)),A&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...A))}if(d&&(v.finish_reason=d,ee(this,Lt,"f")&&Ag(ee(this,Lt,"f")))){if(d==="length")throw new lg;if(d==="content_filter")throw new ug}if(Object.assign(v,w),!f)continue;const{content:x,refusal:p,function_call:h,role:y,tool_calls:g,...E}=f;if(Object.assign(v.message,E),p&&(v.message.refusal=(v.message.refusal||"")+p),y&&(v.message.role=y),h&&(v.message.function_call?(h.name&&(v.message.function_call.name=h.name),h.arguments&&((s=v.message.function_call).arguments??(s.arguments=""),v.message.function_call.arguments+=h.arguments)):v.message.function_call=h),x&&(v.message.content=(v.message.content||"")+x,!v.message.refusal&&ee(this,me,"m",al).call(this)&&(v.message.parsed=Wd(v.message.content))),g){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:C,id:A,type:S,function:$,...k}of g){const N=(a=v.message.tool_calls)[C]??(a[C]={});Object.assign(N,k),A&&(N.id=A),S&&(N.type=S),$&&(N.function??(N.function={name:$.name??"",arguments:""})),$!=null&&$.name&&(N.function.name=$.name),$!=null&&$.arguments&&(N.function.arguments+=$.arguments,Gw(ee(this,Lt,"f"),N)&&(N.function.parsed_arguments=Wd(N.function.arguments)))}}}return o},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function i_(e,t){const{id:n,choices:r,created:i,model:s,system_fingerprint:a,...o}=e,l={...o,id:n,choices:r.map(({message:u,finish_reason:f,index:d,logprobs:c,...m})=>{if(!f)throw new V(`missing finish_reason for choice ${d}`);const{content:w=null,function_call:v,tool_calls:x,...p}=u,h=u.role;if(!h)throw new V(`missing role for choice ${d}`);if(v){const{arguments:y,name:g}=v;if(y==null)throw new V(`missing function_call.arguments for choice ${d}`);if(!g)throw new V(`missing function_call.name for choice ${d}`);return{...m,message:{content:w,function_call:{arguments:y,name:g},role:h,refusal:u.refusal??null},finish_reason:f,index:d,logprobs:c}}return x?{...m,index:d,finish_reason:f,logprobs:c,message:{...p,role:h,content:w,refusal:u.refusal??null,tool_calls:x.map((y,g)=>{const{function:E,type:C,id:A,...S}=y,{arguments:$,name:k,...N}=E||{};if(A==null)throw new V(`missing choices[${d}].tool_calls[${g}].id
${Is(e)}`);if(C==null)throw new V(`missing choices[${d}].tool_calls[${g}].type
${Is(e)}`);if(k==null)throw new V(`missing choices[${d}].tool_calls[${g}].function.name
${Is(e)}`);if($==null)throw new V(`missing choices[${d}].tool_calls[${g}].function.arguments
${Is(e)}`);return{...S,id:A,type:C,function:{...N,name:k,arguments:$}}})}}:{...m,message:{...p,content:w,role:h,refusal:u.refusal??null},finish_reason:f,index:d,logprobs:c}}),created:i,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return Kw(l,t)}function Is(e){return JSON.stringify(e)}class xr extends Ui{static fromReadableStream(t){const n=new xr(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const i=new xr(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new xr(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}}let Hg=class extends K{parse(t,n){return qw(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>$c(r,t))}runFunctions(t,n){return t.stream?xr.runFunctions(this._client,t,n):Bi.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?xr.runTools(this._client,t,n):Bi.runTools(this._client,t,n)}stream(t,n){return Ui.createChatCompletion(this._client,t,n)}};class yu extends K{constructor(){super(...arguments),this.completions=new Hg(this._client)}}(function(e){e.Completions=Hg})(yu||(yu={}));class Vg extends K{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Wg extends K{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class po extends K{constructor(){super(...arguments),this.sessions=new Vg(this._client),this.transcriptionSessions=new Wg(this._client)}}po.Sessions=Vg;po.TranscriptionSessions=Wg;class Tc extends K{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,bc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class bc extends Ae{}Tc.MessagesPage=bc;class Oc extends K{retrieve(t,n,r,i={},s){return fe(i)?this.retrieve(t,n,r,{},i):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n,r={},i){return fe(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,Fc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Fc extends Ae{}Oc.RunStepsPage=Fc;let es=class extends K{constructor(){super(...arguments),this.steps=new Oc(this._client)}create(t,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,Lc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}createAndStream(t,n,r){return _t.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Gi(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,n,r){return _t.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,i){const s=await this.submitToolOutputs(t,n,r,i);return await this.poll(t,s.id,i)}submitToolOutputsStream(t,n,r,i){return _t.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,i)}};class Lc extends Ae{}es.RunsPage=Lc;es.Steps=Oc;es.RunStepsPage=Fc;class Dr extends K{constructor(){super(...arguments),this.runs=new es(this._client),this.messages=new Tc(this._client)}create(t={},n){return fe(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return _t.createThreadAssistantStream(t,this._client.beta.threads,n)}}Dr.Runs=es;Dr.RunsPage=Lc;Dr.Messages=Tc;Dr.MessagesPage=bc;class zr extends K{constructor(){super(...arguments),this.realtime=new po(this._client),this.chat=new yu(this._client),this.assistants=new Pc(this._client),this.threads=new Dr(this._client)}}zr.Realtime=po;zr.Assistants=Pc;zr.AssistantsPage=Mc;zr.Threads=Dr;class Xg extends K{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class Qg extends K{create(t,n){const r=!!t.encoding_format;let i=r?t.encoding_format:"base64";r&&vn("Request","User defined encoding_format:",t.encoding_format);const s=this._client.post("/embeddings",{body:{...t,encoding_format:i},...n});return r?s:(vn("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=Xw(l)}),a)))}}class Dc extends K{retrieve(t,n,r,i){return this._client.get(`/evals/${t}/runs/${n}/output_items/${r}`,i)}list(t,n,r={},i){return fe(r)?this.list(t,n,{},r):this._client.getAPIList(`/evals/${t}/runs/${n}/output_items`,zc,{query:r,...i})}}class zc extends Ae{}Dc.OutputItemListResponsesPage=zc;class ts extends K{constructor(){super(...arguments),this.outputItems=new Dc(this._client)}create(t,n,r){return this._client.post(`/evals/${t}/runs`,{body:n,...r})}retrieve(t,n,r){return this._client.get(`/evals/${t}/runs/${n}`,r)}list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/evals/${t}/runs`,Bc,{query:n,...r})}del(t,n,r){return this._client.delete(`/evals/${t}/runs/${n}`,r)}cancel(t,n,r){return this._client.post(`/evals/${t}/runs/${n}`,r)}}class Bc extends Ae{}ts.RunListResponsesPage=Bc;ts.OutputItems=Dc;ts.OutputItemListResponsesPage=zc;class ns extends K{constructor(){super(...arguments),this.runs=new ts(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(`/evals/${t}`,n)}update(t,n,r){return this._client.post(`/evals/${t}`,{body:n,...r})}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/evals",Uc,{query:t,...n})}del(t,n){return this._client.delete(`/evals/${t}`,n)}}class Uc extends Ae{}ns.EvalListResponsesPage=Uc;ns.Runs=ts;ns.RunListResponsesPage=Bc;let jc=class extends K{create(t,n){return this._client.post("/files",Ir({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/files",Hc,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,n)}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(t);for(;!a.status||!i.has(a.status);)if(await Gi(n),a=await this.retrieve(t),Date.now()-s>r)throw new Cc({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return a}};class Hc extends Ae{}jc.FileObjectsPage=Hc;class Vc extends K{create(t,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${t}/permissions`,Wc,{body:n,method:"post",...r})}retrieve(t,n={},r){return fe(n)?this.retrieve(t,{},n):this._client.get(`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...r})}del(t,n,r){return this._client.delete(`/fine_tuning/checkpoints/${t}/permissions/${n}`,r)}}class Wc extends co{}Vc.PermissionCreateResponsesPage=Wc;let go=class extends K{constructor(){super(...arguments),this.permissions=new Vc(this._client)}};go.Permissions=Vc;go.PermissionCreateResponsesPage=Wc;class Xc extends K{list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,Qc,{query:n,...r})}}class Qc extends Ae{}Xc.FineTuningJobCheckpointsPage=Qc;class Br extends K{constructor(){super(...arguments),this.checkpoints=new Xc(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",Kc,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return fe(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,Jc,{query:n,...r})}}class Kc extends Ae{}class Jc extends Ae{}Br.FineTuningJobsPage=Kc;Br.FineTuningJobEventsPage=Jc;Br.Checkpoints=Xc;Br.FineTuningJobCheckpointsPage=Qc;class Ur extends K{constructor(){super(...arguments),this.jobs=new Br(this._client),this.checkpoints=new go(this._client)}}Ur.Jobs=Br;Ur.FineTuningJobsPage=Kc;Ur.FineTuningJobEventsPage=Jc;Ur.Checkpoints=go;class Kg extends K{createVariation(t,n){return this._client.post("/images/variations",Ir({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",Ir({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}class Yc extends K{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Gc,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class Gc extends co{}Yc.ModelsPage=Gc;class Jg extends K{create(t,n){return this._client.post("/moderations",{body:t,...n})}}function s_(e,t){return!t||!o_(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Yg(e,t)}function Yg(e,t){const n=e.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:c_(t,i)};if(i.type==="message"){const s=i.content.map(a=>a.type==="output_text"?{...a,parsed:a_(t,a.text)}:a);return{...i,content:s}}return i}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||Gg(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function a_(e,t){var n,r,i,s;return((r=(n=e.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=e.text)==null?void 0:i.format)?((s=e.text)==null?void 0:s.format).$parseRaw(t):JSON.parse(t)}function o_(e){var t;return!!Ic((t=e.text)==null?void 0:t.format)}function l_(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function u_(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function c_(e,t){const n=u_(e.tools??[],t.name);return{...t,...t,parsed_arguments:l_(n)?n.$parseRaw(t.arguments):n!=null&&n.strict?JSON.parse(t.arguments):null}}function Gg(e){const t=[];for(const n of e.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&t.push(r.text);e.output_text=t.join("")}class qg extends K{list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/responses/${t}/input_items`,d_,{query:n,...r})}}var Yn=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},en=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Gn,$s,tn,Ts,Qd,Kd,Jd,Yd;class qc extends Rc{constructor(t){super(),Gn.add(this),$s.set(this,void 0),tn.set(this,void 0),Ts.set(this,void 0),Yn(this,$s,t,"f")}static createResponse(t,n,r){const i=new qc(n);return i._run(()=>i._createResponse(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createResponse(t,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),en(this,Gn,"m",Qd).call(this);const s=await t.responses.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)en(this,Gn,"m",Kd).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new at;return en(this,Gn,"m",Jd).call(this)}[($s=new WeakMap,tn=new WeakMap,Ts=new WeakMap,Gn=new WeakSet,Qd=function(){this.ended||Yn(this,tn,void 0,"f")},Kd=function(n){if(this.ended)return;const r=en(this,Gn,"m",Yd).call(this,n);switch(this._emit("event",n),n.type){case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new V(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new V(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new V(`expected content to be 'output_text', got ${s.type}`);this._emit("response.output_text.delta",{...n,snapshot:s.text})}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new V(`missing output at index ${n.output_index}`);i.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...n,snapshot:i.arguments});break}default:this._emit(n.type,n);break}},Jd=function(){if(this.ended)throw new V("stream has ended, this shouldn't happen");const n=en(this,tn,"f");if(!n)throw new V("request ended without sending any events");Yn(this,tn,void 0,"f");const r=f_(n,en(this,$s,"f"));return Yn(this,Ts,r,"f"),r},Yd=function(n){let r=en(this,tn,"f");if(!r){if(n.type!=="response.created")throw new V(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Yn(this,tn,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new V(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new V(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new V(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new V(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new V(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{Yn(this,tn,n.response,"f");break}}return r},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=en(this,Ts,"f");if(!t)throw new V("stream ended without producing a ChatCompletion");return t}}function f_(e,t){return s_(e,t)}class Zc extends K{constructor(){super(...arguments),this.inputItems=new qg(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Gg(r),r))}retrieve(t,n={},r){return fe(n)?this.retrieve(t,{},n):this._client.get(`/responses/${t}`,{query:n,...r})}del(t,n){return this._client.delete(`/responses/${t}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(r=>Yg(r,t))}stream(t,n){return qc.createResponse(this._client,t,n)}}class d_ extends Ae{}Zc.InputItems=qg;class Zg extends K{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,Ir({body:n,...r}))}}class ef extends K{constructor(){super(...arguments),this.parts=new Zg(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}ef.Parts=Zg;const h_=async e=>{const t=await Promise.allSettled(e),n=t.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of t)i.status==="fulfilled"&&r.push(i.value);return r};class yo extends K{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,i){return this._client.post(`/vector_stores/${t}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(t,n={},r){return fe(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,vo,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(t,n,{...r,headers:i}).withResponse(),a=s.data;switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=s.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Gi(o);break;case"failed":case"completed":return a}}}async upload(t,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:i.id},r)}async uploadAndPoll(t,n,r){const i=await this.upload(t,n,r);return await this.poll(t,i.id,r)}content(t,n,r){return this._client.getAPIList(`/vector_stores/${t}/files/${n}/content`,tf,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class vo extends Ae{}class tf extends co{}yo.VectorStoreFilesPage=vo;yo.FileContentResponsesPage=tf;class ey extends K{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n);return await this.poll(t,i.id,r)}listFiles(t,n,r={},i){return fe(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,vo,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Gi(o);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(s,n.length),o=this._client,l=n.values(),u=[...r];async function f(c){for(let m of c){const w=await o.files.create({file:m,purpose:"assistants"},i);u.push(w.id)}}const d=Array(a).fill(l).map(f);return await h_(d),await this.createAndPoll(t,{file_ids:u})}}class kn extends K{constructor(){super(...arguments),this.files=new yo(this._client),this.fileBatches=new ey(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return fe(t)?this.list({},t):this._client.getAPIList("/vector_stores",nf,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(t,n,r){return this._client.getAPIList(`/vector_stores/${t}/search`,rf,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class nf extends Ae{}class rf extends co{}kn.VectorStoresPage=nf;kn.VectorStoreSearchResponsesPage=rf;kn.Files=yo;kn.VectorStoreFilesPage=vo;kn.FileContentResponsesPage=tf;kn.FileBatches=ey;var ty;class Q extends bw{constructor({baseURL:t=As("OPENAI_BASE_URL"),apiKey:n=As("OPENAI_API_KEY"),organization:r=As("OPENAI_ORG_ID")??null,project:i=As("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new V("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:i,...s,baseURL:t||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Vw())throw new V(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new Xg(this),this.chat=new mo(this),this.embeddings=new Qg(this),this.files=new jc(this),this.images=new Kg(this),this.audio=new qi(this),this.moderations=new Jg(this),this.models=new Yc(this),this.fineTuning=new Ur(this),this.vectorStores=new kn(this),this.beta=new zr(this),this.batches=new Nc(this),this.uploads=new ef(this),this.responses=new Zc(this),this.evals=new ns(this),this._options=a,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return gw(t,{arrayFormat:"brackets"})}}ty=Q;Q.OpenAI=ty;Q.DEFAULT_TIMEOUT=6e5;Q.OpenAIError=V;Q.APIError=Ne;Q.APIConnectionError=ao;Q.APIConnectionTimeoutError=Cc;Q.APIUserAbortError=at;Q.NotFoundError=rg;Q.ConflictError=ig;Q.RateLimitError=ag;Q.BadRequestError=eg;Q.AuthenticationError=tg;Q.InternalServerError=og;Q.PermissionDeniedError=ng;Q.UnprocessableEntityError=sg;Q.toFile=hg;Q.fileFromPath=Gp;Q.Completions=Xg;Q.Chat=mo;Q.ChatCompletionsPage=ho;Q.Embeddings=Qg;Q.Files=jc;Q.FileObjectsPage=Hc;Q.Images=Kg;Q.Audio=qi;Q.Moderations=Jg;Q.Models=Yc;Q.ModelsPage=Gc;Q.FineTuning=Ur;Q.VectorStores=kn;Q.VectorStoresPage=nf;Q.VectorStoreSearchResponsesPage=rf;Q.Beta=zr;Q.Batches=Nc;Q.BatchesPage=Ac;Q.Uploads=ef;Q.Responses=Zc;Q.Evals=ns;Q.EvalListResponsesPage=Uc;const Gd=Q,ny=W.createContext(),m_={agents:[],messages:[],relationships:{},locations:{},items:[],conversationHistory:{},rooms:[{id:"main",name:"Main Room",description:"The default simulation room.",storyboard:null}],activeRoom:"main"};function p_(e,t){var n;switch(t.type){case"ADD_AGENT":return{...e,agents:[...e.agents,t.payload],relationships:{...e.relationships,[t.payload.id]:{}},locations:{...e.locations,[t.payload.id]:t.payload.location||e.activeRoom},conversationHistory:{...e.conversationHistory,[t.payload.id]:{}}};case"REMOVE_AGENT":const r={...e.conversationHistory};return delete r[t.payload],Object.keys(r).forEach(f=>{r[f][t.payload]&&delete r[f][t.payload]}),{...e,agents:e.agents.filter(f=>f.id!==t.payload),messages:e.messages.filter(f=>f.senderId!==t.payload&&f.receiverId!==t.payload),conversationHistory:r};case"UPDATE_AGENT":return{...e,agents:e.agents.map(f=>f.id===t.payload.id?{...f,...t.payload.updates}:f)};case"ADD_MESSAGE":const i=t.payload.senderId,s=t.payload.receiverId,l=[...((n=e.conversationHistory[i])==null?void 0:n[s])||[],{sender:i,content:t.payload.content,timestamp:t.payload.timestamp,type:t.payload.type}].slice(-10);return{...e,messages:[...e.messages,t.payload],conversationHistory:{...e.conversationHistory,[i]:{...e.conversationHistory[i],[s]:l},[s]:{...e.conversationHistory[s],[i]:l}}};case"UPDATE_RELATIONSHIP":return{...e,relationships:{...e.relationships,[t.payload.agent1Id]:{...e.relationships[t.payload.agent1Id],[t.payload.agent2Id]:t.payload.value}}};case"MOVE_AGENT":return{...e,locations:{...e.locations,[t.payload.agentId]:t.payload.location}};case"ADD_ITEM":return{...e,items:[...e.items,t.payload]};case"REMOVE_ITEM":return{...e,items:e.items.filter(f=>f.id!==t.payload)};case"ADD_ROOM":return{...e,rooms:[...e.rooms,t.payload]};case"REMOVE_ROOM":if(t.payload==="main")return e;const u={...e.locations};return Object.keys(u).forEach(f=>{u[f]===t.payload&&(u[f]="main")}),{...e,rooms:e.rooms.filter(f=>f.id!==t.payload),locations:u,activeRoom:e.activeRoom===t.payload?"main":e.activeRoom};case"SET_ACTIVE_ROOM":return{...e,activeRoom:t.payload};default:return e}}function g_({children:e,openAIKey:t}){const[n,r]=W.useReducer(p_,m_),[i,s]=W.useState(()=>{if(t)try{return new Gd({apiKey:t,dangerouslyAllowBrowser:!0})}catch(M){return console.error("Error initializing OpenAI:",M),null}return null});_.useEffect(()=>{if(t)try{s(new Gd({apiKey:t,dangerouslyAllowBrowser:!0}))}catch(M){console.error("Error updating OpenAI client:",M),s(null)}else s(null)},[t]);const a=M=>{const b={...M,id:ks(),createdAt:new Date().toISOString(),location:n.activeRoom};return r({type:"ADD_AGENT",payload:b}),b},o=M=>{r({type:"REMOVE_AGENT",payload:M})},l=(M,b)=>{r({type:"UPDATE_AGENT",payload:{id:M,updates:b}})},u=M=>{const b={...M,id:ks(),timestamp:new Date().toISOString()};return r({type:"ADD_MESSAGE",payload:b}),b},f=(M,b,I)=>{r({type:"UPDATE_RELATIONSHIP",payload:{agent1Id:M,agent2Id:b,value:I}})},d=(M,b)=>{r({type:"MOVE_AGENT",payload:{agentId:M,location:b}})},c=M=>{const b={...M,id:ks(),createdAt:new Date().toISOString()};return r({type:"ADD_ITEM",payload:b}),b},m=M=>{r({type:"REMOVE_ITEM",payload:M})},w=(M,b)=>n.relationships[M]&&n.relationships[M][b]!==void 0?n.relationships[M][b]:0,v=M=>n.locations[M]||n.activeRoom,x=M=>n.agents.filter(b=>v(b.id)===M),p=(M,b)=>{var I;return((I=n.conversationHistory[M])==null?void 0:I[b])||[]},h=(M,b)=>{const I=p(M,b);if(I.length===0)return"You have not spoken with this agent before.";const O=n.agents.find(R=>R.id===M),F=n.agents.find(R=>R.id===b);if(!O||!F)return"";const P=I.map(R=>`${R.sender===M?O.name:F.name}: "${R.content}"`).join(`
`);return`Previous conversation history with ${F.name}:
${P}`},y=M=>{const b={...M,id:ks(),createdAt:new Date().toISOString()};return r({type:"ADD_ROOM",payload:b}),b},g=M=>{r({type:"REMOVE_ROOM",payload:M})},E=M=>{r({type:"SET_ACTIVE_ROOM",payload:M})},C=async(M,b,I,O)=>{if(!i)return null;try{const F=A(M,b,I,O),R=(await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:F}],max_tokens:1e3,temperature:.8})).choices[0].message.content.trim(),L=S(M,b,I,R,O),U=await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:L}],max_tokens:1e3,temperature:.7,response_format:{type:"json_object"}});let H=[];try{H=JSON.parse(U.choices[0].message.content).agents.map(Z=>({name:Z.name,role:Z.role,backstory:Z.backstory,traits:{friendliness:parseFloat(Z.traits.friendliness),aggression:parseFloat(Z.traits.aggression),curiosity:parseFloat(Z.traits.curiosity),extraversion:parseFloat(Z.traits.extraversion)}}))}catch(X){return console.error("Error parsing agents JSON:",X),null}return{storyboard:R,agents:H}}catch(F){return console.error("Error generating room storyboard:",F),null}},A=(M,b,I,O)=>`You are a creative narrative designer tasked with creating a detailed storyboard for a simulation room called "${M}".

Room Description: ${b}

Available Roles: ${I.join(", ")}

Number of Agents: ${O}

Create a detailed storyboard that:
1. Establishes the setting and atmosphere of the room
2. Outlines potential relationships, conflicts, and dynamics between agents
3. Suggests interesting scenarios that might unfold during the simulation
4. Creates a cohesive narrative framework for the agents to interact within

The storyboard should be detailed but concise (300-500 words), focusing on creating an engaging scenario that will lead to interesting interactions between the agents.

Only respond with the storyboard text, nothing else.`,S=(M,b,I,O,F)=>`You are an AI character designer tasked with creating ${F} unique agents for a simulation room called "${M}".

Room Description: ${b}

Available Roles: ${I.join(", ")}

Storyboard: ${O}

Create ${F} unique agents with distinct personalities that would fit into this scenario. Each agent should have:
1. A name (common human names)
2. A role from the available roles list
3. A brief backstory (1-2 sentences)
4. Personality traits on a scale from 0.0 to 1.0:
   - friendliness (how warm and friendly they are)
   - aggression (how confrontational they are)
   - curiosity (how interested they are in exploring and learning)
   - extraversion (how outgoing and social they are)

Ensure the agents have diverse personalities that will create interesting dynamics based on the storyboard.

Respond with a JSON object containing an array of agents with the following structure:
{
  "agents": [
    {
      "name": "Name",
      "role": "Role",
      "backstory": "Brief backstory",
      "traits": {
        "friendliness": 0.X,
        "aggression": 0.X,
        "curiosity": 0.X,
        "extraversion": 0.X
      }
    },
    ...
  ]
}`,$=async(M,b,I,O)=>{if(!i)return null;try{const F=N(M,b,I,O);return(await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:F}],max_tokens:100,temperature:.7})).choices[0].message.content.trim()}catch(F){return console.error("Error generating AI message:",F),null}},k=async(M,b,I,O)=>{if(!i)return null;try{const F=z(M,b,I,O);return(await i.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:F}],max_tokens:100,temperature:.7})).choices[0].message.content.trim()}catch(F){return console.error("Error generating AI response:",F),null}},N=(M,b,I,O)=>{const F=G(O),P=B(M),R=B(b),L=h(M.id,b.id);return`You are ${M.name}, a ${M.role} with the following personality traits: ${P}.
    
You are speaking to ${b.name}, a ${b.role} with these traits: ${R}.

Your relationship with ${b.name} is: ${F}.

${L}

Generate a ${I} message from you to ${b.name}. The message should reflect your personality, your relationship with ${b.name}, and should be ${I} in tone.

If you have spoken before, your message should acknowledge or reference your previous conversations in a natural way. Continue the conversation where you left off if appropriate.

Keep the message concise (1-2 sentences) and make it sound natural. Include ${b.name} in your message.

Only respond with the message text, nothing else.`},z=(M,b,I,O)=>{const F=G(O),P=B(M),R=B(b),L=h(M.id,b.id);return`You are ${M.name}, a ${M.role} with the following personality traits: ${P}.
    
${b.name}, a ${b.role} with these traits: ${R}, just spoke to you in a ${I} tone.

Your relationship with ${b.name} is: ${F}.

${L}

Generate a response to ${b.name}. Your response should reflect your personality and your relationship with ${b.name}.

If you have spoken before, your response should acknowledge or reference your previous conversations in a natural way. Continue the conversation where you left off if appropriate.

Keep the response concise (1-2 sentences) and make it sound natural. Include ${b.name} in your response.

Only respond with the message text, nothing else.`},B=M=>{const b=[];return M.traits.friendliness>.7?b.push("very friendly"):M.traits.friendliness>.5?b.push("somewhat friendly"):M.traits.friendliness<.3&&b.push("unfriendly"),M.traits.aggression>.7?b.push("highly aggressive"):M.traits.aggression>.5?b.push("somewhat aggressive"):M.traits.aggression<.3&&b.push("non-aggressive"),M.traits.curiosity>.7?b.push("very curious"):M.traits.curiosity>.5?b.push("somewhat curious"):M.traits.curiosity<.3&&b.push("incurious"),M.traits.extraversion>.7?b.push("highly extraverted"):M.traits.extraversion>.5?b.push("somewhat extraverted"):M.traits.extraversion<.3&&b.push("introverted"),b.join(", ")},G=M=>M>75?"very close friends":M>50?"friends":M>25?"friendly acquaintances":M>-25?"neutral acquaintances":M>-50?"dislike each other":M>-75?"enemies":"bitter enemies",ie={agents:n.agents,messages:n.messages,items:n.items,rooms:n.rooms,activeRoom:n.activeRoom,addAgent:a,removeAgent:o,updateAgent:l,addMessage:u,updateRelationship:f,getRelationship:w,moveAgent:d,getAgentLocation:v,getAgentsInLocation:x,addItem:c,removeItem:m,addRoom:y,removeRoom:g,setActiveRoom:E,hasOpenAI:!!i,generateAIMessage:$,generateAIResponse:k,getConversationHistory:p,generateRoomStoryboard:C};return _.createElement(ny.Provider,{value:ie},e)}function rs(){const e=W.useContext(ny);if(e===void 0)throw new Error("useSimulation must be used within a SimulationProvider");return e}const y_=({agent:e})=>{const{removeAgent:t,getRelationship:n,agents:r,updateAgent:i}=rs(),[s,a]=W.useState(!1),[o,l]=W.useState(!1),[u,f]=W.useState(e.name),d=h=>h>75?"Best Friends":h>50?"Friends":h>25?"Friendly":h>-25?"Neutral":h>-50?"Dislike":h>-75?"Enemies":"Arch Enemies",c=h=>h>50?"#4caf50":h>0?"#8bc34a":h>-50?"#ff9800":"#f44336",m=(h,y)=>{const E={friendliness:["Hostile","Cold","Reserved","Neutral","Warm","Friendly","Loving"],aggression:["Pacifist","Gentle","Calm","Neutral","Assertive","Aggressive","Violent"],curiosity:["Incurious","Disinterested","Cautious","Neutral","Interested","Curious","Obsessive"],extraversion:["Reclusive","Introverted","Reserved","Balanced","Sociable","Extraverted","Attention-seeking"]}[h]||["Very Low","Low","Somewhat Low","Moderate","Somewhat High","High","Very High"],C=Math.min(Math.floor(y*6),6);return E[C]},w=()=>{l(!0)},v=()=>{u.trim()&&(i(e.id,{name:u.trim()}),l(!1))},x=()=>{f(e.name),l(!1)},p=h=>{h.key==="Enter"?v():h.key==="Escape"&&x()};return _.createElement("div",{className:"agent-card"},_.createElement("div",{className:"agent-header"},o?_.createElement("div",{className:"name-edit-container"},_.createElement("input",{type:"text",value:u,onChange:h=>f(h.target.value),onKeyDown:p,autoFocus:!0,className:"name-edit-input",maxLength:20}),_.createElement("div",{className:"name-edit-buttons"},_.createElement("button",{className:"name-save-btn",onClick:v},"Save"),_.createElement("button",{className:"name-cancel-btn",onClick:x},"Cancel"))):_.createElement("h3",{onClick:w,className:"editable-name",title:"Click to edit name"},e.name,_.createElement("span",{className:"edit-icon"},"")),_.createElement("div",{className:"agent-controls"},_.createElement("button",{className:"details-toggle",onClick:()=>a(!s)},s?"Hide Details":"Show Details"),_.createElement("button",{className:"remove-agent",onClick:()=>t(e.id)},""))),_.createElement("div",{className:"agent-basic-info"},_.createElement("p",null,_.createElement("strong",null,"Role:")," ",e.role),_.createElement("div",{className:"personality-summary"},_.createElement("div",{className:"trait-bar"},_.createElement("span",null,"Friendliness:"),_.createElement("div",{className:"trait-bar-bg"},_.createElement("div",{className:"trait-bar-fill",style:{width:`${e.traits.friendliness*100}%`}}))),_.createElement("div",{className:"trait-bar"},_.createElement("span",null,"Aggression:"),_.createElement("div",{className:"trait-bar-bg"},_.createElement("div",{className:"trait-bar-fill",style:{width:`${e.traits.aggression*100}%`}}))))),s&&_.createElement("div",{className:"agent-details"},_.createElement("div",{className:"personality-traits"},_.createElement("h4",null,"Personality Profile"),_.createElement("ul",null,Object.entries(e.traits).map(([h,y])=>_.createElement("li",{key:h},_.createElement("strong",null,h.charAt(0).toUpperCase()+h.slice(1),":"),m(h,y)," (",Math.round(y*100),"%)")))),_.createElement("div",{className:"agent-relationships"},_.createElement("h4",null,"Relationships"),r.length<=1?_.createElement("p",null,"No other agents to form relationships with."):_.createElement("ul",null,r.filter(h=>h.id!==e.id).map(h=>{const y=n(e.id,h.id);return _.createElement("li",{key:h.id},_.createElement("span",null,h.name,":"),_.createElement("span",{className:"relationship-status",style:{color:c(y)}},d(y)," (",y,")"))}))),_.createElement("div",{className:"agent-backstory"},_.createElement("h4",null,"Backstory"),_.createElement("p",null,e.backstory||"No backstory available."))))};const ry=W.forwardRef(({messages:e,agents:t,location:n},r)=>{const i=t.filter(f=>f.location===n||f.location===void 0).map(f=>f.id),s=e.filter(f=>i.includes(f.senderId)&&i.includes(f.receiverId)),a=W.useMemo(()=>{const f=[],d=new Set;return s.forEach(c=>{if(!s.some(w=>w.senderId===c.receiverId&&w.receiverId===c.senderId&&new Date(w.timestamp)<new Date(c.timestamp)&&new Date(c.timestamp)-new Date(w.timestamp)<1e4)&&!d.has(c.id)){const w={initial:c,responses:[]};s.forEach(v=>{v.senderId===c.receiverId&&v.receiverId===c.senderId&&new Date(v.timestamp)>new Date(c.timestamp)&&new Date(v.timestamp)-new Date(c.timestamp)<1e4&&(w.responses.push(v),d.add(v.id))}),f.push(w),d.add(c.id)}}),s.forEach(c=>{d.has(c.id)||(f.push({initial:c,responses:[]}),d.add(c.id))}),f.sort((c,m)=>new Date(c.initial.timestamp)-new Date(m.initial.timestamp))},[s]),o=f=>{const d=t.find(c=>c.id===f);return d?d.name:"Unknown Agent"},l=f=>{switch(f){case"friendly":return"message-friendly";case"hostile":return"message-hostile";default:return"message-neutral"}},u=f=>new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return _.createElement("div",{className:"message-log",ref:r},_.createElement("h3",null,"Conversation Log"),_.createElement("div",{className:"messages-container"},a.length===0?_.createElement("p",{className:"no-messages"},"No messages yet. Start the simulation to see agents interact."):a.map(f=>_.createElement("div",{key:f.initial.id,className:"conversation-thread"},_.createElement("div",{className:`message initial-message ${l(f.initial.type)}`},_.createElement("div",{className:"message-header"},_.createElement("span",{className:"message-sender"},o(f.initial.senderId)),_.createElement("span",{className:"message-time"},u(f.initial.timestamp))),_.createElement("div",{className:"message-content"},f.initial.content),_.createElement("div",{className:"message-recipient"},"To: ",o(f.initial.receiverId))),f.responses.map(d=>_.createElement("div",{key:d.id,className:`message response-message ${l(d.type)}`},_.createElement("div",{className:"message-header"},_.createElement("span",{className:"message-sender"},o(d.senderId)),_.createElement("span",{className:"message-time"},u(d.timestamp))),_.createElement("div",{className:"message-content"},d.content)))))))});ry.displayName="MessageLog";function ra(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function v_(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iy(e){let t,n,r;e.length!==2?(t=ra,n=(o,l)=>ra(e(o),l),r=(o,l)=>e(o)-l):(t=e===ra||e===v_?e:w_,n=e,r=e);function i(o,l,u=0,f=o.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(o[d],l)<0?u=d+1:f=d}while(u<f)}return u}function s(o,l,u=0,f=o.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(o[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function a(o,l,u=0,f=o.length){const d=i(o,l,u,f-1);return d>u&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function w_(){return 0}function __(e){return e===null?NaN:+e}const x_=iy(ra),E_=x_.right;iy(__).center;const S_=E_;class qd extends Map{constructor(t,n=N_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Zd(this,t))}has(t){return super.has(Zd(this,t))}set(t,n){return super.set(k_(this,t),n)}delete(t){return super.delete(C_(this,t))}}function Zd({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function k_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function C_({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function N_(e){return e!==null&&typeof e=="object"?e.valueOf():e}const A_=Math.sqrt(50),R_=Math.sqrt(10),P_=Math.sqrt(2);function Oa(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=A_?10:s>=R_?5:s>=P_?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=n&&n<2?Oa(e,t,n*2):[o,l,u]}function M_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?Oa(t,e,n):Oa(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function vu(e,t,n){return t=+t,e=+e,n=+n,Oa(e,t,n)[2]}function I_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?vu(t,e,n):vu(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function eh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function T_(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function b_(e){return e}var ol=1,ll=2,wu=3,li=4,th=1e-6;function O_(e){return"translate("+e+",0)"}function F_(e){return"translate(0,"+e+")"}function L_(e){return t=>+e(t)}function D_(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function z_(){return!this.__axis}function sy(e,t){var n=[],r=null,i=null,s=6,a=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===ol||e===li?-1:1,f=e===li||e===ll?"x":"y",d=e===ol||e===wu?O_:F_;function c(m){var w=r??(t.ticks?t.ticks.apply(t,n):t.domain()),v=i??(t.tickFormat?t.tickFormat.apply(t,n):b_),x=Math.max(s,0)+o,p=t.range(),h=+p[0]+l,y=+p[p.length-1]+l,g=(t.bandwidth?D_:L_)(t.copy(),l),E=m.selection?m.selection():m,C=E.selectAll(".domain").data([null]),A=E.selectAll(".tick").data(w,t).order(),S=A.exit(),$=A.enter().append("g").attr("class","tick"),k=A.select("line"),N=A.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge($),k=k.merge($.append("line").attr("stroke","currentColor").attr(f+"2",u*s)),N=N.merge($.append("text").attr("fill","currentColor").attr(f,u*x).attr("dy",e===ol?"0em":e===wu?"0.71em":"0.32em")),m!==E&&(C=C.transition(m),A=A.transition(m),k=k.transition(m),N=N.transition(m),S=S.transition(m).attr("opacity",th).attr("transform",function(z){return isFinite(z=g(z))?d(z+l):this.getAttribute("transform")}),$.attr("opacity",th).attr("transform",function(z){var B=this.parentNode.__axis;return d((B&&isFinite(B=B(z))?B:g(z))+l)})),S.remove(),C.attr("d",e===li||e===ll?a?"M"+u*a+","+h+"H"+l+"V"+y+"H"+u*a:"M"+l+","+h+"V"+y:a?"M"+h+","+u*a+"V"+l+"H"+y+"V"+u*a:"M"+h+","+l+"H"+y),A.attr("opacity",1).attr("transform",function(z){return d(g(z)+l)}),k.attr(f+"2",u*s),N.attr(f,u*x).text(v),E.filter(z_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===ll?"start":e===li?"end":"middle"),E.each(function(){this.__axis=g})}return c.scale=function(m){return arguments.length?(t=m,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),c):n.slice()},c.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),c):r&&r.slice()},c.tickFormat=function(m){return arguments.length?(i=m,c):i},c.tickSize=function(m){return arguments.length?(s=a=+m,c):s},c.tickSizeInner=function(m){return arguments.length?(s=+m,c):s},c.tickSizeOuter=function(m){return arguments.length?(a=+m,c):a},c.tickPadding=function(m){return arguments.length?(o=+m,c):o},c.offset=function(m){return arguments.length?(l=+m,c):l},c}function nh(e){return sy(wu,e)}function rh(e){return sy(li,e)}var B_={value:()=>{}};function wo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ia(n)}function ia(e){this._=e}function U_(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ia.prototype=wo.prototype={constructor:ia,on:function(e,t){var n=this._,r=U_(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=j_(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=ih(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ih(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ia(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function j_(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ih(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=B_,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _u="http://www.w3.org/1999/xhtml";const sh={svg:"http://www.w3.org/2000/svg",xhtml:_u,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _o(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sh.hasOwnProperty(t)?{space:sh[t],local:e}:e}function H_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_u&&t.documentElement.namespaceURI===_u?t.createElement(e):t.createElementNS(n,e)}}function V_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ay(e){var t=_o(e);return(t.local?V_:H_)(t)}function W_(){}function sf(e){return e==null?W_:function(){return this.querySelector(e)}}function X_(e){typeof e!="function"&&(e=sf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,u,f=0;f<a;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),o[f]=u);return new et(r,this._parents)}function Q_(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function K_(){return[]}function oy(e){return e==null?K_:function(){return this.querySelectorAll(e)}}function J_(e){return function(){return Q_(e.apply(this,arguments))}}function Y_(e){typeof e=="function"?e=J_(e):e=oy(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new et(r,i)}function ly(e){return function(){return this.matches(e)}}function uy(e){return function(t){return t.matches(e)}}var G_=Array.prototype.find;function q_(e){return function(){return G_.call(this.children,e)}}function Z_(){return this.firstElementChild}function e1(e){return this.select(e==null?Z_:q_(typeof e=="function"?e:uy(e)))}var t1=Array.prototype.filter;function n1(){return Array.from(this.children)}function r1(e){return function(){return t1.call(this.children,e)}}function i1(e){return this.selectAll(e==null?n1:r1(typeof e=="function"?e:uy(e)))}function s1(e){typeof e!="function"&&(e=ly(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new et(r,this._parents)}function cy(e){return new Array(e.length)}function a1(){return new et(this._enter||this._groups.map(cy),this._parents)}function Fa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fa.prototype={constructor:Fa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function o1(e){return function(){return e}}function l1(e,t,n,r,i,s){for(var a=0,o,l=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new Fa(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function u1(e,t,n,r,i,s,a){var o,l,u=new Map,f=t.length,d=s.length,c=new Array(f),m;for(o=0;o<f;++o)(l=t[o])&&(c[o]=m=a.call(l,l.__data__,o,t)+"",u.has(m)?i[o]=l:u.set(m,l));for(o=0;o<d;++o)m=a.call(e,s[o],o,s)+"",(l=u.get(m))?(r[o]=l,l.__data__=s[o],u.delete(m)):n[o]=new Fa(e,s[o]);for(o=0;o<f;++o)(l=t[o])&&u.get(c[o])===l&&(i[o]=l)}function c1(e){return e.__data__}function f1(e,t){if(!arguments.length)return Array.from(this,c1);var n=t?u1:l1,r=this._parents,i=this._groups;typeof e!="function"&&(e=o1(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var f=r[u],d=i[u],c=d.length,m=d1(e.call(f,f&&f.__data__,u,r)),w=m.length,v=o[u]=new Array(w),x=a[u]=new Array(w),p=l[u]=new Array(c);n(f,d,v,x,p,m,t);for(var h=0,y=0,g,E;h<w;++h)if(g=v[h]){for(h>=y&&(y=h+1);!(E=x[y])&&++y<w;);g._next=E||null}}return a=new et(a,r),a._enter=o,a._exit=l,a}function d1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h1(){return new et(this._exit||this._groups.map(cy),this._parents)}function m1(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function p1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],f=r[l],d=u.length,c=o[l]=new Array(d),m,w=0;w<d;++w)(m=u[w]||f[w])&&(c[w]=m);for(;l<i;++l)o[l]=n[l];return new et(o,this._parents)}function g1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function y1(e){e||(e=v1);function t(d,c){return d&&c?e(d.__data__,c.__data__):!d-!c}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,f=0;f<o;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new et(i,this._parents).order()}function v1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _1(){return Array.from(this)}function x1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function E1(){let e=0;for(const t of this)++e;return e}function S1(){return!this.node()}function k1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function C1(e){return function(){this.removeAttribute(e)}}function N1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function A1(e,t){return function(){this.setAttribute(e,t)}}function R1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function P1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function M1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function I1(e,t){var n=_o(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?N1:C1:typeof t=="function"?n.local?M1:P1:n.local?R1:A1)(n,t))}function fy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $1(e){return function(){this.style.removeProperty(e)}}function T1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function b1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O1(e,t,n){return arguments.length>1?this.each((t==null?$1:typeof t=="function"?b1:T1)(e,t,n??"")):$r(this.node(),e)}function $r(e,t){return e.style.getPropertyValue(t)||fy(e).getComputedStyle(e,null).getPropertyValue(t)}function F1(e){return function(){delete this[e]}}function L1(e,t){return function(){this[e]=t}}function D1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function z1(e,t){return arguments.length>1?this.each((t==null?F1:typeof t=="function"?D1:L1)(e,t)):this.node()[e]}function dy(e){return e.trim().split(/^|\s+/)}function af(e){return e.classList||new hy(e)}function hy(e){this._node=e,this._names=dy(e.getAttribute("class")||"")}hy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function my(e,t){for(var n=af(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function py(e,t){for(var n=af(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function B1(e){return function(){my(this,e)}}function U1(e){return function(){py(this,e)}}function j1(e,t){return function(){(t.apply(this,arguments)?my:py)(this,e)}}function H1(e,t){var n=dy(e+"");if(arguments.length<2){for(var r=af(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?j1:t?B1:U1)(n,t))}function V1(){this.textContent=""}function W1(e){return function(){this.textContent=e}}function X1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Q1(e){return arguments.length?this.each(e==null?V1:(typeof e=="function"?X1:W1)(e)):this.node().textContent}function K1(){this.innerHTML=""}function J1(e){return function(){this.innerHTML=e}}function Y1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function G1(e){return arguments.length?this.each(e==null?K1:(typeof e=="function"?Y1:J1)(e)):this.node().innerHTML}function q1(){this.nextSibling&&this.parentNode.appendChild(this)}function Z1(){return this.each(q1)}function ex(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tx(){return this.each(ex)}function nx(e){var t=typeof e=="function"?e:ay(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function rx(){return null}function ix(e,t){var n=typeof e=="function"?e:ay(e),r=t==null?rx:typeof t=="function"?t:sf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sx(){var e=this.parentNode;e&&e.removeChild(this)}function ax(){return this.each(sx)}function ox(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lx(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ux(e){return this.select(e?lx:ox)}function cx(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fx(e){return function(t){e.call(this,t,this.__data__)}}function dx(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function hx(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function mx(e,t,n){return function(){var r=this.__on,i,s=fx(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function px(e,t,n){var r=dx(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,f;l<u;++l)for(i=0,f=o[l];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(o=t?mx:hx,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function gy(e,t,n){var r=fy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gx(e,t){return function(){return gy(this,e,t)}}function yx(e,t){return function(){return gy(this,e,t.apply(this,arguments))}}function vx(e,t){return this.each((typeof t=="function"?yx:gx)(e,t))}function*wx(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var yy=[null];function et(e,t){this._groups=e,this._parents=t}function is(){return new et([[document.documentElement]],yy)}function _x(){return this}et.prototype=is.prototype={constructor:et,select:X_,selectAll:Y_,selectChild:e1,selectChildren:i1,filter:s1,data:f1,enter:a1,exit:h1,join:m1,merge:p1,selection:_x,order:g1,sort:y1,call:w1,nodes:_1,node:x1,size:E1,empty:S1,each:k1,attr:I1,style:O1,property:z1,classed:H1,text:Q1,html:G1,raise:Z1,lower:tx,append:nx,insert:ix,remove:ax,clone:ux,datum:cx,on:px,dispatch:vx,[Symbol.iterator]:wx};function Mt(e){return typeof e=="string"?new et([[document.querySelector(e)]],[document.documentElement]):new et([[e]],yy)}function xx(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ah(e,t){if(e=xx(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ex={passive:!1},ji={capture:!0,passive:!1};function ul(e){e.stopImmediatePropagation()}function Er(e){e.preventDefault(),e.stopImmediatePropagation()}function Sx(e){var t=e.document.documentElement,n=Mt(e).on("dragstart.drag",Er,ji);"onselectstart"in t?n.on("selectstart.drag",Er,ji):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function kx(e,t){var n=e.document.documentElement,r=Mt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Er,ji),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bs=e=>()=>e;function xu(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:l,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}xu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Cx(e){return!e.ctrlKey&&!e.button}function Nx(){return this.parentNode}function Ax(e,t){return t??{x:e.x,y:e.y}}function Rx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Px(){var e=Cx,t=Nx,n=Ax,r=Rx,i={},s=wo("start","drag","end"),a=0,o,l,u,f,d=0;function c(g){g.on("mousedown.drag",m).filter(r).on("touchstart.drag",x).on("touchmove.drag",p,Ex).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(g,E){if(!(f||!e.call(this,g,E))){var C=y(this,t.call(this,g,E),g,E,"mouse");C&&(Mt(g.view).on("mousemove.drag",w,ji).on("mouseup.drag",v,ji),Sx(g.view),ul(g),u=!1,o=g.clientX,l=g.clientY,C("start",g))}}function w(g){if(Er(g),!u){var E=g.clientX-o,C=g.clientY-l;u=E*E+C*C>d}i.mouse("drag",g)}function v(g){Mt(g.view).on("mousemove.drag mouseup.drag",null),kx(g.view,u),Er(g),i.mouse("end",g)}function x(g,E){if(e.call(this,g,E)){var C=g.changedTouches,A=t.call(this,g,E),S=C.length,$,k;for($=0;$<S;++$)(k=y(this,A,g,E,C[$].identifier,C[$]))&&(ul(g),k("start",g,C[$]))}}function p(g){var E=g.changedTouches,C=E.length,A,S;for(A=0;A<C;++A)(S=i[E[A].identifier])&&(Er(g),S("drag",g,E[A]))}function h(g){var E=g.changedTouches,C=E.length,A,S;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<C;++A)(S=i[E[A].identifier])&&(ul(g),S("end",g,E[A]))}function y(g,E,C,A,S,$){var k=s.copy(),N=ah($||C,E),z,B,G;if((G=n.call(g,new xu("beforestart",{sourceEvent:C,target:c,identifier:S,active:a,x:N[0],y:N[1],dx:0,dy:0,dispatch:k}),A))!=null)return z=G.x-N[0]||0,B=G.y-N[1]||0,function ie(M,b,I){var O=N,F;switch(M){case"start":i[S]=ie,F=a++;break;case"end":delete i[S],--a;case"drag":N=ah(I||b,E),F=a;break}k.call(M,g,new xu(M,{sourceEvent:b,subject:G,target:c,identifier:S,active:F,x:N[0]+z,y:N[1]+B,dx:N[0]-O[0],dy:N[1]-O[1],dispatch:k}),A)}}return c.filter=function(g){return arguments.length?(e=typeof g=="function"?g:bs(!!g),c):e},c.container=function(g){return arguments.length?(t=typeof g=="function"?g:bs(g),c):t},c.subject=function(g){return arguments.length?(n=typeof g=="function"?g:bs(g),c):n},c.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:bs(!!g),c):r},c.on=function(){var g=s.on.apply(s,arguments);return g===s?c:g},c.clickDistance=function(g){return arguments.length?(d=(g=+g)*g,c):Math.sqrt(d)},c}function of(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ss(){}var Hi=.7,La=1/Hi,Sr="\\s*([+-]?\\d+)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mx=/^#([0-9a-f]{3,8})$/,Ix=new RegExp(`^rgb\\(${Sr},${Sr},${Sr}\\)$`),$x=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Tx=new RegExp(`^rgba\\(${Sr},${Sr},${Sr},${Vi}\\)$`),bx=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Vi}\\)$`),Ox=new RegExp(`^hsl\\(${Vi},${Ot},${Ot}\\)$`),Fx=new RegExp(`^hsla\\(${Vi},${Ot},${Ot},${Vi}\\)$`),oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};of(ss,Hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lh,formatHex:lh,formatHex8:Lx,formatHsl:Dx,formatRgb:uh,toString:uh});function lh(){return this.rgb().formatHex()}function Lx(){return this.rgb().formatHex8()}function Dx(){return wy(this).formatHsl()}function uh(){return this.rgb().formatRgb()}function Hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Mx.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ch(t):n===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Os(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Os(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ix.exec(e))?new He(t[1],t[2],t[3],1):(t=$x.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Tx.exec(e))?Os(t[1],t[2],t[3],t[4]):(t=bx.exec(e))?Os(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ox.exec(e))?hh(t[1],t[2]/100,t[3]/100,1):(t=Fx.exec(e))?hh(t[1],t[2]/100,t[3]/100,t[4]):oh.hasOwnProperty(e)?ch(oh[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function ch(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Os(e,t,n,r){return r<=0&&(e=t=n=NaN),new He(e,t,n,r)}function zx(e){return e instanceof ss||(e=Hn(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function Eu(e,t,n,r){return arguments.length===1?zx(e):new He(e,t,n,r??1)}function He(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}of(He,Eu,vy(ss,{brighter(e){return e=e==null?La:Math.pow(La,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hi:Math.pow(Hi,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(Fn(this.r),Fn(this.g),Fn(this.b),Da(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fh,formatHex:fh,formatHex8:Bx,formatRgb:dh,toString:dh}));function fh(){return`#${Tn(this.r)}${Tn(this.g)}${Tn(this.b)}`}function Bx(){return`#${Tn(this.r)}${Tn(this.g)}${Tn(this.b)}${Tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function dh(){const e=Da(this.opacity);return`${e===1?"rgb(":"rgba("}${Fn(this.r)}, ${Fn(this.g)}, ${Fn(this.b)}${e===1?")":`, ${e})`}`}function Da(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tn(e){return e=Fn(e),(e<16?"0":"")+e.toString(16)}function hh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wt(e,t,n,r)}function wy(e){if(e instanceof wt)return new wt(e.h,e.s,e.l,e.opacity);if(e instanceof ss||(e=Hn(e)),!e)return new wt;if(e instanceof wt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new wt(a,o,l,e.opacity)}function Ux(e,t,n,r){return arguments.length===1?wy(e):new wt(e,t,n,r??1)}function wt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}of(wt,Ux,vy(ss,{brighter(e){return e=e==null?La:Math.pow(La,e),new wt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hi:Math.pow(Hi,e),new wt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new He(cl(e>=240?e-240:e+120,i,r),cl(e,i,r),cl(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new wt(mh(this.h),Fs(this.s),Fs(this.l),Da(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Da(this.opacity);return`${e===1?"hsl(":"hsla("}${mh(this.h)}, ${Fs(this.s)*100}%, ${Fs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mh(e){return e=(e||0)%360,e<0?e+360:e}function Fs(e){return Math.max(0,Math.min(1,e||0))}function cl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lf=e=>()=>e;function jx(e,t){return function(n){return e+n*t}}function Hx(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Vx(e){return(e=+e)==1?_y:function(t,n){return n-t?Hx(t,n,e):lf(isNaN(t)?n:t)}}function _y(e,t){var n=t-e;return n?jx(e,n):lf(isNaN(e)?t:e)}const za=function e(t){var n=Vx(t);function r(i,s){var a=n((i=Eu(i)).r,(s=Eu(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=_y(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function Wx(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Xx(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qx(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=uf(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Kx(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function vt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Jx(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=uf(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Su=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fl=new RegExp(Su.source,"g");function Yx(e){return function(){return e}}function Gx(e){return function(t){return e(t)+""}}function xy(e,t){var n=Su.lastIndex=fl.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=Su.exec(e))&&(i=fl.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:vt(r,i)})),n=fl.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Gx(l[0].x):Yx(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)o[(d=l[f]).i]=d.x(u);return o.join("")})}function uf(e,t){var n=typeof t,r;return t==null||n==="boolean"?lf(t):(n==="number"?vt:n==="string"?(r=Hn(t))?(t=r,za):xy:t instanceof Hn?za:t instanceof Date?Kx:Xx(t)?Wx:Array.isArray(t)?Qx:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Jx:vt)(e,t)}function qx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ph=180/Math.PI,ku={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ey(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ph,skewX:Math.atan(l)*ph,scaleX:a,scaleY:o}}var Ls;function Zx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ku:Ey(t.a,t.b,t.c,t.d,t.e,t.f)}function eE(e){return e==null||(Ls||(Ls=document.createElementNS("http://www.w3.org/2000/svg","g")),Ls.setAttribute("transform",e),!(e=Ls.transform.baseVal.consolidate()))?ku:(e=e.matrix,Ey(e.a,e.b,e.c,e.d,e.e,e.f))}function Sy(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,f,d,c,m,w){if(u!==d||f!==c){var v=m.push("translate(",null,t,null,n);w.push({i:v-4,x:vt(u,d)},{i:v-2,x:vt(f,c)})}else(d||c)&&m.push("translate("+d+t+c+n)}function a(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(i(d)+"rotate(",null,r)-2,x:vt(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function o(u,f,d,c){u!==f?c.push({i:d.push(i(d)+"skewX(",null,r)-2,x:vt(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,c,m,w){if(u!==d||f!==c){var v=m.push(i(m)+"scale(",null,",",null,")");w.push({i:v-4,x:vt(u,d)},{i:v-2,x:vt(f,c)})}else(d!==1||c!==1)&&m.push(i(m)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,d,c),a(u.rotate,f.rotate,d,c),o(u.skewX,f.skewX,d,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(m){for(var w=-1,v=c.length,x;++w<v;)d[(x=c[w]).i]=x.x(m);return d.join("")}}}var tE=Sy(Zx,"px, ","px)","deg)"),nE=Sy(eE,", ",")",")"),Tr=0,ui=0,Gr=0,ky=1e3,Ba,ci,Ua=0,Vn=0,xo=0,Wi=typeof performance=="object"&&performance.now?performance:Date,Cy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cf(){return Vn||(Cy(rE),Vn=Wi.now()+xo)}function rE(){Vn=0}function ja(){this._call=this._time=this._next=null}ja.prototype=ff.prototype={constructor:ja,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?cf():+n)+(t==null?0:+t),!this._next&&ci!==this&&(ci?ci._next=this:Ba=this,ci=this),this._call=e,this._time=n,Cu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cu())}};function ff(e,t,n){var r=new ja;return r.restart(e,t,n),r}function iE(){cf(),++Tr;for(var e=Ba,t;e;)(t=Vn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tr}function gh(){Vn=(Ua=Wi.now())+xo,Tr=ui=0;try{iE()}finally{Tr=0,aE(),Vn=0}}function sE(){var e=Wi.now(),t=e-Ua;t>ky&&(xo-=t,Ua=e)}function aE(){for(var e,t=Ba,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ba=n);ci=e,Cu(r)}function Cu(e){if(!Tr){ui&&(ui=clearTimeout(ui));var t=e-Vn;t>24?(e<1/0&&(ui=setTimeout(gh,e-Wi.now()-xo)),Gr&&(Gr=clearInterval(Gr))):(Gr||(Ua=Wi.now(),Gr=setInterval(sE,ky)),Tr=1,Cy(gh))}}function yh(e,t,n){var r=new ja;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var oE=wo("start","end","cancel","interrupt"),lE=[],Ny=0,vh=1,Nu=2,sa=3,wh=4,Au=5,aa=6;function Eo(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;uE(e,n,{name:t,index:r,group:i,on:oE,tween:lE,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ny})}function df(e,t){var n=kt(e,t);if(n.state>Ny)throw new Error("too late; already scheduled");return n}function Ft(e,t){var n=kt(e,t);if(n.state>sa)throw new Error("too late; already running");return n}function kt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ff(s,0,n.time);function s(u){n.state=vh,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,d,c,m;if(n.state!==vh)return l();for(f in r)if(m=r[f],m.name===n.name){if(m.state===sa)return yh(a);m.state===wh?(m.state=aa,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[f]):+f<t&&(m.state=aa,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[f])}if(yh(function(){n.state===sa&&(n.state=wh,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Nu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nu){for(n.state=sa,i=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Au,1),d=-1,c=i.length;++d<c;)i[d].call(e,f);n.state===Au&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=aa,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function cE(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>Nu&&r.state<Au,r.state=aa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function fE(e){return this.each(function(){cE(this,e)})}function dE(e,t){var n,r;return function(){var i=Ft(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function hE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ft(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function mE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=kt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?dE:hE)(n,e,t))}function hf(e,t,n){var r=e._id;return e.each(function(){var i=Ft(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return kt(i,r).value[t]}}function Ay(e,t){var n;return(typeof t=="number"?vt:t instanceof Hn?za:(n=Hn(t))?(t=n,za):xy)(e,t)}function pE(e){return function(){this.removeAttribute(e)}}function gE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yE(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function vE(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function wE(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function _E(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function xE(e,t){var n=_o(e),r=n==="transform"?nE:Ay;return this.attrTween(e,typeof t=="function"?(n.local?_E:wE)(n,r,hf(this,"attr."+e,t)):t==null?(n.local?gE:pE)(n):(n.local?vE:yE)(n,r,t))}function EE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kE(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&SE(e,s)),n}return i._value=t,i}function CE(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&EE(e,s)),n}return i._value=t,i}function NE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_o(e);return this.tween(n,(r.local?kE:CE)(r,t))}function AE(e,t){return function(){df(this,e).delay=+t.apply(this,arguments)}}function RE(e,t){return t=+t,function(){df(this,e).delay=t}}function PE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AE:RE)(t,e)):kt(this.node(),t).delay}function ME(e,t){return function(){Ft(this,e).duration=+t.apply(this,arguments)}}function IE(e,t){return t=+t,function(){Ft(this,e).duration=t}}function $E(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ME:IE)(t,e)):kt(this.node(),t).duration}function TE(e,t){if(typeof t!="function")throw new Error;return function(){Ft(this,e).ease=t}}function bE(e){var t=this._id;return arguments.length?this.each(TE(t,e)):kt(this.node(),t).ease}function OE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ft(this,e).ease=n}}function FE(e){if(typeof e!="function")throw new Error;return this.each(OE(this._id,e))}function LE(e){typeof e!="function"&&(e=ly(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Jt(r,this._parents,this._name,this._id)}function DE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],u=n[o],f=l.length,d=a[o]=new Array(f),c,m=0;m<f;++m)(c=l[m]||u[m])&&(d[m]=c);for(;o<r;++o)a[o]=t[o];return new Jt(a,this._parents,this._name,this._id)}function zE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function BE(e,t,n){var r,i,s=zE(t)?df:Ft;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function UE(e,t){var n=this._id;return arguments.length<2?kt(this.node(),n).on.on(e):this.each(BE(n,e,t))}function jE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function HE(){return this.on("end.remove",jE(this._id))}function VE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sf(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,u=s[a]=new Array(l),f,d,c=0;c<l;++c)(f=o[c])&&(d=e.call(f,f.__data__,c,o))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,Eo(u[c],t,n,c,u,kt(f,n)));return new Jt(s,this._parents,t,n)}function WE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oy(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],u=l.length,f,d=0;d<u;++d)if(f=l[d]){for(var c=e.call(f,f.__data__,d,l),m,w=kt(f,n),v=0,x=c.length;v<x;++v)(m=c[v])&&Eo(m,t,n,v,c,w);s.push(c),a.push(f)}return new Jt(s,a,t,n)}var XE=is.prototype.constructor;function QE(){return new XE(this._groups,this._parents)}function KE(e,t){var n,r,i;return function(){var s=$r(this,e),a=(this.style.removeProperty(e),$r(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Ry(e){return function(){this.style.removeProperty(e)}}function JE(e,t,n){var r,i=n+"",s;return function(){var a=$r(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function YE(e,t,n){var r,i,s;return function(){var a=$r(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),$r(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function GE(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=Ft(this,e),u=l.on,f=l.value[s]==null?o||(o=Ry(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),l.on=r}}function qE(e,t,n){var r=(e+="")=="transform"?tE:Ay;return t==null?this.styleTween(e,KE(e,r)).on("end.style."+e,Ry(e)):typeof t=="function"?this.styleTween(e,YE(e,r,hf(this,"style."+e,t))).each(GE(this._id,e)):this.styleTween(e,JE(e,r,t),n).on("end.style."+e,null)}function ZE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function eS(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&ZE(e,a,n)),r}return s._value=t,s}function tS(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,eS(e,t,n??""))}function nS(e){return function(){this.textContent=e}}function rS(e){return function(){var t=e(this);this.textContent=t??""}}function iS(e){return this.tween("text",typeof e=="function"?rS(hf(this,"text",e)):nS(e==null?"":e+""))}function sS(e){return function(t){this.textContent=e.call(this,t)}}function aS(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&sS(i)),t}return r._value=e,r}function oS(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,aS(e))}function lS(){for(var e=this._name,t=this._id,n=Py(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var f=kt(l,t);Eo(l,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Jt(r,this._parents,e,n)}function uS(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var u=Ft(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),i===0&&s()})}var cS=0;function Jt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Py(){return++cS}var Dt=is.prototype;Jt.prototype={constructor:Jt,select:VE,selectAll:WE,selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:LE,merge:DE,selection:QE,transition:lS,call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:UE,attr:xE,attrTween:NE,style:qE,styleTween:tS,text:iS,textTween:oS,remove:HE,tween:mE,delay:PE,duration:$E,ease:bE,easeVarying:FE,end:uS,[Symbol.iterator]:Dt[Symbol.iterator]};function fS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dS={time:null,delay:0,duration:250,ease:fS};function hS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mS(e){var t,n;e instanceof Jt?(t=e._id,e=e._name):(t=Py(),(n=dS).time=cf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&Eo(l,e,t,u,a,n||hS(l,t));return new Jt(r,this._parents,e,t)}is.prototype.interrupt=fE;is.prototype.transition=mS;function pS(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,o,l=0,u=0;for(s=0;s<a;++s)o=n[s],l+=o.x,u+=o.y;for(l=(l/a-e)*r,u=(u/a-t)*r,s=0;s<a;++s)o=n[s],o.x-=l,o.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function gS(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return My(this.cover(t,n),t,n,e)}function My(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},o=e._x0,l=e._y0,u=e._x1,f=e._y1,d,c,m,w,v,x,p,h;if(!s)return e._root=a,e;for(;s.length;)if((v=t>=(d=(o+u)/2))?o=d:u=d,(x=n>=(c=(l+f)/2))?l=c:f=c,i=s,!(s=s[p=x<<1|v]))return i[p]=a,e;if(m=+e._x.call(null,s.data),w=+e._y.call(null,s.data),t===m&&n===w)return a.next=s,i?i[p]=a:e._root=a,e;do i=i?i[p]=new Array(4):e._root=new Array(4),(v=t>=(d=(o+u)/2))?o=d:u=d,(x=n>=(c=(l+f)/2))?l=c:f=c;while((p=x<<1|v)===(h=(w>=c)<<1|m>=d));return i[h]=s,i[p]=a,e}function yS(e){var t,n,r=e.length,i,s,a=new Array(r),o=new Array(r),l=1/0,u=1/0,f=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,o[n]=s,i<l&&(l=i),i>f&&(f=i),s<u&&(u=s),s>d&&(d=s));if(l>f||u>d)return this;for(this.cover(l,u).cover(f,d),n=0;n<r;++n)My(this,a[n],o[n],e[n]);return this}function vS(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,o=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function wS(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function _S(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Oe(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function xS(e,t,n){var r,i=this._x0,s=this._y0,a,o,l,u,f=this._x1,d=this._y1,c=[],m=this._root,w,v;for(m&&c.push(new Oe(m,i,s,f,d)),n==null?n=1/0:(i=e-n,s=t-n,f=e+n,d=t+n,n*=n);w=c.pop();)if(!(!(m=w.node)||(a=w.x0)>f||(o=w.y0)>d||(l=w.x1)<i||(u=w.y1)<s))if(m.length){var x=(a+l)/2,p=(o+u)/2;c.push(new Oe(m[3],x,p,l,u),new Oe(m[2],a,p,x,u),new Oe(m[1],x,o,l,p),new Oe(m[0],a,o,x,p)),(v=(t>=p)<<1|e>=x)&&(w=c[c.length-1],c[c.length-1]=c[c.length-1-v],c[c.length-1-v]=w)}else{var h=e-+this._x.call(null,m.data),y=t-+this._y.call(null,m.data),g=h*h+y*y;if(g<n){var E=Math.sqrt(n=g);i=e-E,s=t-E,f=e+E,d=t+E,r=m.data}}return r}function ES(e){if(isNaN(f=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,f,d,c,m,w,v,x,p;if(!n)return this;if(n.length)for(;;){if((w=f>=(c=(a+l)/2))?a=c:l=c,(v=d>=(m=(o+u)/2))?o=m:u=m,t=n,!(n=n[x=v<<1|w]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(r=t,p=x)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[x]=s:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[p]=n:this._root=n),this):(this._root=s,this)}function SS(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function kS(){return this._root}function CS(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function NS(e){var t=[],n,r=this._root,i,s,a,o,l;for(r&&t.push(new Oe(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var u=(s+o)/2,f=(a+l)/2;(i=r[3])&&t.push(new Oe(i,u,f,o,l)),(i=r[2])&&t.push(new Oe(i,s,f,u,l)),(i=r[1])&&t.push(new Oe(i,u,a,o,f)),(i=r[0])&&t.push(new Oe(i,s,a,u,f))}return this}function AS(e){var t=[],n=[],r;for(this._root&&t.push(new Oe(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,u=r.y1,f=(a+l)/2,d=(o+u)/2;(s=i[0])&&t.push(new Oe(s,a,o,f,d)),(s=i[1])&&t.push(new Oe(s,f,o,l,d)),(s=i[2])&&t.push(new Oe(s,a,d,f,u)),(s=i[3])&&t.push(new Oe(s,f,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function RS(e){return e[0]}function PS(e){return arguments.length?(this._x=e,this):this._x}function MS(e){return e[1]}function IS(e){return arguments.length?(this._y=e,this):this._y}function mf(e,t,n){var r=new pf(t??RS,n??MS,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function pf(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _h(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ze=mf.prototype=pf.prototype;ze.copy=function(){var e=new pf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_h(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_h(r));return e};ze.add=gS;ze.addAll=yS;ze.cover=vS;ze.data=wS;ze.extent=_S;ze.find=xS;ze.remove=ES;ze.removeAll=SS;ze.root=kS;ze.size=CS;ze.visit=NS;ze.visitAfter=AS;ze.x=PS;ze.y=IS;function Ln(e){return function(){return e}}function un(e){return(e()-.5)*1e-6}function $S(e){return e.x+e.vx}function TS(e){return e.y+e.vy}function bS(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ln(e==null?1:+e));function a(){for(var u,f=t.length,d,c,m,w,v,x,p=0;p<s;++p)for(d=mf(t,$S,TS).visitAfter(o),u=0;u<f;++u)c=t[u],v=n[c.index],x=v*v,m=c.x+c.vx,w=c.y+c.vy,d.visit(h);function h(y,g,E,C,A){var S=y.data,$=y.r,k=v+$;if(S){if(S.index>c.index){var N=m-S.x-S.vx,z=w-S.y-S.vy,B=N*N+z*z;B<k*k&&(N===0&&(N=un(r),B+=N*N),z===0&&(z=un(r),B+=z*z),B=(k-(B=Math.sqrt(B)))/B*i,c.vx+=(N*=B)*(k=($*=$)/(x+$)),c.vy+=(z*=B)*k,S.vx-=N*(k=1-k),S.vy-=z*k)}return}return g>m+k||C<m-k||E>w+k||A<w-k}}function o(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,d;for(n=new Array(f),u=0;u<f;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,f){t=u,r=f,l()},a.iterations=function(u){return arguments.length?(s=+u,a):s},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ln(+u),l(),a):e},a}function OS(e){return e.index}function xh(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function FS(e){var t=OS,n=d,r,i=Ln(30),s,a,o,l,u,f=1;e==null&&(e=[]);function d(x){return 1/Math.min(o[x.source.index],o[x.target.index])}function c(x){for(var p=0,h=e.length;p<f;++p)for(var y=0,g,E,C,A,S,$,k;y<h;++y)g=e[y],E=g.source,C=g.target,A=C.x+C.vx-E.x-E.vx||un(u),S=C.y+C.vy-E.y-E.vy||un(u),$=Math.sqrt(A*A+S*S),$=($-s[y])/$*x*r[y],A*=$,S*=$,C.vx-=A*(k=l[y]),C.vy-=S*k,E.vx+=A*(k=1-k),E.vy+=S*k}function m(){if(a){var x,p=a.length,h=e.length,y=new Map(a.map((E,C)=>[t(E,C,a),E])),g;for(x=0,o=new Array(p);x<h;++x)g=e[x],g.index=x,typeof g.source!="object"&&(g.source=xh(y,g.source)),typeof g.target!="object"&&(g.target=xh(y,g.target)),o[g.source.index]=(o[g.source.index]||0)+1,o[g.target.index]=(o[g.target.index]||0)+1;for(x=0,l=new Array(h);x<h;++x)g=e[x],l[x]=o[g.source.index]/(o[g.source.index]+o[g.target.index]);r=new Array(h),w(),s=new Array(h),v()}}function w(){if(a)for(var x=0,p=e.length;x<p;++x)r[x]=+n(e[x],x,e)}function v(){if(a)for(var x=0,p=e.length;x<p;++x)s[x]=+i(e[x],x,e)}return c.initialize=function(x,p){a=x,u=p,m()},c.links=function(x){return arguments.length?(e=x,m(),c):e},c.id=function(x){return arguments.length?(t=x,c):t},c.iterations=function(x){return arguments.length?(f=+x,c):f},c.strength=function(x){return arguments.length?(n=typeof x=="function"?x:Ln(+x),w(),c):n},c.distance=function(x){return arguments.length?(i=typeof x=="function"?x:Ln(+x),v(),c):i},c}const LS=1664525,DS=1013904223,Eh=4294967296;function zS(){let e=1;return()=>(e=(LS*e+DS)%Eh)/Eh}function BS(e){return e.x}function US(e){return e.y}var jS=10,HS=Math.PI*(3-Math.sqrt(5));function VS(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,l=ff(d),u=wo("tick","end"),f=zS();e==null&&(e=[]);function d(){c(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function c(v){var x,p=e.length,h;v===void 0&&(v=1);for(var y=0;y<v;++y)for(n+=(s-n)*i,o.forEach(function(g){g(n)}),x=0;x<p;++x)h=e[x],h.fx==null?h.x+=h.vx*=a:(h.x=h.fx,h.vx=0),h.fy==null?h.y+=h.vy*=a:(h.y=h.fy,h.vy=0);return t}function m(){for(var v=0,x=e.length,p;v<x;++v){if(p=e[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var h=jS*Math.sqrt(.5+v),y=v*HS;p.x=h*Math.cos(y),p.y=h*Math.sin(y)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function w(v){return v.initialize&&v.initialize(e,f),v}return m(),t={tick:c,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(v){return arguments.length?(e=v,m(),o.forEach(w),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(s=+v,t):s},velocityDecay:function(v){return arguments.length?(a=1-v,t):1-a},randomSource:function(v){return arguments.length?(f=v,o.forEach(w),t):f},force:function(v,x){return arguments.length>1?(x==null?o.delete(v):o.set(v,w(x)),t):o.get(v)},find:function(v,x,p){var h=0,y=e.length,g,E,C,A,S;for(p==null?p=1/0:p*=p,h=0;h<y;++h)A=e[h],g=v-A.x,E=x-A.y,C=g*g+E*E,C<p&&(S=A,p=C);return S},on:function(v,x){return arguments.length>1?(u.on(v,x),t):u.on(v)}}}function WS(){var e,t,n,r,i=Ln(-30),s,a=1,o=1/0,l=.81;function u(m){var w,v=e.length,x=mf(e,BS,US).visitAfter(d);for(r=m,w=0;w<v;++w)t=e[w],x.visit(c)}function f(){if(e){var m,w=e.length,v;for(s=new Array(w),m=0;m<w;++m)v=e[m],s[v.index]=+i(v,m,e)}}function d(m){var w=0,v,x,p=0,h,y,g;if(m.length){for(h=y=g=0;g<4;++g)(v=m[g])&&(x=Math.abs(v.value))&&(w+=v.value,p+=x,h+=x*v.x,y+=x*v.y);m.x=h/p,m.y=y/p}else{v=m,v.x=v.data.x,v.y=v.data.y;do w+=s[v.data.index];while(v=v.next)}m.value=w}function c(m,w,v,x){if(!m.value)return!0;var p=m.x-t.x,h=m.y-t.y,y=x-w,g=p*p+h*h;if(y*y/l<g)return g<o&&(p===0&&(p=un(n),g+=p*p),h===0&&(h=un(n),g+=h*h),g<a&&(g=Math.sqrt(a*g)),t.vx+=p*m.value*r/g,t.vy+=h*m.value*r/g),!0;if(m.length||g>=o)return;(m.data!==t||m.next)&&(p===0&&(p=un(n),g+=p*p),h===0&&(h=un(n),g+=h*h),g<a&&(g=Math.sqrt(a*g)));do m.data!==t&&(y=s[m.data.index]*r/g,t.vx+=p*y,t.vy+=h*y);while(m=m.next)}return u.initialize=function(m,w){e=m,n=w,f()},u.strength=function(m){return arguments.length?(i=typeof m=="function"?m:Ln(+m),f(),u):i},u.distanceMin=function(m){return arguments.length?(a=m*m,u):Math.sqrt(a)},u.distanceMax=function(m){return arguments.length?(o=m*m,u):Math.sqrt(o)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function XS(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ha(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function br(e){return e=Ha(Math.abs(e)),e?e[1]:NaN}function QS(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function KS(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var JS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Va(e){if(!(t=JS.exec(e)))throw new Error("invalid format: "+e);var t;return new gf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Va.prototype=gf.prototype;function gf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YS(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Iy;function GS(e,t){var n=Ha(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Iy=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ha(e,Math.max(0,t+s-1))[0]}function Sh(e,t){var n=Ha(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XS,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sh(e*100,t),r:Sh,s:GS,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ch(e){return e}var Nh=Array.prototype.map,Ah=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qS(e){var t=e.grouping===void 0||e.thousands===void 0?Ch:QS(Nh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ch:KS(Nh.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Va(d);var c=d.fill,m=d.align,w=d.sign,v=d.symbol,x=d.zero,p=d.width,h=d.comma,y=d.precision,g=d.trim,E=d.type;E==="n"?(h=!0,E="g"):kh[E]||(y===void 0&&(y=12),g=!0,E="g"),(x||c==="0"&&m==="=")&&(x=!0,c="0",m="=");var C=v==="$"?n:v==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",A=v==="$"?r:/[%p]/.test(E)?a:"",S=kh[E],$=/[defgprs%]/.test(E);y=y===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function k(N){var z=C,B=A,G,ie,M;if(E==="c")B=S(N)+B,N="";else{N=+N;var b=N<0||1/N<0;if(N=isNaN(N)?l:S(Math.abs(N),y),g&&(N=YS(N)),b&&+N==0&&w!=="+"&&(b=!1),z=(b?w==="("?w:o:w==="-"||w==="("?"":w)+z,B=(E==="s"?Ah[8+Iy/3]:"")+B+(b&&w==="("?")":""),$){for(G=-1,ie=N.length;++G<ie;)if(M=N.charCodeAt(G),48>M||M>57){B=(M===46?i+N.slice(G+1):N.slice(G))+B,N=N.slice(0,G);break}}}h&&!x&&(N=t(N,1/0));var I=z.length+N.length+B.length,O=I<p?new Array(p-I+1).join(c):"";switch(h&&x&&(N=t(O+N,O.length?p-B.length:1/0),O=""),m){case"<":N=z+N+B+O;break;case"=":N=z+O+N+B;break;case"^":N=O.slice(0,I=O.length>>1)+z+N+B+O.slice(I);break;default:N=O+z+N+B;break}return s(N)}return k.toString=function(){return d+""},k}function f(d,c){var m=u((d=Va(d),d.type="f",d)),w=Math.max(-8,Math.min(8,Math.floor(br(c)/3)))*3,v=Math.pow(10,-w),x=Ah[8+w/3];return function(p){return m(v*p)+x}}return{format:u,formatPrefix:f}}var Ds,$y,Ty;ZS({thousands:",",grouping:[3],currency:["$",""]});function ZS(e){return Ds=qS(e),$y=Ds.format,Ty=Ds.formatPrefix,Ds}function ek(e){return Math.max(0,-br(Math.abs(e)))}function tk(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(br(t)/3)))*3-br(Math.abs(e)))}function nk(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,br(t)-br(e))+1}function yf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Rh=Symbol("implicit");function by(){var e=new qd,t=[],n=[],r=Rh;function i(s){let a=e.get(s);if(a===void 0){if(r!==Rh)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new qd;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return by(t,n).unknown(r)},yf.apply(i,arguments),i}function Ru(){var e=by().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var c=t().length,m=i<r,w=m?i:r,v=m?r:i;s=(v-w)/Math.max(1,c-l+u*2),o&&(s=Math.floor(s)),w+=(v-w-s*(c-l))*f,a=s*(1-l),o&&(w=Math.round(w),a=Math.round(a));var x=T_(c).map(function(p){return w+s*p});return n(m?x.reverse():x)}return e.domain=function(c){return arguments.length?(t(c),d()):t()},e.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(c){return arguments.length?(o=!!c,d()):o},e.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),d()):l},e.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),d()):l},e.paddingOuter=function(c){return arguments.length?(u=+c,d()):u},e.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),d()):f},e.copy=function(){return Ru(t(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(f)},yf.apply(d(),arguments)}function rk(e){return function(){return e}}function ik(e){return+e}var Ph=[0,1];function hr(e){return e}function Pu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rk(isNaN(t)?NaN:.5)}function sk(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ak(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=Pu(i,r),s=n(a,s)):(r=Pu(r,i),s=n(s,a)),function(o){return s(r(o))}}function ok(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Pu(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=S_(e,o,1,r)-1;return s[l](i[l](o))}}function lk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uk(){var e=Ph,t=Ph,n=uf,r,i,s,a=hr,o,l,u;function f(){var c=Math.min(e.length,t.length);return a!==hr&&(a=sk(e[0],e[c-1])),o=c>2?ok:ak,l=u=null,d}function d(c){return c==null||isNaN(c=+c)?s:(l||(l=o(e.map(r),t,n)))(r(a(c)))}return d.invert=function(c){return a(i((u||(u=o(t,e.map(r),vt)))(c)))},d.domain=function(c){return arguments.length?(e=Array.from(c,ik),f()):e.slice()},d.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},d.rangeRound=function(c){return t=Array.from(c),n=qx,f()},d.clamp=function(c){return arguments.length?(a=c?!0:hr,f()):a!==hr},d.interpolate=function(c){return arguments.length?(n=c,f()):n},d.unknown=function(c){return arguments.length?(s=c,d):s},function(c,m){return r=c,i=m,f()}}function ck(){return uk()(hr,hr)}function fk(e,t,n,r){var i=I_(e,t,n),s;switch(r=Va(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=tk(i,a))&&(r.precision=s),Ty(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=nk(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ek(i))&&(r.precision=s-(r.type==="%")*2);break}}return $y(r)}function dk(e){var t=e.domain;return e.ticks=function(n){var r=t();return M_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return fk(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,f=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);f-- >0;){if(u=vu(a,o,n),u===l)return r[i]=a,r[s]=o,t(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Mu(){var e=ck();return e.copy=function(){return lk(e,Mu())},yf.apply(e,arguments),dk(e)}function fi(e,t,n){this.k=e,this.x=t,this.y=n}fi.prototype={constructor:fi,scale:function(e){return e===1?this:new fi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};fi.prototype;const hk=()=>{const{agents:e,messages:t,getRelationship:n}=rs(),[r,i]=W.useState("mindmap"),s=W.useRef(null),a=W.useRef(null),o=W.useRef(null);W.useEffect(()=>{if(!s.current||e.length<2||r!=="mindmap")return;Mt(s.current).selectAll("*").remove();const c=s.current.clientWidth,m=400,w=Mt(s.current).append("svg").attr("width",c).attr("height",m).append("g").attr("transform",`translate(${c/2}, ${m/2})`),v=e.map(S=>({id:S.id,name:S.name,type:l(S),radius:30})),x=[];for(let S=0;S<e.length;S++)for(let $=S+1;$<e.length;$++){const k=e[S],N=e[$],z=n(k.id,N.id);z!==0&&x.push({source:k.id,target:N.id,value:z,type:f(z)})}const p=VS(v).force("link",FS(x).id(S=>S.id).distance(150)).force("charge",WS().strength(-300)).force("center",pS(0,0)).force("collision",bS().radius(S=>S.radius+10)),h=w.append("g").selectAll("line").data(x).enter().append("line").attr("stroke-width",S=>Math.abs(S.value)/20+1).attr("stroke",S=>d(S.value)).attr("stroke-dasharray",S=>S.value<0?"5,5":null),y=w.append("g").selectAll("g").data(v).enter().append("g").call(Px().on("start",E).on("drag",C).on("end",A));y.append("circle").attr("r",S=>S.radius).attr("fill",S=>u(S.type)).attr("stroke","#fff").attr("stroke-width",2),y.append("text").text(S=>S.name).attr("text-anchor","middle").attr("dy",4).attr("fill","#fff").style("font-size","12px").style("font-weight","bold").style("pointer-events","none");const g=w.append("g").attr("class","link-labels").selectAll("text").data(x).enter().append("text").attr("dy",-5).attr("text-anchor","middle").attr("fill",S=>d(S.value)).style("font-size","12px").style("font-weight","bold").style("pointer-events","none").text(S=>S.value);p.on("tick",()=>{h.attr("x1",S=>S.source.x).attr("y1",S=>S.source.y).attr("x2",S=>S.target.x).attr("y2",S=>S.target.y),y.attr("transform",S=>`translate(${S.x}, ${S.y})`),g.attr("x",S=>S.source.x!==void 0&&S.target.x!==void 0?(S.source.x+S.target.x)/2:0).attr("y",S=>S.source.y!==void 0&&S.target.y!==void 0?(S.source.y+S.target.y)/2:0)});function E(S,$){S.active||p.alphaTarget(.3).restart(),$.fx=$.x,$.fy=$.y}function C(S,$){$.fx=S.x,$.fy=S.y}function A(S,$){S.active||p.alphaTarget(0),$.fx=null,$.fy=null}},[e,t,r]),W.useEffect(()=>{if(!a.current||e.length<2||r!=="interactions")return;Mt(a.current).selectAll("*").remove();const c=a.current.clientWidth,m=400,w={top:40,right:30,bottom:60,left:60},v=c-w.left-w.right,x=m-w.top-w.bottom,p={};e.forEach(k=>{p[k.id]={},e.forEach(N=>{k.id!==N.id&&(p[k.id][N.id]=0)})}),t.forEach(k=>{p[k.senderId]&&p[k.senderId][k.receiverId]!==void 0&&p[k.senderId][k.receiverId]++});const h=[];e.forEach(k=>{e.forEach(N=>{k.id!==N.id&&h.push({source:k.name,target:N.name,count:p[k.id][N.id]})})}),h.sort((k,N)=>N.count-k.count);const y=h.slice(0,15),g=Mt(a.current).append("svg").attr("width",c).attr("height",m),E=g.append("g").attr("transform",`translate(${w.left}, ${w.top})`),C=Ru().domain(y.map(k=>`${k.source}  ${k.target}`)).range([0,v]).padding(.2),A=Mu().domain([0,eh(y,k=>k.count)*1.1||1]).range([x,0]);E.selectAll(".bar").data(y).enter().append("rect").attr("class","bar").attr("x",k=>C(`${k.source}  ${k.target}`)).attr("y",k=>A(k.count)).attr("width",C.bandwidth()).attr("height",k=>x-A(k.count)).attr("fill","#6366f1"),E.selectAll(".label").data(y).enter().append("text").attr("class","label").attr("x",k=>C(`${k.source}  ${k.target}`)+C.bandwidth()/2).attr("y",k=>A(k.count)-5).attr("text-anchor","middle").text(k=>k.count).attr("fill","#fff").style("font-size","12px");const S=nh(C),$=rh(A);E.append("g").attr("transform",`translate(0, ${x})`).call(S).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").style("font-size","10px"),E.append("g").call($),g.append("text").attr("x",c/2).attr("y",20).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Top Agent Interactions"),g.append("text").attr("x",c/2).attr("y",m-5).attr("text-anchor","middle").style("font-size","12px").text("Agent Pairs"),g.append("text").attr("transform","rotate(-90)").attr("x",-m/2).attr("y",15).attr("text-anchor","middle").style("font-size","12px").text("Interaction Count")},[e,t,r]),W.useEffect(()=>{if(!o.current||e.length<2||r!=="relationships")return;Mt(o.current).selectAll("*").remove();const c=o.current.clientWidth,m=400,w={top:40,right:30,bottom:60,left:60},v=c-w.left-w.right,x=m-w.top-w.bottom,p=[];e.forEach(N=>{e.forEach(z=>{if(N.id!==z.id){const B=n(N.id,z.id);p.push({source:N.name,target:z.name,value:B})}})}),p.sort((N,z)=>Math.abs(z.value)-Math.abs(N.value));const h=p.slice(0,15),y=Mt(o.current).append("svg").attr("width",c).attr("height",m),g=y.append("g").attr("transform",`translate(${w.left}, ${w.top})`),E=Ru().domain(h.map(N=>`${N.source} & ${N.target}`)).range([0,v]).padding(.2),C=$_(h,N=>N.value)||-10,A=eh(h,N=>N.value)||10,S=Mu().domain([C<0?C*1.1:-10,A*1.1]).range([x,0]);g.selectAll(".bar").data(h).enter().append("rect").attr("class","bar").attr("x",N=>E(`${N.source} & ${N.target}`)).attr("y",N=>N.value>=0?S(N.value):S(0)).attr("width",E.bandwidth()).attr("height",N=>Math.abs(S(N.value)-S(0))).attr("fill",N=>d(N.value)),g.selectAll(".label").data(h).enter().append("text").attr("class","label").attr("x",N=>E(`${N.source} & ${N.target}`)+E.bandwidth()/2).attr("y",N=>N.value>=0?S(N.value)-5:S(N.value)+15).attr("text-anchor","middle").text(N=>N.value).attr("fill","#fff").style("font-size","12px"),g.append("line").attr("x1",0).attr("x2",v).attr("y1",S(0)).attr("y2",S(0)).attr("stroke","#fff").attr("stroke-width",1).attr("stroke-dasharray","4");const $=nh(E),k=rh(S);g.append("g").attr("transform",`translate(0, ${x})`).call($).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").style("font-size","10px"),g.append("g").call(k),y.append("text").attr("x",c/2).attr("y",20).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Agent Relationship Strengths"),y.append("text").attr("x",c/2).attr("y",m-5).attr("text-anchor","middle").style("font-size","12px").text("Agent Pairs"),y.append("text").attr("transform","rotate(-90)").attr("x",-m/2).attr("y",15).attr("text-anchor","middle").style("font-size","12px").text("Relationship Value")},[e,t,r]);const l=c=>{const m=c.traits.friendliness||.5,w=c.traits.aggression||.5;return m>.7&&w<.3?"friendly":w>.7?"aggressive":m<.3?"cold":"neutral"},u=c=>{switch(c){case"friendly":return"#4caf50";case"aggressive":return"#f44336";case"cold":return"#78909c";default:return"#9575cd"}},f=c=>c>50?"strong-positive":c>0?"positive":c>-50?"negative":"strong-negative",d=c=>c>75?"#2e7d32":c>50?"#4caf50":c>25?"#8bc34a":c>-25?"#9e9e9e":c>-50?"#ff9800":c>-75?"#f44336":"#c62828";return _.createElement("div",{className:"visualizer-container"},_.createElement("h2",null,"Agent Interaction Analysis"),_.createElement("div",{className:"visualizer-tabs"},_.createElement("button",{className:r==="mindmap"?"active":"",onClick:()=>i("mindmap")},"Relationship Mind Map"),_.createElement("button",{className:r==="interactions"?"active":"",onClick:()=>i("interactions")},"Interaction Frequency"),_.createElement("button",{className:r==="relationships"?"active":"",onClick:()=>i("relationships")},"Relationship Strengths")),_.createElement("div",{className:"visualizer-content"},r==="mindmap"&&_.createElement("div",{className:"mind-map-container"},e.length<2?_.createElement("div",{className:"empty-visualization"},_.createElement("p",null,"Add at least two agents and let them interact to see the relationship mind map.")):_.createElement("div",{className:"mind-map",ref:s}),_.createElement("div",{className:"legend"},_.createElement("h4",null,"Legend"),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-color",style:{backgroundColor:"#4caf50"}}),_.createElement("span",null,"Friendly Agent")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-color",style:{backgroundColor:"#f44336"}}),_.createElement("span",null,"Aggressive Agent")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-color",style:{backgroundColor:"#78909c"}}),_.createElement("span",null,"Cold Agent")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-color",style:{backgroundColor:"#9575cd"}}),_.createElement("span",null,"Neutral Agent")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-line",style:{backgroundColor:"#2e7d32"}}),_.createElement("span",null,"Strong Positive Relationship")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-line",style:{backgroundColor:"#f44336"}}),_.createElement("span",null,"Strong Negative Relationship")),_.createElement("div",{className:"legend-item"},_.createElement("div",{className:"legend-line dashed",style:{backgroundColor:"#f44336"}}),_.createElement("span",null,"Negative Relationship")))),r==="interactions"&&_.createElement("div",{className:"interaction-chart-container"},t.length===0?_.createElement("div",{className:"empty-visualization"},_.createElement("p",null,"Start the simulation and let agents interact to see the interaction frequency chart.")):_.createElement("div",{className:"interaction-chart",ref:a})),r==="relationships"&&_.createElement("div",{className:"relationship-chart-container"},e.length<2?_.createElement("div",{className:"empty-visualization"},_.createElement("p",null,"Add at least two agents and let them interact to see the relationship strength chart.")):_.createElement("div",{className:"relationship-chart",ref:o}))),_.createElement("div",{className:"visualization-info"},_.createElement("p",null,r==="mindmap"&&"This mind map shows relationships between agents. Drag nodes to rearrange. Line thickness represents relationship strength.",r==="interactions"&&"This chart shows the frequency of interactions between agent pairs, sorted by most frequent interactions.",r==="relationships"&&"This chart shows the strength of relationships between agent pairs, sorted by strongest relationships (positive or negative).")))};const mk=({isRunning:e})=>{const{agents:t,messages:n,addMessage:r,getRelationship:i,updateRelationship:s,getAgentsInLocation:a,updateAgent:o,hasOpenAI:l,generateAIMessage:u,generateAIResponse:f,rooms:d,activeRoom:c,setActiveRoom:m}=rs(),[w,v]=W.useState(!1);W.useRef(null);const x=W.useRef(null),p=W.useRef(null),h=W.useRef({}),y=W.useRef({}),g=W.useRef({}),E=W.useRef({}),C=a(c),A=d.find(P=>P.id===c)||d[0];W.useEffect(()=>{Object.keys(y.current).forEach(P=>{C.some(R=>R.id===P)||(delete y.current[P],delete g.current[P])}),E.current={}},[c,C]),W.useEffect(()=>{if(p.current&&C.length>0){const P=p.current.clientWidth,R=p.current.clientHeight;C.forEach(L=>{y.current[L.id]||(y.current[L.id]={x:Math.random()*(P-60),y:Math.random()*(R-60)},g.current[L.id]={x:Math.random()*4-2,y:Math.random()*4-2},E.current[L.id]={})})}},[C,p.current]),W.useEffect(()=>{let P;const R=()=>{if(!p.current||!e)return;const L=p.current.clientWidth,U=p.current.clientHeight;Object.keys(y.current).forEach(H=>{const X=y.current[H],Z=g.current[H];!X||!Z||(X.x+=Z.x,X.y+=Z.y,(X.x<=0||X.x>=L-60)&&(Z.x*=-1,X.x=Math.max(0,Math.min(X.x,L-60))),(X.y<=0||X.y>=U-60)&&(Z.y*=-1,X.y=Math.max(0,Math.min(X.y,U-60))),h.current[H]&&(h.current[H].style.left=`${X.x}px`,h.current[H].style.top=`${X.y}px`,Z.x>0?(h.current[H].classList.add("facing-right"),h.current[H].classList.remove("facing-left")):Z.x<0&&(h.current[H].classList.add("facing-left"),h.current[H].classList.remove("facing-right"))))}),S(),P=requestAnimationFrame(R)};return e&&(P=requestAnimationFrame(R)),()=>{P&&cancelAnimationFrame(P)}},[e,C]);const S=()=>{if(w)return;const P=Object.keys(y.current);for(let R=0;R<P.length;R++){const L=P[R],U=y.current[L];if(U)for(let H=R+1;H<P.length;H++){const X=P[H],Z=y.current[X];if(!Z)continue;const ct=U.x-Z.x,Re=U.y-Z.y;if(Math.sqrt(ct*ct+Re*Re)<60){const Gt=Date.now();E.current[L]||(E.current[L]={}),E.current[X]||(E.current[X]={});const Oy=E.current[L][X]||0;if(Gt-Oy>1e4){const So=t.find(jr=>jr.id===L),ko=t.find(jr=>jr.id===X);if(So&&ko){const jr=i(So.id,ko.id);$(So,ko,jr),E.current[L][X]=Gt,E.current[X][L]=Gt}}}}}};W.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[n]);const $=async(P,R,L)=>{v(!0);let U="neutral";const H=Math.random(),X=P.traits.aggression||.5,Z=R.traits.friendliness||.5;L<-50?H<X*.8?U="hostile":H<.9?U="neutral":U="friendly":L>50?H<Z*.8?U="friendly":H<.9?U="neutral":U="hostile":H<.3?U="hostile":H<.7?U="neutral":U="friendly";let ct="",Re=0;if(l)try{const ft=await u(P,R,U,L);ft?ct=ft:ct=z(P,R,U)}catch(ft){console.error("Error generating AI message:",ft),ct=z(P,R,U)}else ct=z(P,R,U);switch(U){case"friendly":Re=Math.floor(Math.random()*10)+5;break;case"hostile":Re=-1*(Math.floor(Math.random()*10)+5);break;default:Re=Math.floor(Math.random()*6)-2}N(P.id,ct,U),r({senderId:P.id,receiverId:R.id,content:ct,type:U}),s(P.id,R.id,L+Re),s(R.id,P.id,L+Re),setTimeout(()=>{k(R,P,U,L+Re)},2e3)},k=async(P,R,L,U)=>{let H="neutral";const X=Math.random(),Z=P.traits.aggression||.5,ct=P.traits.friendliness||.5;L==="friendly"?X<ct*.8?H="friendly":X<.9?H="neutral":H="hostile":L==="hostile"?X<Z*.8?H="hostile":X<.9?H="neutral":H="friendly":X<.3?H="hostile":X<.7?H="neutral":H="friendly";let Re="",ft=0;if(l)try{const Gt=await f(P,R,L,U);Gt?Re=Gt:Re=B(P,R,L,H)}catch(Gt){console.error("Error generating AI response:",Gt),Re=B(P,R,L,H)}else Re=B(P,R,L,H);switch(H){case"friendly":ft=Math.floor(Math.random()*8)+3;break;case"hostile":ft=-1*(Math.floor(Math.random()*8)+3);break;default:ft=Math.floor(Math.random()*4)-1}N(P.id,Re,H),r({senderId:P.id,receiverId:R.id,content:Re,type:H}),s(R.id,P.id,U+ft),s(P.id,R.id,U+ft),v(!1)},N=(P,R,L)=>{if(!h.current[P])return;const U=document.createElement("div");U.className=`speech-bubble ${L}`,U.textContent=R,h.current[P].appendChild(U),setTimeout(()=>{U.parentNode&&U.parentNode.removeChild(U)},4e3)},z=(P,R,L)=>{switch(L){case"friendly":return G(P,R);case"hostile":return ie(P,R);default:return M(P,R)}},B=(P,R,L,U)=>{switch(U){case"friendly":return b(P,R,L);case"hostile":return I(P,R,L);default:return O(P,R,L)}},G=(P,R)=>{const L=[`Hey ${R.name}, how are you doing today? You're looking great!`,`${R.name}! Just the person I wanted to see. I've been thinking about our last conversation.`,`I really appreciate your perspective, ${R.name}. You always have such insightful thoughts.`,`${R.name}, would you like to collaborate on something together? I value your input.`,`I brought you something I thought you might like, ${R.name}.`];return L[Math.floor(Math.random()*L.length)]},ie=(P,R)=>{const L=[`${R.name}, you're really getting on my nerves today.`,`I don't appreciate your attitude, ${R.name}. Back off.`,`${R.name}, stay out of my way if you know what's good for you.`,`You think you're so clever, don't you ${R.name}?`,`${R.name}, I've had enough of your nonsense!`];return L[Math.floor(Math.random()*L.length)]},M=(P,R)=>{const L=[`${R.name}, have you seen what's happening outside?`,`Excuse me, ${R.name}, do you have a moment to talk?`,`${R.name}, what do you think about the current situation?`,`I noticed you were busy, ${R.name}. Is now a good time?`,`${R.name}, I have a question about something.`];return L[Math.floor(Math.random()*L.length)]},b=(P,R,L)=>{const U={friendly:[`${R.name}, it's always a pleasure talking with you! I'm doing great, thanks for asking.`,`I've been looking forward to seeing you too, ${R.name}! What's on your mind?`,`That means a lot coming from you, ${R.name}. I value our friendship.`,`I'd love to collaborate with you, ${R.name}! What did you have in mind?`,`That's so thoughtful of you, ${R.name}! Thank you!`],hostile:[`Hey ${R.name}, I think we got off on the wrong foot. Can we start over?`,`I understand you're upset, ${R.name}, but I'd rather we try to get along.`,`${R.name}, despite our differences, I respect you and want to find common ground.`,`Let's not fight, ${R.name}. We can work this out peacefully.`,`${R.name}, I choose not to engage with negativity. How about we talk about something positive?`],neutral:[`It's good to see you, ${R.name}! What can I help you with?`,`${R.name}, I was just thinking about you! How have you been?`,`I'm always happy to chat with you, ${R.name}.`,`${R.name}, your timing is perfect. I was hoping to talk to you.`,`Yes, ${R.name}, I'd love to hear what's on your mind.`]},H=U[L]||U.neutral;return H[Math.floor(Math.random()*H.length)]},I=(P,R,L)=>{const U={friendly:[`${R.name}, spare me your fake friendliness. I know what you're really like.`,`Don't pretend to be nice to me, ${R.name}. I'm not falling for it.`,`${R.name}, I don't have time for your insincere pleasantries.`,`Collaborate with you, ${R.name}? I'd rather work alone.`,`I don't need your gifts or your friendship, ${R.name}.`],hostile:[`You want to start something, ${R.name}? Bring it on!`,`${R.name}, you're the one who should back off before this gets ugly.`,`That's rich coming from you, ${R.name}. You're the problem here.`,`${R.name}, you've crossed the line this time.`,`I've had enough of you too, ${R.name}. This ends now!`],neutral:[`${R.name}, I'm not interested in small talk with you.`,`No, ${R.name}, I don't have time for you right now.`,`${R.name}, why don't you mind your own business?`,`What I think is none of your concern, ${R.name}.`,`${R.name}, just leave me alone.`]},H=U[L]||U.neutral;return H[Math.floor(Math.random()*H.length)]},O=(P,R,L)=>{const U={friendly:[`Thanks, ${R.name}. I'm doing alright.`,`Hello ${R.name}. What did you want to talk about?`,`I appreciate that, ${R.name}.`,`Perhaps, ${R.name}. What kind of collaboration did you have in mind?`,`That's considerate of you, ${R.name}.`],hostile:[`${R.name}, I think we both need to calm down.`,`Let's not make this a bigger issue than it needs to be, ${R.name}.`,`${R.name}, I'd prefer if we could discuss this civilly.`,`I'm not looking for trouble, ${R.name}.`,`${R.name}, let's just keep our distance for now.`],neutral:[`Yes, ${R.name}, I noticed. What do you make of it?`,`I have a moment, ${R.name}. What's up?`,`I'm not sure, ${R.name}. I haven't given it much thought.`,`Now is fine, ${R.name}. What did you need?`,`What's your question, ${R.name}?`]},H=U[L]||U.neutral;return H[Math.floor(Math.random()*H.length)]},F=P=>{const R=P.traits.friendliness||.5,L=P.traits.aggression||.5;return R>.7&&L<.3?"agent-friendly":L>.7?"agent-aggressive":R<.3?"agent-cold":"agent-neutral"};return _.createElement("div",{className:"room-container"},_.createElement("div",{className:"room-header"},_.createElement("div",{className:"room-selector"},_.createElement("label",{htmlFor:"room-select"},"Select Room:"),_.createElement("select",{id:"room-select",value:c,onChange:P=>m(P.target.value)},d.map(P=>_.createElement("option",{key:P.id,value:P.id},P.name)))),_.createElement("h2",null,A.name),A.storyboard&&_.createElement("button",{className:"storyboard-toggle",onClick:()=>document.getElementById("storyboard-modal").showModal()},"View Storyboard")),A.storyboard&&_.createElement("dialog",{id:"storyboard-modal",className:"storyboard-modal"},_.createElement("div",{className:"storyboard-modal-content"},_.createElement("h3",null,"Storyboard: ",A.name),_.createElement("div",{className:"storyboard-text"},A.storyboard),_.createElement("button",{className:"close-storyboard",onClick:()=>document.getElementById("storyboard-modal").close()},"Close"))),_.createElement("div",{className:"room-content"},_.createElement("div",{className:"physical-room",ref:p},C.length===0?_.createElement("div",{className:"empty-room-message"},_.createElement("p",null,"No agents in this location. Add some agents to begin the simulation.")):C.map(P=>_.createElement("div",{key:P.id,className:`agent-sprite ${F(P)} facing-right`,ref:R=>h.current[P.id]=R,title:P.name},_.createElement("div",{className:"agent-emoji"}),_.createElement("div",{className:"agent-sprite-name"},P.name)))),_.createElement(ry,{messages:n,agents:t,location:c,ref:x})),_.createElement("div",{className:"simulation-status"},e?_.createElement("p",{className:"status-running"},"Simulation is running - Agents will interact when they touch",l&&_.createElement("span",{className:"ai-status active"},"  OpenAI integration active")):_.createElement("p",{className:"status-paused"},"Simulation is paused - Press Start to begin",l&&_.createElement("span",{className:"ai-status active"},"  OpenAI integration active"))),_.createElement("div",{className:"agent-list-panel"},_.createElement("h3",null,"Agents in Room (",C.length,")"),_.createElement("div",{className:"agent-list"},C.map(P=>_.createElement(y_,{key:P.id,agent:P})))),_.createElement(hk,null))};const Mh=["James","John","Robert","Michael","William","David","Richard","Joseph","Thomas","Charles","Daniel","Matthew","Anthony","Mark","Donald","Steven","Paul","Andrew","Joshua","Kenneth","Kevin","Brian","George","Timothy","Ronald","Jason","Edward","Jeffrey","Ryan","Jacob","Mary","Patricia","Jennifer","Linda","Elizabeth","Barbara","Susan","Jessica","Sarah","Karen","Lisa","Nancy","Betty","Sandra","Margaret","Ashley","Kimberly","Emily","Donna","Michelle","Carol","Amanda","Dorothy","Melissa","Deborah","Stephanie","Rebecca","Laura","Sharon","Cynthia","Taylor","Jordan","Casey","Riley","Jessie","Avery","Jaime","Peyton","Kerry","Jody","Kendall","Skyler","Frankie","Pat","Quinn","Harley","Reese","Robbie","Stevie","Morgan"],pk=()=>{const{addAgent:e}=rs(),[t,n]=W.useState(""),[r,i]=W.useState(""),[s,a]=W.useState(""),[o,l]=W.useState({friendliness:.5,aggression:.5,curiosity:.5,extraversion:.5}),u=(w,v)=>{l(x=>({...x,[w]:parseFloat(v)}))},f=()=>{l({friendliness:Math.random(),aggression:Math.random(),curiosity:Math.random(),extraversion:Math.random()})},d=()=>Mh[Math.floor(Math.random()*Mh.length)],c=w=>{if(w.preventDefault(),!t.trim()){alert("Please provide a name for the agent");return}const v={name:t.trim(),role:r.trim()||"Resident",backstory:s.trim(),traits:o};e(v),n(""),i(""),a(""),l({friendliness:.5,aggression:.5,curiosity:.5,extraversion:.5})},m=w=>{let v={name:"",role:"",backstory:"",traits:{friendliness:.5,aggression:.5,curiosity:.5,extraversion:.5}};const x=d();switch(w){case"friendly":v={name:x,role:"Friendly Neighbor",backstory:"Always looking to help others and make new friends.",traits:{friendliness:.9,aggression:.1,curiosity:.7,extraversion:.8}};break;case"aggressive":v={name:x,role:"Troublemaker",backstory:"Has a chip on their shoulder and always looking for conflict.",traits:{friendliness:.2,aggression:.9,curiosity:.5,extraversion:.7}};break;case"shy":v={name:x,role:"Observer",backstory:"Prefers to keep to themselves but has deep thoughts.",traits:{friendliness:.6,aggression:.2,curiosity:.8,extraversion:.2}};break;case"random":v={name:x,role:["Resident","Visitor","Worker","Student","Researcher"][Math.floor(Math.random()*5)],backstory:"A mysterious individual with an unknown past.",traits:{friendliness:Math.random(),aggression:Math.random(),curiosity:Math.random(),extraversion:Math.random()}};break}e(v)};return _.createElement("div",{className:"agent-creator"},_.createElement("h2",null,"Create New Agent"),_.createElement("div",{className:"quick-create"},_.createElement("h3",null,"Quick Create"),_.createElement("div",{className:"quick-buttons"},_.createElement("button",{onClick:()=>m("friendly")},"Friendly"),_.createElement("button",{onClick:()=>m("aggressive")},"Aggressive"),_.createElement("button",{onClick:()=>m("shy")},"Shy"),_.createElement("button",{onClick:()=>m("random")},"Random"))),_.createElement("form",{onSubmit:c},_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"name"},"Name:"),_.createElement("input",{type:"text",id:"name",value:t,onChange:w=>n(w.target.value),placeholder:"Enter agent name"})),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"role"},"Role:"),_.createElement("input",{type:"text",id:"role",value:r,onChange:w=>i(w.target.value),placeholder:"Enter agent role (optional)"})),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"backstory"},"Backstory:"),_.createElement("textarea",{id:"backstory",value:s,onChange:w=>a(w.target.value),placeholder:"Enter agent backstory (optional)",rows:"3"})),_.createElement("div",{className:"traits-section"},_.createElement("div",{className:"traits-header"},_.createElement("h3",null,"Personality Traits"),_.createElement("button",{type:"button",onClick:f,className:"randomize-btn"},"Randomize")),_.createElement("div",{className:"trait-sliders"},Object.entries(o).map(([w,v])=>_.createElement("div",{key:w,className:"trait-slider"},_.createElement("label",{htmlFor:`trait-${w}`},w.charAt(0).toUpperCase()+w.slice(1),":"),_.createElement("input",{type:"range",id:`trait-${w}`,min:"0",max:"1",step:"0.01",value:v,onChange:x=>u(w,x.target.value)}),_.createElement("span",{className:"trait-value"},Math.round(v*100),"%"))))),_.createElement("button",{type:"submit",className:"create-btn"},"Create Agent")))};const gk=({onClose:e,onSave:t,initialSettings:n})=>{const[r,i]=W.useState({openAIKey:n.openAIKey||""}),[s,a]=W.useState(!1),o=u=>{const{name:f,value:d}=u.target;i(c=>({...c,[f]:d}))},l=u=>{u.preventDefault(),t(r)};return _.createElement("div",{className:"settings-overlay"},_.createElement("div",{className:"settings-modal"},_.createElement("div",{className:"settings-header"},_.createElement("h2",null,"Simulation Settings"),_.createElement("button",{className:"close-btn",onClick:e},"")),_.createElement("form",{onSubmit:l},_.createElement("div",{className:"settings-section"},_.createElement("h3",null,"OpenAI Integration"),_.createElement("p",{className:"settings-description"},"Enter your OpenAI API key to enable AI-generated messages for agents and storyboard generation. When enabled, agents will communicate using the OpenAI API, with messages tailored to their personality traits and relationships."),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"openAIKey"},"OpenAI API Key:"),_.createElement("div",{className:"api-key-input"},_.createElement("input",{type:s?"text":"password",id:"openAIKey",name:"openAIKey",value:r.openAIKey,onChange:o,placeholder:"Enter your OpenAI API key"}),_.createElement("button",{type:"button",className:"toggle-visibility",onClick:()=>a(!s)},s?"Hide":"Show")),_.createElement("div",{className:"api-key-info"},r.openAIKey?_.createElement("span",{className:"key-status active"},"OpenAI integration is active"):_.createElement("span",{className:"key-status inactive"},"OpenAI integration is inactive"))),_.createElement("div",{className:"settings-info"},_.createElement("p",null,_.createElement("strong",null,"Note:")," Your API key is stored locally in your browser and is never sent to our servers. Standard OpenAI API usage rates apply."))),_.createElement("div",{className:"settings-actions"},_.createElement("button",{type:"button",className:"cancel-btn",onClick:e},"Cancel"),_.createElement("button",{type:"submit",className:"save-btn"},"Save Settings")))))};const yk=[{id:"affiliate-network",name:"Affiliate Marketing Network",description:"A business environment where marketers collaborate and compete to promote products.",roles:["Network Owner","Affiliate Marketer","Product Creator","Marketing Manager","Customer Support"],defaultAgents:5},{id:"cooking-show",name:"Cooking Competition Show",description:"A high-pressure kitchen where chefs compete to create the best dishes.",roles:["Head Chef","Contestant","Judge","Host","Sous Chef","Food Critic"],defaultAgents:6},{id:"classroom",name:"High School Classroom",description:"An educational setting with teachers and students of varying personalities.",roles:["Teacher","Class President","Troublemaker","Quiet Student","Overachiever","Exchange Student"],defaultAgents:6},{id:"office",name:"Corporate Office",description:"A typical workplace with various employees and office politics.",roles:["CEO","Manager","Assistant","Intern","HR Representative","Sales Executive"],defaultAgents:6},{id:"soccer-game",name:"Soccer Team",description:"A sports team with players, coaches, and support staff.",roles:["Coach","Team Captain","Striker","Goalkeeper","Defender","New Recruit","Team Manager"],defaultAgents:7},{id:"custom",name:"Custom Scenario",description:"Create your own unique simulation scenario.",roles:[],defaultAgents:0}],Ih={balanced:{friendliness:.5,aggression:.5,curiosity:.5,extraversion:.5},friendly:{friendliness:.8,aggression:.2,curiosity:.6,extraversion:.7},aggressive:{friendliness:.3,aggression:.8,curiosity:.5,extraversion:.6},curious:{friendliness:.6,aggression:.3,curiosity:.9,extraversion:.5},shy:{friendliness:.6,aggression:.2,curiosity:.7,extraversion:.2},outgoing:{friendliness:.7,aggression:.4,curiosity:.6,extraversion:.9},reserved:{friendliness:.4,aggression:.3,curiosity:.5,extraversion:.3}},$h=["James","John","Robert","Michael","William","David","Richard","Joseph","Thomas","Charles","Daniel","Matthew","Anthony","Mark","Donald","Steven","Paul","Andrew","Joshua","Kenneth","Mary","Patricia","Jennifer","Linda","Elizabeth","Barbara","Susan","Jessica","Sarah","Karen","Lisa","Nancy","Betty","Sandra","Margaret","Ashley","Kimberly","Emily","Donna","Michelle","Taylor","Jordan","Casey","Riley","Jessie","Avery","Jaime","Peyton","Kerry","Jody"],vk=({onClose:e,onCreateRoom:t})=>{const{hasOpenAI:n,generateRoomStoryboard:r,addRoom:i,addAgent:s}=rs(),[a,o]=W.useState(null),[l,u]=W.useState(""),[f,d]=W.useState(""),[c,m]=W.useState(""),[w,v]=W.useState(5),[x,p]=W.useState(!1),[h,y]=W.useState(null),[g,E]=W.useState([]),C=k=>{o(k),u(k.name),v(k.defaultAgents),k.id==="custom"&&(d(""),m(""))},A=async()=>{if(!n){alert("OpenAI API key is required for storyboard generation. Please add your API key in Settings.");return}p(!0);try{const k=a,N=k.id==="custom"?f:k.description,z=k.id==="custom"?c.split(",").map(G=>G.trim()).filter(G=>G):k.roles,B=await r(l,N,z,w);B?(y(B.storyboard),E(B.agents)):alert("Failed to generate storyboard. Please try again.")}catch(k){console.error("Error generating storyboard:",k),alert("An error occurred while generating the storyboard.")}finally{p(!1)}},S=()=>{if(!a){alert("Please select a room template.");return}if(!l.trim()){alert("Please enter a room name.");return}const k=a,N=k.id==="custom"?f:k.description,z=k.id==="custom"?c.split(",").map(ie=>ie.trim()).filter(ie=>ie):k.roles,B=i({name:l,description:N,storyboard:h||N});(g.length>0?g:$(z,w)).forEach(ie=>{s({...ie,location:B.id})}),e()},$=(k,N)=>{const z=[],B=new Set,G=[...k];for(;G.length<N;)G.push(k[Math.floor(Math.random()*k.length)]);for(let ie=0;ie<N;ie++){let M;do M=$h[Math.floor(Math.random()*$h.length)];while(B.has(M));B.add(M);const b=Object.keys(Ih),I=Ih[b[Math.floor(Math.random()*b.length)]];z.push({name:M,role:G[ie],backstory:`A ${G[ie]} in the ${l} simulation.`,traits:{...I}})}return z};return _.createElement("div",{className:"room-creator-overlay"},_.createElement("div",{className:"room-creator-modal"},_.createElement("div",{className:"room-creator-header"},_.createElement("h2",null,"Create New Simulation Room"),_.createElement("button",{className:"close-btn",onClick:e},"")),_.createElement("div",{className:"room-creator-content"},_.createElement("div",{className:"template-selection"},_.createElement("h3",null,"Select a Room Template"),_.createElement("div",{className:"template-grid"},yk.map(k=>_.createElement("div",{key:k.id,className:`template-card ${(a==null?void 0:a.id)===k.id?"selected":""}`,onClick:()=>C(k)},_.createElement("h4",null,k.name),_.createElement("p",null,k.description),k.roles.length>0&&_.createElement("div",{className:"template-roles"},_.createElement("span",null,"Roles: "),k.roles.slice(0,3).join(", "),k.roles.length>3&&"..."))))),a&&_.createElement("div",{className:"room-configuration"},_.createElement("h3",null,"Configure Your Room"),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"roomName"},"Room Name:"),_.createElement("input",{type:"text",id:"roomName",value:l,onChange:k=>u(k.target.value),placeholder:"Enter a name for your simulation room"})),a.id==="custom"&&_.createElement(_.Fragment,null,_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"customDescription"},"Room Description:"),_.createElement("textarea",{id:"customDescription",value:f,onChange:k=>d(k.target.value),placeholder:"Describe your custom simulation scenario",rows:"3"})),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"customRoles"},"Roles (comma-separated):"),_.createElement("input",{type:"text",id:"customRoles",value:c,onChange:k=>m(k.target.value),placeholder:"E.g., CEO, Manager, Employee, Intern"}))),_.createElement("div",{className:"form-group"},_.createElement("label",{htmlFor:"agentCount"},"Number of Agents:"),_.createElement("div",{className:"agent-count-control"},_.createElement("button",{type:"button",onClick:()=>v(Math.max(2,w-1)),disabled:w<=2},"-"),_.createElement("input",{type:"number",id:"agentCount",value:w,onChange:k=>v(Math.max(2,Math.min(10,parseInt(k.target.value)||2))),min:"2",max:"10"}),_.createElement("button",{type:"button",onClick:()=>v(Math.min(10,w+1)),disabled:w>=10},"+")),_.createElement("div",{className:"input-hint"},"Min: 2, Max: 10")),n&&_.createElement("div",{className:"storyboard-section"},_.createElement("h3",null,"AI Storyboard Generation"),_.createElement("p",{className:"storyboard-description"},"Generate a detailed storyboard and agent profiles for your simulation using AI. This will create a narrative framework and personalities for your agents."),_.createElement("button",{type:"button",className:"generate-storyboard-btn",onClick:A,disabled:x},x?"Generating...":"Generate Storyboard"),h&&_.createElement("div",{className:"storyboard-preview"},_.createElement("h4",null,"Generated Storyboard"),_.createElement("div",{className:"storyboard-content"},h),_.createElement("div",{className:"generated-agents"},_.createElement("h4",null,"Generated Agents (",g.length,")"),_.createElement("ul",null,g.map((k,N)=>_.createElement("li",{key:N},_.createElement("strong",null,k.name)," - ",k.role)))))))),_.createElement("div",{className:"room-creator-actions"},_.createElement("button",{type:"button",className:"cancel-btn",onClick:e},"Cancel"),_.createElement("button",{type:"button",className:"create-room-btn",onClick:S,disabled:!a||!l.trim()},"Create Room"))))};function wk(){const[e,t]=W.useState(!1),[n,r]=W.useState(!1),[i,s]=W.useState(!1),[a,o]=W.useState(()=>localStorage.getItem("openai_api_key")||""),l=u=>{u.openAIKey&&(localStorage.setItem("openai_api_key",u.openAIKey),o(u.openAIKey)),r(!1)};return _.createElement(g_,{openAIKey:a},_.createElement("div",{className:"app-container"},_.createElement("h1",null,"AI Agent Simulation"),_.createElement("div",{className:"controls"},_.createElement("button",{onClick:()=>t(!e),className:e?"stop-btn":"start-btn"},e?"Pause Simulation":"Start Simulation"),_.createElement("button",{onClick:()=>s(!0),className:"create-room-btn"},"Create Room"),_.createElement("button",{onClick:()=>r(!0),className:"settings-btn"},"Settings")),_.createElement("div",{className:"main-content"},_.createElement(pk,null),_.createElement(mk,{isRunning:e})),n&&_.createElement(gk,{onClose:()=>r(!1),onSave:l,initialSettings:{openAIKey:a}}),i&&_.createElement(vk,{onClose:()=>s(!1),onCreateRoom:u=>{const{addRoom:f,addAgent:d}=useSimulation(),c=f({name:u.name,description:u.description,storyboard:u.storyboard});u.agents&&u.agents.length>0&&u.agents.forEach(m=>{d({...m,location:c.id})}),s(!1)}})))}dl.createRoot(document.getElementById("root")).render(_.createElement(_.StrictMode,null,_.createElement(wk,null)));
